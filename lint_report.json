[{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\eslint.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\postcss.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\server\\src\\index.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":151,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":151,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5373,5376],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5373,5376],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":217,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":217,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8162,8165],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8162,8165],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":300,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":300,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10228,10231],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10228,10231],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":347,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":347,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11463,11466],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11463,11466],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":359,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":359,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11797,11800],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11797,11800],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":402,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":402,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13229,13232],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13229,13232],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":450,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":450,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14416,14419],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14416,14419],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":498,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":498,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15610,15613],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15610,15613],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":513,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":513,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16044,16047],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16044,16047],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import express from 'express';\r\nimport cors from 'cors';\r\nimport { PrismaClient } from '@prisma/client';\r\n\r\nconst prisma = new PrismaClient();\r\nconst app = express();\r\nconst PORT = process.env.PORT || 3000;\r\n\r\napp.use(cors());\r\n// Augmenter la limite pour les photos en Base64 (50MB)\r\napp.use(express.json({ limit: '50mb' }));\r\napp.use(express.urlencoded({ limit: '50mb', extended: true }));\r\n\r\n// --- Routes ---\r\n\r\n// Organisations\r\napp.get('/api/organisations', async (req, res) => {\r\n  const orgs = await prisma.organisation.findMany();\r\n  res.json(orgs);\r\n});\r\napp.get('/api/organisations/:id', async (req, res) => {\r\n  try {\r\n    const { id } = req.params;\r\n    const org = await prisma.organisation.findUnique({ where: { id } });\r\n    \r\n    if (!org) {\r\n        return res.status(404).json({ error: \"Organisation non trouv√©e\" });\r\n    }\r\n\r\n    // Calcul des statistiques √† la vol√©e\r\n    const nbSections = await prisma.section.count({ where: { id_organisation: id } });\r\n    \r\n    // Pour les villages et producteurs, on passe par les relations\r\n    // Note: Si la relation directe n'existe pas dans le sch√©ma pour Producteur->Organisation, on passe par Section->Village\r\n    // Mais le sch√©ma actuel semble lier Section->Organisation et Village->Section.\r\n    \r\n    const nbVillages = await prisma.village.count({ \r\n        where: { section: { id_organisation: id } } \r\n    });\r\n\r\n    const nbProducteurs = await prisma.producteur.count({\r\n        where: { village: { section: { id_organisation: id } } }\r\n    });\r\n    \r\n    const nbParcelles = await prisma.parcelle.count({\r\n        where: { producteur: { village: { section: { id_organisation: id } } } }\r\n    });\r\n\r\n    res.json({ ...org, stats: { nbSections, nbVillages, nbProducteurs, nbParcelles } });\r\n  } catch (error) {\r\n    console.error(error);\r\n    res.status(500).json({ error: \"Erreur serveur\" });\r\n  }\r\n});\r\n\r\n// Sections\r\napp.get('/api/sections', async (req, res) => {\r\n  const sections = await prisma.section.findMany();\r\n  res.json(sections);\r\n});\r\napp.get('/api/sections/:id', async (req, res) => {\r\n  const section = await prisma.section.findUnique({ where: { id: req.params.id } });\r\n  res.json(section);\r\n});\r\n\r\n// Villages\r\napp.get('/api/villages', async (req, res) => {\r\n  const villages = await prisma.village.findMany();\r\n  res.json(villages);\r\n});\r\napp.get('/api/villages/:id', async (req, res) => {\r\n  const village = await prisma.village.findUnique({ where: { id: req.params.id } });\r\n  res.json(village);\r\n});\r\n\r\n// Producteurs\r\napp.get('/api/producteurs', async (req, res) => {\r\n  const producteurs = await prisma.producteur.findMany();\r\n  res.json(producteurs);\r\n});\r\napp.get('/api/producteurs/:id', async (req, res) => {\r\n  const producteur = await prisma.producteur.findUnique({ where: { id: req.params.id } });\r\n  res.json(producteur);\r\n});\r\n\r\n// Plantations (Parcelles)\r\napp.get('/api/parcelles', async (req, res) => {\r\n  const parcelles = await prisma.parcelle.findMany();\r\n  res.json(parcelles);\r\n});\r\napp.get('/api/parcelles/:id', async (req, res) => {\r\n  const parcelle = await prisma.parcelle.findUnique({ where: { id: req.params.id } });\r\n  res.json(parcelle);\r\n});\r\n\r\n// Operations\r\napp.get('/api/operations', async (req, res) => {\r\n  const operations = await prisma.operation.findMany();\r\n  res.json(operations);\r\n});\r\napp.get('/api/operations/:id', async (req, res) => {\r\n  const operation = await prisma.operation.findUnique({ where: { id: req.params.id } });\r\n  res.json(operation);\r\n});\r\n\r\napp.post('/api/operations', async (req, res) => {\r\n  try {\r\n    const data = req.body;\r\n    console.log('üì• Donn√©es re√ßues:', JSON.stringify(data, null, 2));\r\n\r\n    // V√©rification de la structure des donn√©es\r\n    if (!data.identification || !data.identification.idProducteur || !data.identification.idPlantation) {\r\n      return res.status(400).json({ \r\n        error: \"Donn√©es d'identification manquantes\",\r\n        received: Object.keys(data)\r\n      });\r\n    }\r\n\r\n    const { identification, recolte, ecabossage, transport, fermentation, sechage, ensachage, manutention, paiement } = data;\r\n\r\n    // 1. R√©cup√©rer le producteur pour avoir son ID Village\r\n    const producteur = await prisma.producteur.findUnique({\r\n        where: { id: identification.idProducteur }\r\n    });\r\n\r\n    if (!producteur) {\r\n        console.error('‚ùå Producteur introuvable:', identification.idProducteur);\r\n        return res.status(404).json({ error: \"Producteur introuvable\", id: identification.idProducteur });\r\n    }\r\n\r\n    console.log('‚úÖ Producteur trouv√©:', producteur.id, 'Village:', producteur.id_village);\r\n\r\n    // V√©rifier que la parcelle existe\r\n    const parcelle = await prisma.parcelle.findUnique({\r\n        where: { id: identification.idPlantation }\r\n    });\r\n\r\n    if (!parcelle) {\r\n        console.error('‚ùå Parcelle introuvable:', identification.idPlantation);\r\n        return res.status(404).json({ error: \"Parcelle introuvable\", id: identification.idPlantation });\r\n    }\r\n\r\n    // Fonction helper pour convertir une date string en Date valide\r\n    const parseDate = (dateStr: string | undefined | null): Date | null => {\r\n      if (!dateStr || dateStr.trim() === '') return null;\r\n      const date = new Date(dateStr);\r\n      return isNaN(date.getTime()) ? null : date;\r\n    };\r\n\r\n    // Pr√©parer les donn√©es avec gestion des valeurs nulles/undefined\r\n    const operationData: any = {\r\n        id_producteur: identification.idProducteur,\r\n        id_parcelle: identification.idPlantation,\r\n        id_village: producteur.id_village,\r\n        id_agent: identification.idAgent || null,\r\n        campagne: \"2023-2024\",\r\n        statut: (paiement?.especes || paiement?.cheque) ? \"Pay√©\" : \"Valid√©\",\r\n        \r\n        // R√©colte\r\n        date_recolte_1: parseDate(recolte?.dateRecolte1),\r\n        date_recolte_2: parseDate(recolte?.dateRecolte2),\r\n        date_recolte_3: parseDate(recolte?.dateRecolte3),\r\n        \r\n        // Ecabossage\r\n        date_ecabossage: parseDate(ecabossage?.dateEcabossage),\r\n        ecabossage_duree: ecabossage?.dateEcabossage ? \"1 jour\" : null,\r\n        cout_ecabossage: ecabossage?.cout ?? null,\r\n        \r\n        // Transport\r\n        date_transport: parseDate(transport?.dateTransport),\r\n        \r\n        // Fermentation\r\n        fermentation_debut: parseDate(fermentation?.dateDebut),\r\n        fermentation_fin: parseDate(fermentation?.dateFin),\r\n        materiel_feuilles: fermentation?.materiel_feuilles ?? false,\r\n        materiel_caisses: fermentation?.materiel_caisses ?? false,\r\n        \r\n        // S√©chage\r\n        sechage_debut: parseDate(sechage?.dateDebut),\r\n        sechage_fin: parseDate(sechage?.dateFin),\r\n        aire_claie_bambou: sechage?.aire_claie_bambou ?? false,\r\n        aire_bache_noire: sechage?.aire_plastique_sol ?? false,\r\n        aire_ciment: sechage?.aire_cimentee ?? false,\r\n        \r\n        // Ensachage\r\n        ensachage_debut: parseDate(ensachage?.dateDebut),\r\n        nb_sacs_brousse: ensachage?.nbSacs ?? 0,\r\n        poids_estimatif: ensachage?.poidsEstimatif ?? null,\r\n        date_livraison: parseDate(ensachage?.dateLivraison),\r\n        \r\n        // Manutention\r\n        manutention_pesee: manutention?.pesee ?? null,\r\n        validation_statut: manutention?.validation || \"En attente\",\r\n        \r\n        // Paiement\r\n        paiement_especes: paiement?.especes ?? false,\r\n        montant_especes: paiement?.montantEspeces ?? 0,\r\n        paiement_cheque: paiement?.cheque ?? false,\r\n        montant_cheque: paiement?.montantCheque ?? 0,\r\n        numero_cheque: paiement?.numeroCheque || null,\r\n        banque: paiement?.banque || null,\r\n        \r\n        retenue_mec: paiement?.retenueMec ?? false,\r\n        retenue_mec_taux: paiement?.tauxMec ?? 0,\r\n        retenue_epargne: paiement?.retenueEpargne ?? false,\r\n        retenue_epargne_taux: paiement?.tauxEpargne ?? 0,\r\n    };\r\n\r\n    console.log('üíæ Cr√©ation de l\\'op√©ration avec les donn√©es:', JSON.stringify(operationData, null, 2));\r\n\r\n    const operation = await prisma.operation.create({\r\n        data: operationData\r\n    });\r\n\r\n    console.log('‚úÖ Op√©ration cr√©√©e avec succ√®s:', operation.id);\r\n    res.json(operation);\r\n  } catch (e: any) {\r\n    console.error('‚ùå Erreur lors de la cr√©ation de l\\'op√©ration:', e);\r\n    console.error('Stack:', e.stack);\r\n    res.status(500).json({ \r\n      error: \"Erreur lors de la cr√©ation de l'op√©ration\",\r\n      message: e.message,\r\n      code: e.code\r\n    });\r\n  }\r\n});\r\n\r\n// ==================== AGENTS ====================\r\n\r\napp.get('/api/agents', async (req, res) => {\r\n  try {\r\n    const agents = await prisma.agent.findMany({\r\n      include: {\r\n        regions: {\r\n          include: { region: true }\r\n        }\r\n      }\r\n    });\r\n    res.json(agents);\r\n  } catch (error) {\r\n    console.error(error);\r\n    res.status(500).json({ error: \"Erreur serveur\" });\r\n  }\r\n});\r\n\r\napp.get('/api/agents/:id', async (req, res) => {\r\n  try {\r\n    const agent = await prisma.agent.findUnique({\r\n      where: { id: req.params.id },\r\n      include: {\r\n        regions: {\r\n          include: { region: true }\r\n        },\r\n        operations: {\r\n          take: 10,\r\n          orderBy: { createdAt: 'desc' }\r\n        }\r\n      }\r\n    });\r\n    if (!agent) return res.status(404).json({ error: \"Agent non trouv√©\" });\r\n    res.json(agent);\r\n  } catch (error) {\r\n    console.error(error);\r\n    res.status(500).json({ error: \"Erreur serveur\" });\r\n  }\r\n});\r\n\r\napp.post('/api/agents', async (req, res) => {\r\n  try {\r\n    const { regions, ...agentData } = req.body;\r\n    const agent = await prisma.agent.create({\r\n      data: agentData\r\n    });\r\n\r\n    // Affecter les r√©gions\r\n    if (regions && Array.isArray(regions) && regions.length > 0) {\r\n      await Promise.all(\r\n        regions.map((regionId: string) =>\r\n          prisma.agentRegion.create({\r\n            data: {\r\n              id_agent: agent.id,\r\n              id_region: regionId,\r\n              statut: 'actif'\r\n            }\r\n          })\r\n        )\r\n      );\r\n    }\r\n\r\n    const agentWithRegions = await prisma.agent.findUnique({\r\n      where: { id: agent.id },\r\n      include: {\r\n        regions: {\r\n          include: { region: true }\r\n        }\r\n      }\r\n    });\r\n\r\n    res.json(agentWithRegions);\r\n  } catch (error: any) {\r\n    console.error(error);\r\n    res.status(500).json({ error: error.message || \"Erreur cr√©ation agent\" });\r\n  }\r\n});\r\n\r\napp.put('/api/agents/:id', async (req, res) => {\r\n  try {\r\n    const { regions, ...agentData } = req.body;\r\n    const agent = await prisma.agent.update({\r\n      where: { id: req.params.id },\r\n      data: agentData\r\n    });\r\n\r\n    // Mettre √† jour les affectations r√©gions\r\n    if (regions && Array.isArray(regions)) {\r\n      // Supprimer les anciennes affectations\r\n      await prisma.agentRegion.deleteMany({\r\n        where: { id_agent: req.params.id }\r\n      });\r\n\r\n      // Cr√©er les nouvelles\r\n      if (regions.length > 0) {\r\n        await Promise.all(\r\n          regions.map((regionId: string) =>\r\n            prisma.agentRegion.create({\r\n              data: {\r\n                id_agent: req.params.id,\r\n                id_region: regionId,\r\n                statut: 'actif'\r\n              }\r\n            })\r\n          )\r\n        );\r\n      }\r\n    }\r\n\r\n    const agentWithRegions = await prisma.agent.findUnique({\r\n      where: { id: agent.id },\r\n      include: {\r\n        regions: {\r\n          include: { region: true }\r\n        }\r\n      }\r\n    });\r\n\r\n    res.json(agentWithRegions);\r\n  } catch (error: any) {\r\n    console.error(error);\r\n    res.status(500).json({ error: error.message || \"Erreur mise √† jour agent\" });\r\n  }\r\n});\r\n\r\napp.delete('/api/agents/:id', async (req, res) => {\r\n  try {\r\n    await prisma.agent.delete({\r\n      where: { id: req.params.id }\r\n    });\r\n    res.json({ message: \"Agent supprim√©\" });\r\n  } catch (error: any) {\r\n    console.error(error);\r\n    res.status(500).json({ error: error.message || \"Erreur suppression agent\" });\r\n  }\r\n});\r\n\r\napp.get('/api/agents/:id/stats', async (req, res) => {\r\n  try {\r\n    const agent = await prisma.agent.findUnique({\r\n      where: { id: req.params.id },\r\n      include: {\r\n        operations: true,\r\n        regions: {\r\n          include: { region: true }\r\n        }\r\n      }\r\n    });\r\n\r\n    if (!agent) {\r\n      return res.status(404).json({ error: \"Agent non trouv√©\" });\r\n    }\r\n\r\n    const maintenant = new Date();\r\n    const debutMois = new Date(maintenant.getFullYear(), maintenant.getMonth(), 1);\r\n\r\n    const operationsMois = agent.operations.filter(\r\n      op => new Date(op.createdAt) >= debutMois\r\n    );\r\n\r\n    const stats = {\r\n      id_agent: agent.id,\r\n      nom_complet: `${agent.nom} ${agent.prenom}`,\r\n      nb_operations: agent.operations.length,\r\n      nb_operations_mois: operationsMois.length,\r\n      poids_total: agent.operations.reduce((sum, op) => sum + (op.manutention_pesee || 0), 0),\r\n      poids_mois: operationsMois.reduce((sum, op) => sum + (op.manutention_pesee || 0), 0),\r\n      regions: agent.regions.map(ar => ar.region.nom),\r\n      dernier_operation: agent.operations.length > 0 \r\n        ? agent.operations.sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime())[0].createdAt\r\n        : null\r\n    };\r\n\r\n    res.json(stats);\r\n  } catch (error: any) {\r\n    console.error(error);\r\n    res.status(500).json({ error: error.message || \"Erreur calcul statistiques\" });\r\n  }\r\n});\r\n\r\n// ==================== R√âGIONS ====================\r\n\r\napp.get('/api/regions', async (req, res) => {\r\n  try {\r\n    const regions = await prisma.region.findMany({\r\n      include: {\r\n        agents: {\r\n          include: { agent: true }\r\n        }\r\n      }\r\n    });\r\n    res.json(regions);\r\n  } catch (error) {\r\n    console.error(error);\r\n    res.status(500).json({ error: \"Erreur serveur\" });\r\n  }\r\n});\r\n\r\napp.get('/api/regions/:id', async (req, res) => {\r\n  try {\r\n    const region = await prisma.region.findUnique({\r\n      where: { id: req.params.id },\r\n      include: {\r\n        agents: {\r\n          include: { agent: true }\r\n        }\r\n      }\r\n    });\r\n    if (!region) return res.status(404).json({ error: \"R√©gion non trouv√©e\" });\r\n    res.json(region);\r\n  } catch (error) {\r\n    console.error(error);\r\n    res.status(500).json({ error: \"Erreur serveur\" });\r\n  }\r\n});\r\n\r\napp.post('/api/regions', async (req, res) => {\r\n  try {\r\n    const region = await prisma.region.create({\r\n      data: req.body\r\n    });\r\n    res.json(region);\r\n  } catch (error: any) {\r\n    console.error(error);\r\n    res.status(500).json({ error: error.message || \"Erreur cr√©ation r√©gion\" });\r\n  }\r\n});\r\n\r\napp.get('/api/regions/:id/agents', async (req, res) => {\r\n  try {\r\n    const affectations = await prisma.agentRegion.findMany({\r\n      where: {\r\n        id_region: req.params.id,\r\n        statut: 'actif'\r\n      },\r\n      include: {\r\n        agent: {\r\n          include: {\r\n            regions: {\r\n              include: { region: true }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    });\r\n    const agents = affectations.map(aff => aff.agent);\r\n    res.json(agents);\r\n  } catch (error) {\r\n    console.error(error);\r\n    res.status(500).json({ error: \"Erreur serveur\" });\r\n  }\r\n});\r\n\r\n// ==================== AFFECTATIONS ====================\r\n\r\napp.post('/api/agents/:idAgent/regions', async (req, res) => {\r\n  try {\r\n    const { id_region } = req.body;\r\n    const affectation = await prisma.agentRegion.create({\r\n      data: {\r\n        id_agent: req.params.idAgent,\r\n        id_region: id_region,\r\n        statut: 'actif'\r\n      },\r\n      include: {\r\n        agent: true,\r\n        region: true\r\n      }\r\n    });\r\n    res.json(affectation);\r\n  } catch (error: any) {\r\n    console.error(error);\r\n    res.status(500).json({ error: error.message || \"Erreur affectation\" });\r\n  }\r\n});\r\n\r\napp.delete('/api/agents/:idAgent/regions/:idRegion', async (req, res) => {\r\n  try {\r\n    await prisma.agentRegion.deleteMany({\r\n      where: {\r\n        id_agent: req.params.idAgent,\r\n        id_region: req.params.idRegion\r\n      }\r\n    });\r\n    res.json({ message: \"Affectation retir√©e\" });\r\n  } catch (error: any) {\r\n    console.error(error);\r\n    res.status(500).json({ error: error.message || \"Erreur retrait affectation\" });\r\n  }\r\n});\r\n\r\n// Start server\r\napp.listen(PORT, () => {\r\n  console.log(`Serveur CacaoTrack d√©marr√© sur http://localhost:${PORT}`);\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\server\\src\\seed.ts","messages":[{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Do not use \"@ts-nocheck\" because it alters compilation errors.","line":1,"column":1,"nodeType":"Line","messageId":"tsDirectiveComment","endLine":1,"endColumn":15}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// @ts-nocheck\r\nimport { PrismaClient } from '@prisma/client';\r\n\r\nconst prisma = new PrismaClient();\r\n\r\nasync function main() {\r\n  console.log('Start seeding ...');\r\n\r\n  // 1. Organisation\r\n  const org1 = await prisma.organisation.upsert({\r\n    where: { code: 'ORG-001' },\r\n    update: {},\r\n    create: {\r\n      id: \"org-1\",\r\n      code: \"ORG-001\",\r\n      nom: \"SCOOP-CA Divo\",\r\n      type: \"Coop√©rative\",\r\n      statut: \"actif\",\r\n      region: \"L√¥h-Djiboua\",\r\n      departement: \"Divo\",\r\n      sous_prefecture: \"Divo\",\r\n      localite: \"Divo\",\r\n      president_nom: \"Kouassi Michel\",\r\n      president_contact: [\"0707070707\"],\r\n    },\r\n  });\r\n  console.log(`Created Organisation: ${org1.nom}`);\r\n\r\n  // 2. Section\r\n  const sec1 = await prisma.section.upsert({\r\n    where: { code: 'SEC-001' },\r\n    update: {},\r\n    create: {\r\n      id: \"sec-1\",\r\n      id_organisation: org1.id,\r\n      code: \"SEC-001\",\r\n      localite: \"Section Nord\",\r\n      nom: \"Section Nord\",\r\n      statut: \"actif\",\r\n      nb_producteurs: 150,\r\n      tonnage_c_precedente: 1200,\r\n      tonnage_c_cours: 800,\r\n      tonnage_potentiel: 1500,\r\n      president_nom: \"Konan Yves\",\r\n      president_contact: [\"0505050505\"],\r\n      secretaire_nom: \"Kouame Anne\",\r\n      secretaire_contact: [\"0606060606\"],\r\n      magasinier_nom: \"Yao Paul\",\r\n      magasinier_contact: [\"0404040404\"],\r\n      peseur_nom: \"Brou Marc\",\r\n      peseur_contact: [\"0303030303\"],\r\n      vehicule_camionnette_nombre: 2,\r\n      vehicule_moto_nombre: 10,\r\n      vehicule_tricycle_nombre: 3,\r\n      materiel_bascule: true,\r\n      materiel_dickey_john: true,\r\n      materiel_sondes: true,\r\n      materiel_couteaux: true,\r\n      comm_coop: true,\r\n    },\r\n  });\r\n  console.log(`Created Section: ${sec1.nom}`);\r\n\r\n  // 3. Village\r\n  const vil1 = await prisma.village.upsert({\r\n    where: { code: 'VIL-001' },\r\n    update: {},\r\n    create: {\r\n      id: \"vil-1\",\r\n      id_section: sec1.id,\r\n      code: \"VIL-001\",\r\n      type: \"Village\",\r\n      nom: \"Village Centre\",\r\n      localite: \"Divo\",\r\n      statut: \"actif\",\r\n      chef_nom: \"N'Guessan Pierre\",\r\n      chef_contact: [\"0101010101\"],\r\n      nombre_habitants: 1200,\r\n      nombre_hommes: 600,\r\n      nombre_femmes: 600,\r\n      nombre_enfants_scolarises: 300,\r\n      eau_courante: true,\r\n      pompe_hydraulique: true,\r\n      electricite_reseau: true,\r\n      dispensaire: true,\r\n      pharmacie: true,\r\n      ecole_primaire: true,\r\n      college_lycee: true,\r\n      culture_cacao: true,\r\n      culture_cafe: true,\r\n      culture_mais: true,\r\n      om_orange: true,\r\n      momo_mtn: true,\r\n    },\r\n  });\r\n  console.log(`Created Village: ${vil1.nom}`);\r\n\r\n  // 4. Producteurs\r\n  const prod1 = await prisma.producteur.upsert({\r\n    where: { code: 'ORG-001-SEC-001-VIL-001-001' },\r\n    update: {},\r\n    create: {\r\n      id: \"prod-1\",\r\n      id_village: vil1.id,\r\n      code: \"ORG-001-SEC-001-VIL-001-001\",\r\n      nom_complet: \"KOUASSI JEAN\",\r\n      statut: \"actif\",\r\n      sexe: \"M\", // Suppos√©\r\n      date_naissance: new Date(\"1980-05-15\"),\r\n      lieu_naissance: \"DIVO\",\r\n      nb_epouses: 1,\r\n      nb_enfants: 4,\r\n      nb_personnes_charge: 6,\r\n      niveau_etude: \"Primaire\", // Suppos√©\r\n      alphabete: true, // Suppos√©\r\n      acces_eau_potable: true, // Mapping\r\n      acces_electricite: true,\r\n      proprietaire_maison: true, // Suppos√©\r\n      type_habitat: \"Briques/Ciment\",\r\n      cacao_nb_plantations: 2,\r\n      cacao_superficie: 5.5,\r\n      cacao_production_annuelle: 4.2,\r\n    },\r\n  });\r\n  \r\n  const prod2 = await prisma.producteur.upsert({\r\n    where: { code: 'ORG-001-SEC-001-VIL-001-002' },\r\n    update: {},\r\n    create: {\r\n      id: \"prod-2\",\r\n      id_village: vil1.id,\r\n      code: \"ORG-001-SEC-001-VIL-001-002\",\r\n      nom_complet: \"KON√â MARIE\",\r\n      statut: \"actif\",\r\n      sexe: \"F\",\r\n      date_naissance: new Date(\"1985-08-22\"),\r\n      lieu_naissance: \"LAKOTA\",\r\n      nb_epouses: 0,\r\n      nb_enfants: 2,\r\n      nb_personnes_charge: 3,\r\n      cacao_nb_plantations: 1,\r\n      cacao_superficie: 2.5,\r\n      cacao_production_annuelle: 1.8,\r\n      acces_electricite: true,\r\n      type_habitat: \"Terre battue s√©ch√©e\",\r\n    },\r\n  });\r\n  console.log(`Created Producteurs: ${prod1.nom_complet}, ${prod2.nom_complet}`);\r\n\r\n  // 5. Parcelles\r\n  const parc1 = await prisma.parcelle.upsert({\r\n    where: { code: 'P-089' },\r\n    update: {},\r\n    create: {\r\n      id: \"parc-1\",\r\n      id_producteur: prod1.id,\r\n      code: \"P-089\",\r\n      statut: \"active\",\r\n      age_plantation: 12,\r\n      superficie_declaree: 3.5,\r\n      superficie_reelle: 3.42,\r\n      latitude: 5.84,\r\n      longitude: -5.36,\r\n      maladie_pourriture_brune: \"Peu\",\r\n      maladie_swollen_shoot: \"Inexistant\",\r\n      maladie_parasites: \"Peu\",\r\n      equipement_bottes: true,\r\n      equipement_gants: true,\r\n      equipement_combinaison: true,\r\n    },\r\n  });\r\n  \r\n  const parc2 = await prisma.parcelle.upsert({\r\n    where: { code: 'P-090' },\r\n    update: {},\r\n    create: {\r\n      id: \"parc-2\",\r\n      id_producteur: prod1.id,\r\n      code: \"P-090\",\r\n      statut: \"active\",\r\n      age_plantation: 5,\r\n      superficie_declaree: 2.0,\r\n      superficie_reelle: 2.08,\r\n      latitude: 5.85,\r\n      longitude: -5.35,\r\n      maladie_pourriture_brune: \"Inexistant\",\r\n      maladie_swollen_shoot: \"Inexistant\",\r\n      maladie_parasites: \"Peu\",\r\n      equipement_bottes: true,\r\n      equipement_gants: true,\r\n      equipement_masque: true,\r\n      equipement_lunettes: true,\r\n    },\r\n  });\r\n  console.log(`Created Parcelles: ${parc1.code}, ${parc2.code}`);\r\n\r\n  // 6. Op√©rations\r\n  // Note: Operation n'a pas de code unique dans le seed TS, on utilise un ID fictif ou on laisse l'auto-g√©n√©ration\r\n  // Ici je vais cr√©er sans upsert car pas de contrainte unique simple (sauf ID)\r\n  \r\n  const existingOp = await prisma.operation.findFirst({ where: { id: \"op-1\" } });\r\n  if (!existingOp) {\r\n      await prisma.operation.create({\r\n        data: {\r\n            id: \"op-1\",\r\n            id_producteur: prod1.id,\r\n            id_parcelle: parc1.id,\r\n            id_village: vil1.id,\r\n            statut: \"Pay√©\",\r\n            campagne: \"2024-2025\",\r\n            date_recolte_1: new Date(\"2024-10-01\"),\r\n            date_ecabossage: new Date(\"2024-10-05\"),\r\n            ecabossage_duree: \"6h\",\r\n            cout_ecabossage: 5000,\r\n            fermentation_debut: new Date(\"2024-10-06\"),\r\n            fermentation_fin: new Date(\"2024-10-12\"),\r\n            materiel_feuilles: true,\r\n            sechage_debut: new Date(\"2024-10-13\"),\r\n            sechage_fin: new Date(\"2024-10-20\"),\r\n            aire_claie_bambou: true,\r\n            ensachage_debut: new Date(\"2024-10-21\"),\r\n            nb_sacs_brousse: 15,\r\n            poids_estimatif: 1200,\r\n            date_livraison: new Date(\"2024-10-22\"),\r\n            manutention_pesee: 1180,\r\n            validation_statut: \"Accept√©\",\r\n            paiement_cheque: true,\r\n            montant_cheque: 1180000,\r\n            numero_cheque: \"CHQ-998877\",\r\n            banque: \"NSIA\",\r\n            retenue_mec: true,\r\n            retenue_mec_taux: 10000,\r\n            retenue_epargne: true,\r\n            retenue_epargne_taux: 5000,\r\n        }\r\n      });\r\n      console.log(`Created Operation op-1`);\r\n  }\r\n\r\n  // 7. R√©gions de C√¥te d'Ivoire (31 r√©gions + 2 districts autonomes)\r\n  const regionsCIV = [\r\n    // Districts Autonomes\r\n    { code: \"REG-001\", nom: \"Abidjan\", description: \"District Autonome d'Abidjan\" },\r\n    { code: \"REG-002\", nom: \"Yamoussoukro\", description: \"District Autonome de Yamoussoukro\" },\r\n    \r\n    // R√©gions administratives\r\n    { code: \"REG-003\", nom: \"Agn√©by-Tiassa\", description: \"R√©gion d'Agn√©by-Tiassa\" },\r\n    { code: \"REG-004\", nom: \"Bafing\", description: \"R√©gion du Bafing\" },\r\n    { code: \"REG-005\", nom: \"Bagou√©\", description: \"R√©gion du Bagou√©\" },\r\n    { code: \"REG-006\", nom: \"B√©r√©\", description: \"R√©gion du B√©r√©\" },\r\n    { code: \"REG-007\", nom: \"Bounkani\", description: \"R√©gion du Bounkani\" },\r\n    { code: \"REG-008\", nom: \"Cavally\", description: \"R√©gion du Cavally\" },\r\n    { code: \"REG-009\", nom: \"Folon\", description: \"R√©gion du Folon\" },\r\n    { code: \"REG-010\", nom: \"Gb√™k√™\", description: \"R√©gion du Gb√™k√™\" },\r\n    { code: \"REG-011\", nom: \"Gb√¥kl√©\", description: \"R√©gion du Gb√¥kl√©\" },\r\n    { code: \"REG-012\", nom: \"G√¥h\", description: \"R√©gion du G√¥h\" },\r\n    { code: \"REG-013\", nom: \"Gontougo\", description: \"R√©gion du Gontougo\" },\r\n    { code: \"REG-014\", nom: \"Grands-Ponts\", description: \"R√©gion des Grands-Ponts\" },\r\n    { code: \"REG-015\", nom: \"Gu√©mon\", description: \"R√©gion du Gu√©mon\" },\r\n    { code: \"REG-016\", nom: \"Hambol\", description: \"R√©gion du Hambol\" },\r\n    { code: \"REG-017\", nom: \"Haut-Sassandra\", description: \"R√©gion du Haut-Sassandra\" },\r\n    { code: \"REG-018\", nom: \"Iffou\", description: \"R√©gion de l'Iffou\" },\r\n    { code: \"REG-019\", nom: \"Ind√©ni√©-Djuablin\", description: \"R√©gion de l'Ind√©ni√©-Djuablin\" },\r\n    { code: \"REG-020\", nom: \"Kabadougou\", description: \"R√©gion du Kabadougou\" },\r\n    { code: \"REG-021\", nom: \"La M√©\", description: \"R√©gion de La M√©\" },\r\n    { code: \"REG-022\", nom: \"L√¥h-Djiboua\", description: \"R√©gion du L√¥h-Djiboua\" },\r\n    { code: \"REG-023\", nom: \"Marahou√©\", description: \"R√©gion de la Marahou√©\" },\r\n    { code: \"REG-024\", nom: \"Moronou\", description: \"R√©gion du Moronou\" },\r\n    { code: \"REG-025\", nom: \"Nawa\", description: \"R√©gion du Nawa\" },\r\n    { code: \"REG-026\", nom: \"N'Zi\", description: \"R√©gion du N'Zi\" },\r\n    { code: \"REG-027\", nom: \"Poro\", description: \"R√©gion du Poro\" },\r\n    { code: \"REG-028\", nom: \"San-P√©dro\", description: \"R√©gion de San-P√©dro\" },\r\n    { code: \"REG-029\", nom: \"Sud-Como√©\", description: \"R√©gion du Sud-Como√©\" },\r\n    { code: \"REG-030\", nom: \"Tchologo\", description: \"R√©gion du Tchologo\" },\r\n    { code: \"REG-031\", nom: \"Tonkpi\", description: \"R√©gion du Tonkpi\" },\r\n    { code: \"REG-032\", nom: \"Worodougou\", description: \"R√©gion du Worodougou\" },\r\n    { code: \"REG-033\", nom: \"Moyen-Cavally\", description: \"R√©gion du Moyen-Cavally\" },\r\n  ];\r\n\r\n  for (const regionData of regionsCIV) {\r\n    await prisma.region.upsert({\r\n      where: { code: regionData.code },\r\n      update: {},\r\n      create: regionData\r\n    });\r\n  }\r\n  console.log(`Created ${regionsCIV.length} r√©gions`);\r\n\r\n  // 8. Agents de collecte (exemples)\r\n  const agent1 = await prisma.agent.upsert({\r\n    where: { code: 'AGT-001' },\r\n    update: {},\r\n    create: {\r\n      code: 'AGT-001',\r\n      nom: 'Kouassi',\r\n      prenom: 'Jean',\r\n      telephone: '0701010101',\r\n      email: 'kouassi.jean@asco.ci',\r\n      statut: 'actif',\r\n      nationalite: 'Ivoirienne',\r\n    }\r\n  });\r\n\r\n  const agent2 = await prisma.agent.upsert({\r\n    where: { code: 'AGT-002' },\r\n    update: {},\r\n    create: {\r\n      code: 'AGT-002',\r\n      nom: 'Bamba',\r\n      prenom: 'Fatou',\r\n      telephone: '0702020202',\r\n      email: 'bamba.fatou@asco.ci',\r\n      statut: 'actif',\r\n      nationalite: 'Ivoirienne',\r\n    }\r\n  });\r\n\r\n  // Affecter les agents aux r√©gions\r\n  const regionLohDjiboua = await prisma.region.findUnique({ where: { code: 'REG-022' } });\r\n  const regionNawa = await prisma.region.findUnique({ where: { code: 'REG-025' } });\r\n\r\n  if (regionLohDjiboua && agent1) {\r\n    await prisma.agentRegion.upsert({\r\n      where: {\r\n        id_agent_id_region: {\r\n          id_agent: agent1.id,\r\n          id_region: regionLohDjiboua.id\r\n        }\r\n      },\r\n      update: {},\r\n      create: {\r\n        id_agent: agent1.id,\r\n        id_region: regionLohDjiboua.id,\r\n        statut: 'actif'\r\n      }\r\n    });\r\n  }\r\n\r\n  if (regionNawa && agent2) {\r\n    await prisma.agentRegion.upsert({\r\n      where: {\r\n        id_agent_id_region: {\r\n          id_agent: agent2.id,\r\n          id_region: regionNawa.id\r\n        }\r\n      },\r\n      update: {},\r\n      create: {\r\n        id_agent: agent2.id,\r\n        id_region: regionNawa.id,\r\n        statut: 'actif'\r\n      }\r\n    });\r\n  }\r\n\r\n  console.log('Created Agents and affectations');\r\n\r\n  console.log('Seeding finished.');\r\n}\r\n\r\nmain()\r\n  .then(async () => {\r\n    await prisma.$disconnect();\r\n  })\r\n  .catch(async (e) => {\r\n    console.error(e);\r\n    await prisma.$disconnect();\r\n    process.exit(1);\r\n  });\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\Layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\NavLink.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\OfflineIndicator.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":74,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":74,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2462,2465],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2462,2465],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { \r\n  Wifi, WifiOff, RefreshCw, Download, Upload, \r\n  CheckCircle, XCircle, Clock, Trash2 \r\n} from \"lucide-react\";\r\nimport { offlineService, type PendingOperation } from \"@/services/offlineService\";\r\nimport { toast } from \"sonner\";\r\nimport { api } from \"@/services/api\";\r\n\r\nexport default function OfflineIndicator() {\r\n  const [isOnline, setIsOnline] = useState(navigator.onLine);\r\n  const [pendingCount, setPendingCount] = useState(0);\r\n  const [showDetails, setShowDetails] = useState(false);\r\n  const [pendingOps, setPendingOps] = useState<PendingOperation[]>([]);\r\n  const [isSyncing, setIsSyncing] = useState(false);\r\n  const [lastSync, setLastSync] = useState<Date | null>(null);\r\n\r\n  useEffect(() => {\r\n    // √âcouter les changements de connexion\r\n    const handleOnline = () => {\r\n      setIsOnline(true);\r\n      toast.success(\"Connexion r√©tablie !\");\r\n    };\r\n\r\n    const handleOffline = () => {\r\n      setIsOnline(false);\r\n      toast.warning(\"Mode hors ligne activ√©\");\r\n    };\r\n\r\n    window.addEventListener('online', handleOnline);\r\n    window.addEventListener('offline', handleOffline);\r\n\r\n    // Charger les donn√©es initiales\r\n    updatePendingData();\r\n\r\n    // Rafra√Æchir toutes les 5 secondes\r\n    const interval = setInterval(updatePendingData, 5000);\r\n\r\n    return () => {\r\n      window.removeEventListener('online', handleOnline);\r\n      window.removeEventListener('offline', handleOffline);\r\n      clearInterval(interval);\r\n    };\r\n  }, []);\r\n\r\n  const updatePendingData = () => {\r\n    setPendingCount(offlineService.getPendingCount());\r\n    setPendingOps(offlineService.getUnsyncedOperations());\r\n    setLastSync(offlineService.getLastSync());\r\n  };\r\n\r\n  const handleSync = async () => {\r\n    if (!isOnline) {\r\n      toast.error(\"Impossible de synchroniser : pas de connexion internet\");\r\n      return;\r\n    }\r\n\r\n    setIsSyncing(true);\r\n    try {\r\n      const result = await offlineService.syncAll(api);\r\n      \r\n      if (result.success > 0) {\r\n        toast.success(`${result.success} op√©ration(s) synchronis√©e(s) avec succ√®s`);\r\n      }\r\n      \r\n      if (result.failed > 0) {\r\n        toast.error(`${result.failed} op√©ration(s) √©chou√©e(s)`);\r\n      }\r\n\r\n      updatePendingData();\r\n    } catch (error: any) {\r\n      toast.error(\"Erreur lors de la synchronisation\");\r\n      console.error(error);\r\n    } finally {\r\n      setIsSyncing(false);\r\n    }\r\n  };\r\n\r\n  const handleCleanSynced = () => {\r\n    offlineService.cleanSyncedOperations();\r\n    updatePendingData();\r\n    toast.success(\"Op√©rations synchronis√©es nettoy√©es\");\r\n  };\r\n\r\n  const handleDeleteOperation = (id: string) => {\r\n    if (confirm(\"√ätes-vous s√ªr de vouloir supprimer cette op√©ration ?\")) {\r\n      offlineService.deleteOperation(id);\r\n      updatePendingData();\r\n      toast.success(\"Op√©ration supprim√©e\");\r\n    }\r\n  };\r\n\r\n  const handleExport = () => {\r\n    const data = offlineService.exportPendingData();\r\n    const blob = new Blob([data], { type: 'application/json' });\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    a.download = `cacaotrack_backup_${Date.now()}.json`;\r\n    a.click();\r\n    toast.success(\"Donn√©es export√©es\");\r\n  };\r\n\r\n  const getOperationLabel = (op: PendingOperation) => {\r\n    const typeLabels = {\r\n      operation: 'Op√©ration',\r\n      producteur: 'Producteur',\r\n      parcelle: 'Parcelle',\r\n      agent: 'Agent',\r\n    };\r\n\r\n    const actionLabels = {\r\n      create: 'Cr√©ation',\r\n      update: 'Modification',\r\n      delete: 'Suppression',\r\n    };\r\n\r\n    return `${typeLabels[op.type]} - ${actionLabels[op.action]}`;\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed bottom-4 right-4 z-50\">\r\n      {/* Indicateur compact */}\r\n      <div className=\"flex items-center gap-2\">\r\n        <Badge\r\n          variant={isOnline ? \"default\" : \"destructive\"}\r\n          className=\"cursor-pointer flex items-center gap-2 px-3 py-2\"\r\n          onClick={() => setShowDetails(!showDetails)}\r\n        >\r\n          {isOnline ? (\r\n            <Wifi className=\"h-4 w-4\" />\r\n          ) : (\r\n            <WifiOff className=\"h-4 w-4\" />\r\n          )}\r\n          <span>{isOnline ? \"En ligne\" : \"Hors ligne\"}</span>\r\n          {pendingCount > 0 && (\r\n            <span className=\"ml-2 bg-white text-primary rounded-full px-2 py-0.5 text-xs font-bold\">\r\n              {pendingCount}\r\n            </span>\r\n          )}\r\n        </Badge>\r\n\r\n        {pendingCount > 0 && isOnline && (\r\n          <Button\r\n            size=\"sm\"\r\n            onClick={handleSync}\r\n            disabled={isSyncing}\r\n            className=\"gap-2\"\r\n          >\r\n            {isSyncing ? (\r\n              <RefreshCw className=\"h-4 w-4 animate-spin\" />\r\n            ) : (\r\n              <Upload className=\"h-4 w-4\" />\r\n            )}\r\n            Synchroniser\r\n          </Button>\r\n        )}\r\n      </div>\r\n\r\n      {/* Panneau d√©taill√© */}\r\n      {showDetails && (\r\n        <Card className=\"absolute bottom-16 right-0 w-96 max-h-96 overflow-hidden shadow-lg\">\r\n          <CardHeader className=\"pb-3\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <CardTitle className=\"text-lg\">Synchronisation</CardTitle>\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                onClick={() => setShowDetails(false)}\r\n              >\r\n                ‚úï\r\n              </Button>\r\n            </div>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-4\">\r\n            {/* Statut */}\r\n            <div className=\"flex items-center justify-between text-sm\">\r\n              <span className=\"text-muted-foreground\">Statut :</span>\r\n              <Badge variant={isOnline ? \"default\" : \"destructive\"}>\r\n                {isOnline ? \"En ligne\" : \"Hors ligne\"}\r\n              </Badge>\r\n            </div>\r\n\r\n            {lastSync && (\r\n              <div className=\"flex items-center justify-between text-sm\">\r\n                <span className=\"text-muted-foreground\">Derni√®re sync :</span>\r\n                <span className=\"text-xs\">\r\n                  {lastSync.toLocaleString('fr-FR')}\r\n                </span>\r\n              </div>\r\n            )}\r\n\r\n            {/* Actions */}\r\n            <div className=\"flex gap-2\">\r\n              <Button\r\n                size=\"sm\"\r\n                onClick={handleSync}\r\n                disabled={!isOnline || isSyncing || pendingCount === 0}\r\n                className=\"flex-1 gap-2\"\r\n              >\r\n                {isSyncing ? (\r\n                  <RefreshCw className=\"h-4 w-4 animate-spin\" />\r\n                ) : (\r\n                  <Upload className=\"h-4 w-4\" />\r\n                )}\r\n                Synchroniser\r\n              </Button>\r\n              <Button\r\n                size=\"sm\"\r\n                variant=\"outline\"\r\n                onClick={handleExport}\r\n                disabled={pendingCount === 0}\r\n              >\r\n                <Download className=\"h-4 w-4\" />\r\n              </Button>\r\n              <Button\r\n                size=\"sm\"\r\n                variant=\"outline\"\r\n                onClick={handleCleanSynced}\r\n              >\r\n                <Trash2 className=\"h-4 w-4\" />\r\n              </Button>\r\n            </div>\r\n\r\n            {/* Liste des op√©rations */}\r\n            {pendingOps.length > 0 ? (\r\n              <div className=\"space-y-2 max-h-48 overflow-y-auto\">\r\n                <p className=\"text-sm font-medium\">\r\n                  Op√©rations en attente ({pendingOps.length})\r\n                </p>\r\n                {pendingOps.map((op) => (\r\n                  <div\r\n                    key={op.id}\r\n                    className=\"flex items-start gap-2 p-2 border rounded text-xs\"\r\n                  >\r\n                    <div className=\"flex-1\">\r\n                      <p className=\"font-medium\">{getOperationLabel(op)}</p>\r\n                      <p className=\"text-muted-foreground\">\r\n                        {new Date(op.timestamp).toLocaleString('fr-FR')}\r\n                      </p>\r\n                      {op.error && (\r\n                        <p className=\"text-destructive mt-1\">{op.error}</p>\r\n                      )}\r\n                    </div>\r\n                    <div className=\"flex items-center gap-1\">\r\n                      {op.synced ? (\r\n                        <CheckCircle className=\"h-4 w-4 text-green-500\" />\r\n                      ) : op.error ? (\r\n                        <XCircle className=\"h-4 w-4 text-destructive\" />\r\n                      ) : (\r\n                        <Clock className=\"h-4 w-4 text-orange-500\" />\r\n                      )}\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"sm\"\r\n                        onClick={() => handleDeleteOperation(op.id)}\r\n                        className=\"h-6 w-6 p-0\"\r\n                      >\r\n                        <Trash2 className=\"h-3 w-3\" />\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            ) : (\r\n              <p className=\"text-sm text-muted-foreground text-center py-4\">\r\n                Aucune op√©ration en attente\r\n              </p>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\forms\\DateInput.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\forms\\GPSCapture.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\forms\\MapPicker.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'latitude', 'longitude', and 'onChange'. Either include them or remove the dependency array. If 'onChange' changes too often, find the parent component that defines it and wrap that definition in useCallback.","line":81,"column":6,"nodeType":"ArrayExpression","endLine":81,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [latitude, longitude, onChange]","fix":{"range":[2768,2770],"text":"[latitude, longitude, onChange]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'currentCoords'. Either include it or remove the dependency array.","line":95,"column":6,"nodeType":"ArrayExpression","endLine":95,"endColumn":27,"suggestions":[{"desc":"Update the dependencies array to be: [currentCoords, latitude, longitude]","fix":{"range":[3261,3282],"text":"[currentCoords, latitude, longitude]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useRef, useState } from 'react';\r\nimport mapboxgl from 'mapbox-gl';\r\nimport { MapPin } from 'lucide-react';\r\nimport 'mapbox-gl/dist/mapbox-gl.css';\r\nimport { Card } from '@/components/ui/card';\r\n\r\ninterface MapPickerProps {\r\n  latitude?: number;\r\n  longitude?: number;\r\n  onChange: (coords: { latitude: number; longitude: number }) => void;\r\n  required?: boolean;\r\n}\r\n\r\n// Token Mapbox\r\nmapboxgl.accessToken = 'pk.eyJ1IjoiZHljaG91IiwiYSI6ImNtNHVlbGwyMjBnNmcyanM2aWdzZ2ZqNTgifQ.m231KiKnYcVGc-mj0ax4kw';\r\n\r\n// Centre par d√©faut - C√¥te d'Ivoire (Abidjan)\r\nconst DEFAULT_CENTER: [number, number] = [-4.0083, 5.3600];\r\n\r\nexport default function MapPicker({ latitude, longitude, onChange, required }: MapPickerProps) {\r\n  const mapContainer = useRef<HTMLDivElement>(null);\r\n  const map = useRef<mapboxgl.Map | null>(null);\r\n  const marker = useRef<mapboxgl.Marker | null>(null);\r\n  const [currentCoords, setCurrentCoords] = useState<{ latitude: number; longitude: number } | null>(\r\n    latitude && longitude ? { latitude, longitude } : null\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (!mapContainer.current) return;\r\n    if (map.current) return; // Initialiser la carte seulement une fois\r\n\r\n    map.current = new mapboxgl.Map({\r\n      container: mapContainer.current,\r\n      style: 'mapbox://styles/mapbox/streets-v12',\r\n      center: latitude && longitude ? [longitude, latitude] : DEFAULT_CENTER,\r\n      zoom: latitude && longitude ? 14 : 6,\r\n    });\r\n\r\n    // Ajouter les contr√¥les de navigation\r\n    map.current.addControl(new mapboxgl.NavigationControl(), 'top-right');\r\n    \r\n    // Ajouter le contr√¥le de g√©olocalisation\r\n    const geolocate = new mapboxgl.GeolocateControl({\r\n      positionOptions: {\r\n        enableHighAccuracy: true\r\n      },\r\n      trackUserLocation: true\r\n    });\r\n    map.current.addControl(geolocate, 'top-right');\r\n\r\n    // G√©rer le clic sur la carte\r\n    map.current.on('click', (e) => {\r\n      const { lng, lat } = e.lngLat;\r\n      const newPosition = { latitude: lat, longitude: lng };\r\n      setCurrentCoords(newPosition);\r\n      onChange(newPosition);\r\n\r\n      // Ajouter ou d√©placer le marqueur\r\n      if (marker.current) {\r\n        marker.current.setLngLat([lng, lat]);\r\n      } else {\r\n        marker.current = new mapboxgl.Marker({ color: '#3b82f6' })\r\n          .setLngLat([lng, lat])\r\n          .addTo(map.current!);\r\n      }\r\n    });\r\n\r\n    // Si des coordonn√©es initiales existent, ajouter un marqueur\r\n    if (latitude && longitude) {\r\n      marker.current = new mapboxgl.Marker({ color: '#3b82f6' })\r\n        .setLngLat([longitude, latitude])\r\n        .addTo(map.current);\r\n    }\r\n\r\n    return () => {\r\n      if (map.current) {\r\n        map.current.remove();\r\n        map.current = null;\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  // Mettre √† jour le marqueur quand les props changent\r\n  useEffect(() => {\r\n    if (map.current && latitude && longitude && !currentCoords) {\r\n      if (marker.current) {\r\n        marker.current.setLngLat([longitude, latitude]);\r\n      } else {\r\n        marker.current = new mapboxgl.Marker({ color: '#3b82f6' })\r\n          .setLngLat([longitude, latitude])\r\n          .addTo(map.current);\r\n      }\r\n      map.current.flyTo({ center: [longitude, latitude], zoom: 14 });\r\n    }\r\n  }, [latitude, longitude]);\r\n\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <label className=\"text-sm font-medium text-foreground\">\r\n          S√©lectionner la position sur la carte\r\n          {required && <span className=\"text-destructive ml-1\">*</span>}\r\n        </label>\r\n        {currentCoords && (\r\n          <div className=\"text-xs text-muted-foreground font-mono\">\r\n            {currentCoords.latitude.toFixed(6)}, {currentCoords.longitude.toFixed(6)}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <Card className=\"overflow-hidden\">\r\n        <div ref={mapContainer} className=\"h-[400px] w-full\" />\r\n      </Card>\r\n\r\n      <div className=\"text-xs text-muted-foreground\">\r\n        üí° Cliquez sur la carte pour placer un marqueur ou utilisez le bouton de g√©olocalisation (en haut √† droite)\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\forms\\MultiPhone.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\forms\\PhotoCapture.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\forms\\SliderInput.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\maps\\MapView.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'points'. Either include it or remove the dependency array.","line":73,"column":6,"nodeType":"ArrayExpression","endLine":73,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [points]","fix":{"range":[2280,2282],"text":"[points]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'showPopup'. Either include it or remove the dependency array.","line":142,"column":6,"nodeType":"ArrayExpression","endLine":142,"endColumn":14,"suggestions":[{"desc":"Update the dependencies array to be: [points, showPopup]","fix":{"range":[4368,4376],"text":"[points, showPopup]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useRef, useState } from 'react';\r\nimport mapboxgl from 'mapbox-gl';\r\nimport { Building2, User, Leaf } from 'lucide-react';\r\nimport 'mapbox-gl/dist/mapbox-gl.css';\r\nimport { Card } from '@/components/ui/card';\r\nimport { Badge } from '@/components/ui/badge';\r\n\r\ninterface MapPoint {\r\n  id: string;\r\n  latitude: number;\r\n  longitude: number;\r\n  type: 'organisation' | 'producteur' | 'parcelle' | 'village';\r\n  nom: string;\r\n  details?: string;\r\n  produit?: 'cacao' | 'tomate' | 'hevea' | 'autre';\r\n}\r\n\r\ninterface MapViewProps {\r\n  points: MapPoint[];\r\n  height?: string;\r\n  showLegend?: boolean;\r\n}\r\n\r\nmapboxgl.accessToken = 'pk.eyJ1IjoiZHljaG91IiwiYSI6ImNtNHVlbGwyMjBnNmcyanM2aWdzZ2ZqNTgifQ.m231KiKnYcVGc-mj0ax4kw';\r\n\r\n// Couleurs par type\r\nconst TYPE_COLORS = {\r\n  organisation: '#3b82f6', // Bleu\r\n  producteur: '#10b981', // Vert\r\n  parcelle: '#f59e0b', // Orange\r\n  village: '#8b5cf6', // Violet\r\n};\r\n\r\n// Couleurs par produit\r\nconst PRODUCT_COLORS = {\r\n  cacao: '#7c2d12', // Marron\r\n  tomate: '#dc2626', // Rouge\r\n  hevea: '#15803d', // Vert fonc√©\r\n  autre: '#6b7280', // Gris\r\n};\r\n\r\nexport default function MapView({ points, height = '500px', showLegend = true }: MapViewProps) {\r\n  const mapContainer = useRef<HTMLDivElement>(null);\r\n  const map = useRef<mapboxgl.Map | null>(null);\r\n  const markers = useRef<mapboxgl.Marker[]>([]);\r\n  const popup = useRef<mapboxgl.Popup | null>(null);\r\n  const [selectedPoint, setSelectedPoint] = useState<MapPoint | null>(null);\r\n\r\n  // Initialiser la carte\r\n  useEffect(() => {\r\n    if (!mapContainer.current) return;\r\n    if (map.current) return;\r\n\r\n    const center: [number, number] = points.length > 0 \r\n      ? [points[0].longitude, points[0].latitude]\r\n      : [-4.0083, 5.3600];\r\n\r\n    map.current = new mapboxgl.Map({\r\n      container: mapContainer.current,\r\n      style: 'mapbox://styles/mapbox/streets-v12',\r\n      center,\r\n      zoom: points.length === 1 ? 14 : 6,\r\n    });\r\n\r\n    map.current.addControl(new mapboxgl.NavigationControl(), 'top-right');\r\n    map.current.addControl(new mapboxgl.ScaleControl(), 'bottom-left');\r\n\r\n    return () => {\r\n      markers.current.forEach(m => m.remove());\r\n      if (popup.current) popup.current.remove();\r\n      if (map.current) map.current.remove();\r\n    };\r\n  }, []);\r\n\r\n  // Mettre √† jour les marqueurs quand les points changent\r\n  useEffect(() => {\r\n    if (!map.current) return;\r\n\r\n    // Supprimer les anciens marqueurs\r\n    markers.current.forEach(m => m.remove());\r\n    markers.current = [];\r\n\r\n    if (points.length === 0) return;\r\n\r\n    // Ajouter les nouveaux marqueurs\r\n    points.forEach((point) => {\r\n      const el = document.createElement('div');\r\n      el.className = 'custom-marker';\r\n      el.style.cursor = 'pointer';\r\n      el.style.width = '32px';\r\n      el.style.height = '32px';\r\n      \r\n      const color = getMarkerColor(point);\r\n      el.innerHTML = `\r\n        <div style=\"position: relative;\">\r\n          <div style=\"\r\n            position: absolute;\r\n            width: 32px;\r\n            height: 32px;\r\n            background-color: ${color};\r\n            border-radius: 50%;\r\n            opacity: 0.2;\r\n            animation: ping 2s cubic-bezier(0, 0, 0.2, 1) infinite;\r\n          \"></div>\r\n          <div style=\"\r\n            position: relative;\r\n            background-color: white;\r\n            border-radius: 50%;\r\n            padding: 6px;\r\n            box-shadow: 0 4px 6px rgba(0,0,0,0.1);\r\n            border: 2px solid ${color};\r\n            color: ${color};\r\n          \">\r\n            ${getMarkerSvg(point.type)}\r\n          </div>\r\n        </div>\r\n      `;\r\n\r\n      el.addEventListener('click', () => {\r\n        setSelectedPoint(point);\r\n        showPopup(point);\r\n      });\r\n\r\n      const marker = new mapboxgl.Marker({ element: el })\r\n        .setLngLat([point.longitude, point.latitude])\r\n        .addTo(map.current!);\r\n\r\n      markers.current.push(marker);\r\n    });\r\n\r\n    // Ajuster la vue pour inclure tous les points\r\n    if (points.length > 1) {\r\n      const bounds = new mapboxgl.LngLatBounds();\r\n      points.forEach(p => bounds.extend([p.longitude, p.latitude]));\r\n      map.current.fitBounds(bounds, { padding: 50, maxZoom: 14 });\r\n    } else if (points.length === 1) {\r\n      map.current.flyTo({\r\n        center: [points[0].longitude, points[0].latitude],\r\n        zoom: 14\r\n      });\r\n    }\r\n  }, [points]);\r\n\r\n  const getMarkerColor = (point: MapPoint) => {\r\n    if (point.produit) {\r\n      return PRODUCT_COLORS[point.produit];\r\n    }\r\n    return TYPE_COLORS[point.type];\r\n  };\r\n\r\n  const getMarkerSvg = (type: string) => {\r\n    const icons: Record<string, string> = {\r\n      organisation: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><rect width=\"16\" height=\"20\" x=\"4\" y=\"2\" rx=\"2\" ry=\"2\"/><path d=\"M9 22v-4h6v4\"/><path d=\"M8 6h.01\"/><path d=\"M16 6h.01\"/><path d=\"M12 6h.01\"/><path d=\"M12 10h.01\"/><path d=\"M12 14h.01\"/><path d=\"M16 10h.01\"/><path d=\"M16 14h.01\"/><path d=\"M8 10h.01\"/><path d=\"M8 14h.01\"/></svg>',\r\n      producteur: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2\"/><circle cx=\"12\" cy=\"7\" r=\"4\"/></svg>',\r\n      parcelle: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z\"/><path d=\"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12\"/></svg>',\r\n      village: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z\"/><path d=\"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12\"/></svg>',\r\n    };\r\n    return icons[type] || icons.organisation;\r\n  };\r\n\r\n  const showPopup = (point: MapPoint) => {\r\n    if (!map.current) return;\r\n\r\n    if (popup.current) popup.current.remove();\r\n\r\n    const color = getMarkerColor(point);\r\n    const popupContent = `\r\n      <div style=\"min-width: 200px; padding: 8px;\">\r\n        <div style=\"display: flex; gap: 8px; margin-bottom: 8px;\">\r\n          <div style=\"color: ${color};\">${getMarkerSvg(point.type)}</div>\r\n          <div style=\"flex: 1;\">\r\n            <h3 style=\"font-weight: 600; font-size: 14px; margin: 0;\">${point.nom}</h3>\r\n            <span style=\"display: inline-block; margin-top: 4px; padding: 2px 8px; border: 1px solid #e5e7eb; border-radius: 4px; font-size: 11px;\">\r\n              ${point.type}\r\n            </span>\r\n          </div>\r\n        </div>\r\n        ${point.produit ? `\r\n          <div style=\"margin-bottom: 8px;\">\r\n            <span style=\"display: inline-block; padding: 2px 8px; background-color: ${PRODUCT_COLORS[point.produit]}; color: white; border-radius: 4px; font-size: 11px;\">\r\n              ${point.produit}\r\n            </span>\r\n          </div>\r\n        ` : ''}\r\n        ${point.details ? `<p style=\"font-size: 12px; color: #6b7280; margin: 8px 0;\">${point.details}</p>` : ''}\r\n        <div style=\"font-size: 11px; color: #9ca3af; font-family: monospace; margin-top: 8px;\">\r\n          ${point.latitude.toFixed(6)}, ${point.longitude.toFixed(6)}\r\n        </div>\r\n      </div>\r\n    `;\r\n\r\n    popup.current = new mapboxgl.Popup({ offset: 25 })\r\n      .setLngLat([point.longitude, point.latitude])\r\n      .setHTML(popupContent)\r\n      .addTo(map.current);\r\n\r\n    popup.current.on('close', () => setSelectedPoint(null));\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <Card className=\"overflow-hidden\">\r\n        <div ref={mapContainer} style={{ height, width: '100%' }} />\r\n      </Card>\r\n\r\n      {showLegend && (\r\n        <Card className=\"p-4\">\r\n          <div className=\"space-y-3\">\r\n            <h3 className=\"text-sm font-semibold\">L√©gende</h3>\r\n            \r\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\r\n              <div className=\"text-xs\">\r\n                <p className=\"text-muted-foreground mb-2\">Par type</p>\r\n                <div className=\"space-y-1\">\r\n                  {Object.entries(TYPE_COLORS).map(([type, color]) => (\r\n                    <div key={type} className=\"flex items-center gap-2\">\r\n                      <div className=\"w-3 h-3 rounded-full\" style={{ backgroundColor: color }} />\r\n                      <span className=\"capitalize\">{type}</span>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"text-xs\">\r\n                <p className=\"text-muted-foreground mb-2\">Par produit</p>\r\n                <div className=\"space-y-1\">\r\n                  {Object.entries(PRODUCT_COLORS).map(([produit, color]) => (\r\n                    <div key={produit} className=\"flex items-center gap-2\">\r\n                      <div className=\"w-3 h-3 rounded-full\" style={{ backgroundColor: color }} />\r\n                      <span className=\"capitalize\">{produit}</span>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"text-xs text-muted-foreground pt-2 border-t\">\r\n              Total: {points.length} point{points.length > 1 ? 's' : ''}\r\n            </div>\r\n          </div>\r\n        </Card>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\ui\\accordion.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\ui\\alert-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\ui\\alert.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\ui\\aspect-ratio.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\ui\\avatar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\ui\\badge.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":29,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":29,"endColumn":30}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\r\nimport { cva, type VariantProps } from \"class-variance-authority\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst badgeVariants = cva(\r\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\r\n        secondary: \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        destructive: \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\r\n        outline: \"text-foreground\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  },\r\n);\r\n\r\nexport interface BadgeProps extends React.HTMLAttributes<HTMLDivElement>, VariantProps<typeof badgeVariants> {}\r\n\r\nfunction Badge({ className, variant, ...props }: BadgeProps) {\r\n  return <div className={cn(badgeVariants({ variant }), className)} {...props} />;\r\n}\r\n\r\nexport { Badge, badgeVariants };\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\ui\\breadcrumb.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\ui\\button.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":47,"column":18,"nodeType":"Identifier","messageId":"namedExport","endLine":47,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\r\nimport { Slot } from \"@radix-ui/react-slot\";\r\nimport { cva, type VariantProps } from \"class-variance-authority\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\r\n        destructive: \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\r\n        outline: \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\r\n        secondary: \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\r\n        link: \"text-primary underline-offset-4 hover:underline\",\r\n      },\r\n      size: {\r\n        default: \"h-10 px-4 py-2\",\r\n        sm: \"h-9 rounded-md px-3\",\r\n        lg: \"h-11 rounded-md px-8\",\r\n        icon: \"h-10 w-10\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  },\r\n);\r\n\r\nexport interface ButtonProps\r\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\r\n    VariantProps<typeof buttonVariants> {\r\n  asChild?: boolean;\r\n}\r\n\r\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\r\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\r\n    const Comp = asChild ? Slot : \"button\";\r\n    return <Comp className={cn(buttonVariants({ variant, size, className }))} ref={ref} {...props} />;\r\n  },\r\n);\r\nButton.displayName = \"Button\";\r\n\r\nexport { Button, buttonVariants };\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\ui\\calendar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\ui\\card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\ui\\carousel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\ui\\chart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\ui\\checkbox.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\ui\\collapsible.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\ui\\command.tsx","messages":[{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"An interface declaring no members is equivalent to its supertype.","line":24,"column":11,"nodeType":"Identifier","messageId":"noEmptyInterfaceWithSuper","endLine":24,"endColumn":29,"suggestions":[{"messageId":"replaceEmptyInterfaceWithSuper","fix":{"range":[733,784],"text":"type CommandDialogProps = DialogProps"},"desc":"Replace empty interface with a type alias."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\r\nimport { type DialogProps } from \"@radix-ui/react-dialog\";\r\nimport { Command as CommandPrimitive } from \"cmdk\";\r\nimport { Search } from \"lucide-react\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\";\r\n\r\nconst Command = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\r\n>(({ className, ...props }, ref) => (\r\n  <CommandPrimitive\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\r\n      className,\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\nCommand.displayName = CommandPrimitive.displayName;\r\n\r\ninterface CommandDialogProps extends DialogProps {}\r\n\r\nconst CommandDialog = ({ children, ...props }: CommandDialogProps) => {\r\n  return (\r\n    <Dialog {...props}>\r\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\r\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\r\n          {children}\r\n        </Command>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nconst CommandInput = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive.Input>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\r\n>(({ className, ...props }, ref) => (\r\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\r\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\r\n    <CommandPrimitive.Input\r\n      ref={ref}\r\n      className={cn(\r\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  </div>\r\n));\r\n\r\nCommandInput.displayName = CommandPrimitive.Input.displayName;\r\n\r\nconst CommandList = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive.List>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\r\n>(({ className, ...props }, ref) => (\r\n  <CommandPrimitive.List\r\n    ref={ref}\r\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\r\n    {...props}\r\n  />\r\n));\r\n\r\nCommandList.displayName = CommandPrimitive.List.displayName;\r\n\r\nconst CommandEmpty = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive.Empty>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\r\n>((props, ref) => <CommandPrimitive.Empty ref={ref} className=\"py-6 text-center text-sm\" {...props} />);\r\n\r\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName;\r\n\r\nconst CommandGroup = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive.Group>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\r\n>(({ className, ...props }, ref) => (\r\n  <CommandPrimitive.Group\r\n    ref={ref}\r\n    className={cn(\r\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\r\n      className,\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\n\r\nCommandGroup.displayName = CommandPrimitive.Group.displayName;\r\n\r\nconst CommandSeparator = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive.Separator>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\r\n>(({ className, ...props }, ref) => (\r\n  <CommandPrimitive.Separator ref={ref} className={cn(\"-mx-1 h-px bg-border\", className)} {...props} />\r\n));\r\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName;\r\n\r\nconst CommandItem = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\r\n>(({ className, ...props }, ref) => (\r\n  <CommandPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50\",\r\n      className,\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\n\r\nCommandItem.displayName = CommandPrimitive.Item.displayName;\r\n\r\nconst CommandShortcut = ({ className, ...props }: React.HTMLAttributes<HTMLSpanElement>) => {\r\n  return <span className={cn(\"ml-auto text-xs tracking-widest text-muted-foreground\", className)} {...props} />;\r\n};\r\nCommandShortcut.displayName = \"CommandShortcut\";\r\n\r\nexport {\r\n  Command,\r\n  CommandDialog,\r\n  CommandInput,\r\n  CommandList,\r\n  CommandEmpty,\r\n  CommandGroup,\r\n  CommandItem,\r\n  CommandShortcut,\r\n  CommandSeparator,\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\ui\\context-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\ui\\dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\ui\\drawer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\ui\\dropdown-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\ui\\form.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":129,"column":10,"nodeType":"Identifier","messageId":"namedExport","endLine":129,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\r\nimport * as LabelPrimitive from \"@radix-ui/react-label\";\r\nimport { Slot } from \"@radix-ui/react-slot\";\r\nimport { Controller, ControllerProps, FieldPath, FieldValues, FormProvider, useFormContext } from \"react-hook-form\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Label } from \"@/components/ui/label\";\r\n\r\nconst Form = FormProvider;\r\n\r\ntype FormFieldContextValue<\r\n  TFieldValues extends FieldValues = FieldValues,\r\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\r\n> = {\r\n  name: TName;\r\n};\r\n\r\nconst FormFieldContext = React.createContext<FormFieldContextValue>({} as FormFieldContextValue);\r\n\r\nconst FormField = <\r\n  TFieldValues extends FieldValues = FieldValues,\r\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\r\n>({\r\n  ...props\r\n}: ControllerProps<TFieldValues, TName>) => {\r\n  return (\r\n    <FormFieldContext.Provider value={{ name: props.name }}>\r\n      <Controller {...props} />\r\n    </FormFieldContext.Provider>\r\n  );\r\n};\r\n\r\nconst useFormField = () => {\r\n  const fieldContext = React.useContext(FormFieldContext);\r\n  const itemContext = React.useContext(FormItemContext);\r\n  const { getFieldState, formState } = useFormContext();\r\n\r\n  const fieldState = getFieldState(fieldContext.name, formState);\r\n\r\n  if (!fieldContext) {\r\n    throw new Error(\"useFormField should be used within <FormField>\");\r\n  }\r\n\r\n  const { id } = itemContext;\r\n\r\n  return {\r\n    id,\r\n    name: fieldContext.name,\r\n    formItemId: `${id}-form-item`,\r\n    formDescriptionId: `${id}-form-item-description`,\r\n    formMessageId: `${id}-form-item-message`,\r\n    ...fieldState,\r\n  };\r\n};\r\n\r\ntype FormItemContextValue = {\r\n  id: string;\r\n};\r\n\r\nconst FormItemContext = React.createContext<FormItemContextValue>({} as FormItemContextValue);\r\n\r\nconst FormItem = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\r\n  ({ className, ...props }, ref) => {\r\n    const id = React.useId();\r\n\r\n    return (\r\n      <FormItemContext.Provider value={{ id }}>\r\n        <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\r\n      </FormItemContext.Provider>\r\n    );\r\n  },\r\n);\r\nFormItem.displayName = \"FormItem\";\r\n\r\nconst FormLabel = React.forwardRef<\r\n  React.ElementRef<typeof LabelPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\r\n>(({ className, ...props }, ref) => {\r\n  const { error, formItemId } = useFormField();\r\n\r\n  return <Label ref={ref} className={cn(error && \"text-destructive\", className)} htmlFor={formItemId} {...props} />;\r\n});\r\nFormLabel.displayName = \"FormLabel\";\r\n\r\nconst FormControl = React.forwardRef<React.ElementRef<typeof Slot>, React.ComponentPropsWithoutRef<typeof Slot>>(\r\n  ({ ...props }, ref) => {\r\n    const { error, formItemId, formDescriptionId, formMessageId } = useFormField();\r\n\r\n    return (\r\n      <Slot\r\n        ref={ref}\r\n        id={formItemId}\r\n        aria-describedby={!error ? `${formDescriptionId}` : `${formDescriptionId} ${formMessageId}`}\r\n        aria-invalid={!!error}\r\n        {...props}\r\n      />\r\n    );\r\n  },\r\n);\r\nFormControl.displayName = \"FormControl\";\r\n\r\nconst FormDescription = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLParagraphElement>>(\r\n  ({ className, ...props }, ref) => {\r\n    const { formDescriptionId } = useFormField();\r\n\r\n    return <p ref={ref} id={formDescriptionId} className={cn(\"text-sm text-muted-foreground\", className)} {...props} />;\r\n  },\r\n);\r\nFormDescription.displayName = \"FormDescription\";\r\n\r\nconst FormMessage = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLParagraphElement>>(\r\n  ({ className, children, ...props }, ref) => {\r\n    const { error, formMessageId } = useFormField();\r\n    const body = error ? String(error?.message) : children;\r\n\r\n    if (!body) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <p ref={ref} id={formMessageId} className={cn(\"text-sm font-medium text-destructive\", className)} {...props}>\r\n        {body}\r\n      </p>\r\n    );\r\n  },\r\n);\r\nFormMessage.displayName = \"FormMessage\";\r\n\r\nexport { useFormField, Form, FormItem, FormLabel, FormControl, FormDescription, FormMessage, FormField };\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\ui\\hover-card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\ui\\input-otp.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\ui\\input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\ui\\label.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\ui\\menubar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\ui\\navigation-menu.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":111,"column":3,"nodeType":"Identifier","messageId":"namedExport","endLine":111,"endColumn":29}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\r\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\";\r\nimport { cva } from \"class-variance-authority\";\r\nimport { ChevronDown } from \"lucide-react\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst NavigationMenu = React.forwardRef<\r\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\r\n>(({ className, children, ...props }, ref) => (\r\n  <NavigationMenuPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\"relative z-10 flex max-w-max flex-1 items-center justify-center\", className)}\r\n    {...props}\r\n  >\r\n    {children}\r\n    <NavigationMenuViewport />\r\n  </NavigationMenuPrimitive.Root>\r\n));\r\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName;\r\n\r\nconst NavigationMenuList = React.forwardRef<\r\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\r\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\r\n>(({ className, ...props }, ref) => (\r\n  <NavigationMenuPrimitive.List\r\n    ref={ref}\r\n    className={cn(\"group flex flex-1 list-none items-center justify-center space-x-1\", className)}\r\n    {...props}\r\n  />\r\n));\r\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName;\r\n\r\nconst NavigationMenuItem = NavigationMenuPrimitive.Item;\r\n\r\nconst navigationMenuTriggerStyle = cva(\r\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[active]:bg-accent/50 data-[state=open]:bg-accent/50\",\r\n);\r\n\r\nconst NavigationMenuTrigger = React.forwardRef<\r\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\r\n>(({ className, children, ...props }, ref) => (\r\n  <NavigationMenuPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\r\n    {...props}\r\n  >\r\n    {children}{\" \"}\r\n    <ChevronDown\r\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\r\n      aria-hidden=\"true\"\r\n    />\r\n  </NavigationMenuPrimitive.Trigger>\r\n));\r\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName;\r\n\r\nconst NavigationMenuContent = React.forwardRef<\r\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\r\n>(({ className, ...props }, ref) => (\r\n  <NavigationMenuPrimitive.Content\r\n    ref={ref}\r\n    className={cn(\r\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto\",\r\n      className,\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName;\r\n\r\nconst NavigationMenuLink = NavigationMenuPrimitive.Link;\r\n\r\nconst NavigationMenuViewport = React.forwardRef<\r\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\r\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\r\n>(({ className, ...props }, ref) => (\r\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\r\n    <NavigationMenuPrimitive.Viewport\r\n      className={cn(\r\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\r\n        className,\r\n      )}\r\n      ref={ref}\r\n      {...props}\r\n    />\r\n  </div>\r\n));\r\nNavigationMenuViewport.displayName = NavigationMenuPrimitive.Viewport.displayName;\r\n\r\nconst NavigationMenuIndicator = React.forwardRef<\r\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\r\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\r\n>(({ className, ...props }, ref) => (\r\n  <NavigationMenuPrimitive.Indicator\r\n    ref={ref}\r\n    className={cn(\r\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\r\n      className,\r\n    )}\r\n    {...props}\r\n  >\r\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\r\n  </NavigationMenuPrimitive.Indicator>\r\n));\r\nNavigationMenuIndicator.displayName = NavigationMenuPrimitive.Indicator.displayName;\r\n\r\nexport {\r\n  navigationMenuTriggerStyle,\r\n  NavigationMenu,\r\n  NavigationMenuList,\r\n  NavigationMenuItem,\r\n  NavigationMenuContent,\r\n  NavigationMenuTrigger,\r\n  NavigationMenuLink,\r\n  NavigationMenuIndicator,\r\n  NavigationMenuViewport,\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\ui\\pagination.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\ui\\popover.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\ui\\progress.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\ui\\radio-group.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\ui\\resizable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\ui\\scroll-area.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\ui\\select.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\ui\\separator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\ui\\sheet.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\ui\\sidebar.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":636,"column":3,"nodeType":"Identifier","messageId":"namedExport","endLine":636,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\r\nimport { Slot } from \"@radix-ui/react-slot\";\r\nimport { VariantProps, cva } from \"class-variance-authority\";\r\nimport { PanelLeft } from \"lucide-react\";\r\n\r\nimport { useIsMobile } from \"@/hooks/use-mobile\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport { Sheet, SheetContent } from \"@/components/ui/sheet\";\r\nimport { Skeleton } from \"@/components/ui/skeleton\";\r\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@/components/ui/tooltip\";\r\n\r\nconst SIDEBAR_COOKIE_NAME = \"sidebar:state\";\r\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7;\r\nconst SIDEBAR_WIDTH = \"16rem\";\r\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\";\r\nconst SIDEBAR_WIDTH_ICON = \"3rem\";\r\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\";\r\n\r\ntype SidebarContext = {\r\n  state: \"expanded\" | \"collapsed\";\r\n  open: boolean;\r\n  setOpen: (open: boolean) => void;\r\n  openMobile: boolean;\r\n  setOpenMobile: (open: boolean) => void;\r\n  isMobile: boolean;\r\n  toggleSidebar: () => void;\r\n};\r\n\r\nconst SidebarContext = React.createContext<SidebarContext | null>(null);\r\n\r\nfunction useSidebar() {\r\n  const context = React.useContext(SidebarContext);\r\n  if (!context) {\r\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\");\r\n  }\r\n\r\n  return context;\r\n}\r\n\r\nconst SidebarProvider = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.ComponentProps<\"div\"> & {\r\n    defaultOpen?: boolean;\r\n    open?: boolean;\r\n    onOpenChange?: (open: boolean) => void;\r\n  }\r\n>(({ defaultOpen = true, open: openProp, onOpenChange: setOpenProp, className, style, children, ...props }, ref) => {\r\n  const isMobile = useIsMobile();\r\n  const [openMobile, setOpenMobile] = React.useState(false);\r\n\r\n  // This is the internal state of the sidebar.\r\n  // We use openProp and setOpenProp for control from outside the component.\r\n  const [_open, _setOpen] = React.useState(defaultOpen);\r\n  const open = openProp ?? _open;\r\n  const setOpen = React.useCallback(\r\n    (value: boolean | ((value: boolean) => boolean)) => {\r\n      const openState = typeof value === \"function\" ? value(open) : value;\r\n      if (setOpenProp) {\r\n        setOpenProp(openState);\r\n      } else {\r\n        _setOpen(openState);\r\n      }\r\n\r\n      // This sets the cookie to keep the sidebar state.\r\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`;\r\n    },\r\n    [setOpenProp, open],\r\n  );\r\n\r\n  // Helper to toggle the sidebar.\r\n  const toggleSidebar = React.useCallback(() => {\r\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open);\r\n  }, [isMobile, setOpen, setOpenMobile]);\r\n\r\n  // Adds a keyboard shortcut to toggle the sidebar.\r\n  React.useEffect(() => {\r\n    const handleKeyDown = (event: KeyboardEvent) => {\r\n      if (event.key === SIDEBAR_KEYBOARD_SHORTCUT && (event.metaKey || event.ctrlKey)) {\r\n        event.preventDefault();\r\n        toggleSidebar();\r\n      }\r\n    };\r\n\r\n    window.addEventListener(\"keydown\", handleKeyDown);\r\n    return () => window.removeEventListener(\"keydown\", handleKeyDown);\r\n  }, [toggleSidebar]);\r\n\r\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\r\n  // This makes it easier to style the sidebar with Tailwind classes.\r\n  const state = open ? \"expanded\" : \"collapsed\";\r\n\r\n  const contextValue = React.useMemo<SidebarContext>(\r\n    () => ({\r\n      state,\r\n      open,\r\n      setOpen,\r\n      isMobile,\r\n      openMobile,\r\n      setOpenMobile,\r\n      toggleSidebar,\r\n    }),\r\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar],\r\n  );\r\n\r\n  return (\r\n    <SidebarContext.Provider value={contextValue}>\r\n      <TooltipProvider delayDuration={0}>\r\n        <div\r\n          style={\r\n            {\r\n              \"--sidebar-width\": SIDEBAR_WIDTH,\r\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\r\n              ...style,\r\n            } as React.CSSProperties\r\n          }\r\n          className={cn(\"group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar\", className)}\r\n          ref={ref}\r\n          {...props}\r\n        >\r\n          {children}\r\n        </div>\r\n      </TooltipProvider>\r\n    </SidebarContext.Provider>\r\n  );\r\n});\r\nSidebarProvider.displayName = \"SidebarProvider\";\r\n\r\nconst Sidebar = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.ComponentProps<\"div\"> & {\r\n    side?: \"left\" | \"right\";\r\n    variant?: \"sidebar\" | \"floating\" | \"inset\";\r\n    collapsible?: \"offcanvas\" | \"icon\" | \"none\";\r\n  }\r\n>(({ side = \"left\", variant = \"sidebar\", collapsible = \"offcanvas\", className, children, ...props }, ref) => {\r\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar();\r\n\r\n  if (collapsible === \"none\") {\r\n    return (\r\n      <div\r\n        className={cn(\"flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground\", className)}\r\n        ref={ref}\r\n        {...props}\r\n      >\r\n        {children}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (isMobile) {\r\n    return (\r\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\r\n        <SheetContent\r\n          data-sidebar=\"sidebar\"\r\n          data-mobile=\"true\"\r\n          className=\"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden\"\r\n          style={\r\n            {\r\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\r\n            } as React.CSSProperties\r\n          }\r\n          side={side}\r\n        >\r\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\r\n        </SheetContent>\r\n      </Sheet>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div\r\n      ref={ref}\r\n      className=\"group peer hidden text-sidebar-foreground md:block\"\r\n      data-state={state}\r\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\r\n      data-variant={variant}\r\n      data-side={side}\r\n    >\r\n      {/* This is what handles the sidebar gap on desktop */}\r\n      <div\r\n        className={cn(\r\n          \"relative h-svh w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear\",\r\n          \"group-data-[collapsible=offcanvas]:w-0\",\r\n          \"group-data-[side=right]:rotate-180\",\r\n          variant === \"floating\" || variant === \"inset\"\r\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]\"\r\n            : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon]\",\r\n        )}\r\n      />\r\n      <div\r\n        className={cn(\r\n          \"fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex\",\r\n          side === \"left\"\r\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\r\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\r\n          // Adjust the padding for floating and inset variants.\r\n          variant === \"floating\" || variant === \"inset\"\r\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]\"\r\n            : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\r\n          className,\r\n        )}\r\n        {...props}\r\n      >\r\n        <div\r\n          data-sidebar=\"sidebar\"\r\n          className=\"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow\"\r\n        >\r\n          {children}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\nSidebar.displayName = \"Sidebar\";\r\n\r\nconst SidebarTrigger = React.forwardRef<React.ElementRef<typeof Button>, React.ComponentProps<typeof Button>>(\r\n  ({ className, onClick, ...props }, ref) => {\r\n    const { toggleSidebar } = useSidebar();\r\n\r\n    return (\r\n      <Button\r\n        ref={ref}\r\n        data-sidebar=\"trigger\"\r\n        variant=\"ghost\"\r\n        size=\"icon\"\r\n        className={cn(\"h-7 w-7\", className)}\r\n        onClick={(event) => {\r\n          onClick?.(event);\r\n          toggleSidebar();\r\n        }}\r\n        {...props}\r\n      >\r\n        <PanelLeft />\r\n        <span className=\"sr-only\">Toggle Sidebar</span>\r\n      </Button>\r\n    );\r\n  },\r\n);\r\nSidebarTrigger.displayName = \"SidebarTrigger\";\r\n\r\nconst SidebarRail = React.forwardRef<HTMLButtonElement, React.ComponentProps<\"button\">>(\r\n  ({ className, ...props }, ref) => {\r\n    const { toggleSidebar } = useSidebar();\r\n\r\n    return (\r\n      <button\r\n        ref={ref}\r\n        data-sidebar=\"rail\"\r\n        aria-label=\"Toggle Sidebar\"\r\n        tabIndex={-1}\r\n        onClick={toggleSidebar}\r\n        title=\"Toggle Sidebar\"\r\n        className={cn(\r\n          \"absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] group-data-[side=left]:-right-4 group-data-[side=right]:left-0 hover:after:bg-sidebar-border sm:flex\",\r\n          \"[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize\",\r\n          \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\r\n          \"group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar\",\r\n          \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\r\n          \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\r\n          className,\r\n        )}\r\n        {...props}\r\n      />\r\n    );\r\n  },\r\n);\r\nSidebarRail.displayName = \"SidebarRail\";\r\n\r\nconst SidebarInset = React.forwardRef<HTMLDivElement, React.ComponentProps<\"main\">>(({ className, ...props }, ref) => {\r\n  return (\r\n    <main\r\n      ref={ref}\r\n      className={cn(\r\n        \"relative flex min-h-svh flex-1 flex-col bg-background\",\r\n        \"peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  );\r\n});\r\nSidebarInset.displayName = \"SidebarInset\";\r\n\r\nconst SidebarInput = React.forwardRef<React.ElementRef<typeof Input>, React.ComponentProps<typeof Input>>(\r\n  ({ className, ...props }, ref) => {\r\n    return (\r\n      <Input\r\n        ref={ref}\r\n        data-sidebar=\"input\"\r\n        className={cn(\r\n          \"h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring\",\r\n          className,\r\n        )}\r\n        {...props}\r\n      />\r\n    );\r\n  },\r\n);\r\nSidebarInput.displayName = \"SidebarInput\";\r\n\r\nconst SidebarHeader = React.forwardRef<HTMLDivElement, React.ComponentProps<\"div\">>(({ className, ...props }, ref) => {\r\n  return <div ref={ref} data-sidebar=\"header\" className={cn(\"flex flex-col gap-2 p-2\", className)} {...props} />;\r\n});\r\nSidebarHeader.displayName = \"SidebarHeader\";\r\n\r\nconst SidebarFooter = React.forwardRef<HTMLDivElement, React.ComponentProps<\"div\">>(({ className, ...props }, ref) => {\r\n  return <div ref={ref} data-sidebar=\"footer\" className={cn(\"flex flex-col gap-2 p-2\", className)} {...props} />;\r\n});\r\nSidebarFooter.displayName = \"SidebarFooter\";\r\n\r\nconst SidebarSeparator = React.forwardRef<React.ElementRef<typeof Separator>, React.ComponentProps<typeof Separator>>(\r\n  ({ className, ...props }, ref) => {\r\n    return (\r\n      <Separator\r\n        ref={ref}\r\n        data-sidebar=\"separator\"\r\n        className={cn(\"mx-2 w-auto bg-sidebar-border\", className)}\r\n        {...props}\r\n      />\r\n    );\r\n  },\r\n);\r\nSidebarSeparator.displayName = \"SidebarSeparator\";\r\n\r\nconst SidebarContent = React.forwardRef<HTMLDivElement, React.ComponentProps<\"div\">>(({ className, ...props }, ref) => {\r\n  return (\r\n    <div\r\n      ref={ref}\r\n      data-sidebar=\"content\"\r\n      className={cn(\r\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  );\r\n});\r\nSidebarContent.displayName = \"SidebarContent\";\r\n\r\nconst SidebarGroup = React.forwardRef<HTMLDivElement, React.ComponentProps<\"div\">>(({ className, ...props }, ref) => {\r\n  return (\r\n    <div\r\n      ref={ref}\r\n      data-sidebar=\"group\"\r\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\r\n      {...props}\r\n    />\r\n  );\r\n});\r\nSidebarGroup.displayName = \"SidebarGroup\";\r\n\r\nconst SidebarGroupLabel = React.forwardRef<HTMLDivElement, React.ComponentProps<\"div\"> & { asChild?: boolean }>(\r\n  ({ className, asChild = false, ...props }, ref) => {\r\n    const Comp = asChild ? Slot : \"div\";\r\n\r\n    return (\r\n      <Comp\r\n        ref={ref}\r\n        data-sidebar=\"group-label\"\r\n        className={cn(\r\n          \"flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\r\n          \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\r\n          className,\r\n        )}\r\n        {...props}\r\n      />\r\n    );\r\n  },\r\n);\r\nSidebarGroupLabel.displayName = \"SidebarGroupLabel\";\r\n\r\nconst SidebarGroupAction = React.forwardRef<HTMLButtonElement, React.ComponentProps<\"button\"> & { asChild?: boolean }>(\r\n  ({ className, asChild = false, ...props }, ref) => {\r\n    const Comp = asChild ? Slot : \"button\";\r\n\r\n    return (\r\n      <Comp\r\n        ref={ref}\r\n        data-sidebar=\"group-action\"\r\n        className={cn(\r\n          \"absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\r\n          // Increases the hit area of the button on mobile.\r\n          \"after:absolute after:-inset-2 after:md:hidden\",\r\n          \"group-data-[collapsible=icon]:hidden\",\r\n          className,\r\n        )}\r\n        {...props}\r\n      />\r\n    );\r\n  },\r\n);\r\nSidebarGroupAction.displayName = \"SidebarGroupAction\";\r\n\r\nconst SidebarGroupContent = React.forwardRef<HTMLDivElement, React.ComponentProps<\"div\">>(\r\n  ({ className, ...props }, ref) => (\r\n    <div ref={ref} data-sidebar=\"group-content\" className={cn(\"w-full text-sm\", className)} {...props} />\r\n  ),\r\n);\r\nSidebarGroupContent.displayName = \"SidebarGroupContent\";\r\n\r\nconst SidebarMenu = React.forwardRef<HTMLUListElement, React.ComponentProps<\"ul\">>(({ className, ...props }, ref) => (\r\n  <ul ref={ref} data-sidebar=\"menu\" className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)} {...props} />\r\n));\r\nSidebarMenu.displayName = \"SidebarMenu\";\r\n\r\nconst SidebarMenuItem = React.forwardRef<HTMLLIElement, React.ComponentProps<\"li\">>(({ className, ...props }, ref) => (\r\n  <li ref={ref} data-sidebar=\"menu-item\" className={cn(\"group/menu-item relative\", className)} {...props} />\r\n));\r\nSidebarMenuItem.displayName = \"SidebarMenuItem\";\r\n\r\nconst sidebarMenuButtonVariants = cva(\r\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\r\n        outline:\r\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\r\n      },\r\n      size: {\r\n        default: \"h-8 text-sm\",\r\n        sm: \"h-7 text-xs\",\r\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:!p-0\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  },\r\n);\r\n\r\nconst SidebarMenuButton = React.forwardRef<\r\n  HTMLButtonElement,\r\n  React.ComponentProps<\"button\"> & {\r\n    asChild?: boolean;\r\n    isActive?: boolean;\r\n    tooltip?: string | React.ComponentProps<typeof TooltipContent>;\r\n  } & VariantProps<typeof sidebarMenuButtonVariants>\r\n>(({ asChild = false, isActive = false, variant = \"default\", size = \"default\", tooltip, className, ...props }, ref) => {\r\n  const Comp = asChild ? Slot : \"button\";\r\n  const { isMobile, state } = useSidebar();\r\n\r\n  const button = (\r\n    <Comp\r\n      ref={ref}\r\n      data-sidebar=\"menu-button\"\r\n      data-size={size}\r\n      data-active={isActive}\r\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\r\n      {...props}\r\n    />\r\n  );\r\n\r\n  if (!tooltip) {\r\n    return button;\r\n  }\r\n\r\n  if (typeof tooltip === \"string\") {\r\n    tooltip = {\r\n      children: tooltip,\r\n    };\r\n  }\r\n\r\n  return (\r\n    <Tooltip>\r\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\r\n      <TooltipContent side=\"right\" align=\"center\" hidden={state !== \"collapsed\" || isMobile} {...tooltip} />\r\n    </Tooltip>\r\n  );\r\n});\r\nSidebarMenuButton.displayName = \"SidebarMenuButton\";\r\n\r\nconst SidebarMenuAction = React.forwardRef<\r\n  HTMLButtonElement,\r\n  React.ComponentProps<\"button\"> & {\r\n    asChild?: boolean;\r\n    showOnHover?: boolean;\r\n  }\r\n>(({ className, asChild = false, showOnHover = false, ...props }, ref) => {\r\n  const Comp = asChild ? Slot : \"button\";\r\n\r\n  return (\r\n    <Comp\r\n      ref={ref}\r\n      data-sidebar=\"menu-action\"\r\n      className={cn(\r\n        \"absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform peer-hover/menu-button:text-sidebar-accent-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\r\n        // Increases the hit area of the button on mobile.\r\n        \"after:absolute after:-inset-2 after:md:hidden\",\r\n        \"peer-data-[size=sm]/menu-button:top-1\",\r\n        \"peer-data-[size=default]/menu-button:top-1.5\",\r\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\r\n        \"group-data-[collapsible=icon]:hidden\",\r\n        showOnHover &&\r\n          \"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  );\r\n});\r\nSidebarMenuAction.displayName = \"SidebarMenuAction\";\r\n\r\nconst SidebarMenuBadge = React.forwardRef<HTMLDivElement, React.ComponentProps<\"div\">>(\r\n  ({ className, ...props }, ref) => (\r\n    <div\r\n      ref={ref}\r\n      data-sidebar=\"menu-badge\"\r\n      className={cn(\r\n        \"pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground\",\r\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\r\n        \"peer-data-[size=sm]/menu-button:top-1\",\r\n        \"peer-data-[size=default]/menu-button:top-1.5\",\r\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\r\n        \"group-data-[collapsible=icon]:hidden\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  ),\r\n);\r\nSidebarMenuBadge.displayName = \"SidebarMenuBadge\";\r\n\r\nconst SidebarMenuSkeleton = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.ComponentProps<\"div\"> & {\r\n    showIcon?: boolean;\r\n  }\r\n>(({ className, showIcon = false, ...props }, ref) => {\r\n  // Random width between 50 to 90%.\r\n  const width = React.useMemo(() => {\r\n    return `${Math.floor(Math.random() * 40) + 50}%`;\r\n  }, []);\r\n\r\n  return (\r\n    <div\r\n      ref={ref}\r\n      data-sidebar=\"menu-skeleton\"\r\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\r\n      {...props}\r\n    >\r\n      {showIcon && <Skeleton className=\"size-4 rounded-md\" data-sidebar=\"menu-skeleton-icon\" />}\r\n      <Skeleton\r\n        className=\"h-4 max-w-[--skeleton-width] flex-1\"\r\n        data-sidebar=\"menu-skeleton-text\"\r\n        style={\r\n          {\r\n            \"--skeleton-width\": width,\r\n          } as React.CSSProperties\r\n        }\r\n      />\r\n    </div>\r\n  );\r\n});\r\nSidebarMenuSkeleton.displayName = \"SidebarMenuSkeleton\";\r\n\r\nconst SidebarMenuSub = React.forwardRef<HTMLUListElement, React.ComponentProps<\"ul\">>(\r\n  ({ className, ...props }, ref) => (\r\n    <ul\r\n      ref={ref}\r\n      data-sidebar=\"menu-sub\"\r\n      className={cn(\r\n        \"mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5\",\r\n        \"group-data-[collapsible=icon]:hidden\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  ),\r\n);\r\nSidebarMenuSub.displayName = \"SidebarMenuSub\";\r\n\r\nconst SidebarMenuSubItem = React.forwardRef<HTMLLIElement, React.ComponentProps<\"li\">>(({ ...props }, ref) => (\r\n  <li ref={ref} {...props} />\r\n));\r\nSidebarMenuSubItem.displayName = \"SidebarMenuSubItem\";\r\n\r\nconst SidebarMenuSubButton = React.forwardRef<\r\n  HTMLAnchorElement,\r\n  React.ComponentProps<\"a\"> & {\r\n    asChild?: boolean;\r\n    size?: \"sm\" | \"md\";\r\n    isActive?: boolean;\r\n  }\r\n>(({ asChild = false, size = \"md\", isActive, className, ...props }, ref) => {\r\n  const Comp = asChild ? Slot : \"a\";\r\n\r\n  return (\r\n    <Comp\r\n      ref={ref}\r\n      data-sidebar=\"menu-sub-button\"\r\n      data-size={size}\r\n      data-active={isActive}\r\n      className={cn(\r\n        \"flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring aria-disabled:pointer-events-none aria-disabled:opacity-50 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground\",\r\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\r\n        size === \"sm\" && \"text-xs\",\r\n        size === \"md\" && \"text-sm\",\r\n        \"group-data-[collapsible=icon]:hidden\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  );\r\n});\r\nSidebarMenuSubButton.displayName = \"SidebarMenuSubButton\";\r\n\r\nexport {\r\n  Sidebar,\r\n  SidebarContent,\r\n  SidebarFooter,\r\n  SidebarGroup,\r\n  SidebarGroupAction,\r\n  SidebarGroupContent,\r\n  SidebarGroupLabel,\r\n  SidebarHeader,\r\n  SidebarInput,\r\n  SidebarInset,\r\n  SidebarMenu,\r\n  SidebarMenuAction,\r\n  SidebarMenuBadge,\r\n  SidebarMenuButton,\r\n  SidebarMenuItem,\r\n  SidebarMenuSkeleton,\r\n  SidebarMenuSub,\r\n  SidebarMenuSubButton,\r\n  SidebarMenuSubItem,\r\n  SidebarProvider,\r\n  SidebarRail,\r\n  SidebarSeparator,\r\n  SidebarTrigger,\r\n  useSidebar,\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\ui\\skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\ui\\slider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\ui\\sonner.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":27,"column":19,"nodeType":"Identifier","messageId":"namedExport","endLine":27,"endColumn":24}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useTheme } from \"next-themes\";\r\nimport { Toaster as Sonner, toast } from \"sonner\";\r\n\r\ntype ToasterProps = React.ComponentProps<typeof Sonner>;\r\n\r\nconst Toaster = ({ ...props }: ToasterProps) => {\r\n  const { theme = \"system\" } = useTheme();\r\n\r\n  return (\r\n    <Sonner\r\n      theme={theme as ToasterProps[\"theme\"]}\r\n      className=\"toaster group\"\r\n      toastOptions={{\r\n        classNames: {\r\n          toast:\r\n            \"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg\",\r\n          description: \"group-[.toast]:text-muted-foreground\",\r\n          actionButton: \"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground\",\r\n          cancelButton: \"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground\",\r\n        },\r\n      }}\r\n      {...props}\r\n    />\r\n  );\r\n};\r\n\r\nexport { Toaster, toast };\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\ui\\switch.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\ui\\table.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\ui\\tabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\ui\\textarea.tsx","messages":[{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"An interface declaring no members is equivalent to its supertype.","line":5,"column":18,"nodeType":"Identifier","messageId":"noEmptyInterfaceWithSuper","endLine":5,"endColumn":31,"suggestions":[{"messageId":"replaceEmptyInterfaceWithSuper","fix":{"range":[79,163],"text":"type TextareaProps = React.TextareaHTMLAttributes<HTMLTextAreaElement>"},"desc":"Replace empty interface with a type alias."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nexport interface TextareaProps extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {}\r\n\r\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(({ className, ...props }, ref) => {\r\n  return (\r\n    <textarea\r\n      className={cn(\r\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\r\n        className,\r\n      )}\r\n      ref={ref}\r\n      {...props}\r\n    />\r\n  );\r\n});\r\nTextarea.displayName = \"Textarea\";\r\n\r\nexport { Textarea };\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\ui\\toast.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\ui\\toaster.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\ui\\toggle-group.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\ui\\toggle.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":37,"column":18,"nodeType":"Identifier","messageId":"namedExport","endLine":37,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\r\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\";\r\nimport { cva, type VariantProps } from \"class-variance-authority\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst toggleVariants = cva(\r\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-transparent\",\r\n        outline: \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\r\n      },\r\n      size: {\r\n        default: \"h-10 px-3\",\r\n        sm: \"h-9 px-2.5\",\r\n        lg: \"h-11 px-5\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  },\r\n);\r\n\r\nconst Toggle = React.forwardRef<\r\n  React.ElementRef<typeof TogglePrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> & VariantProps<typeof toggleVariants>\r\n>(({ className, variant, size, ...props }, ref) => (\r\n  <TogglePrimitive.Root ref={ref} className={cn(toggleVariants({ variant, size, className }))} {...props} />\r\n));\r\n\r\nToggle.displayName = TogglePrimitive.Root.displayName;\r\n\r\nexport { Toggle, toggleVariants };\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\ui\\tooltip.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\components\\ui\\use-toast.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\hooks\\use-mobile.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\hooks\\use-toast.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\lib\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\pages\\AgentDashboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":20,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1056,1059],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1056,1059],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadAgents'. Either include it or remove the dependency array.","line":26,"column":6,"nodeType":"ArrayExpression","endLine":26,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [loadAgents]","fix":{"range":[1247,1249],"text":"[loadAgents]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadAgentData'. Either include it or remove the dependency array.","line":32,"column":6,"nodeType":"ArrayExpression","endLine":32,"endColumn":31,"suggestions":[{"desc":"Update the dependencies array to be: [selectedAgentId, period, loadAgentData]","fix":{"range":[1340,1365],"text":"[selectedAgentId, period, loadAgentData]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":57,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":57,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2082,2085],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2082,2085],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":73,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":73,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2546,2549],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2546,2549],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":90,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":90,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3169,3172],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3169,3172],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":90,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":90,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3178,3181],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3178,3181],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":100,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":100,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3468,3471],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3468,3471],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":100,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":100,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3476,3479],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3476,3479],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":115,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":115,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4029,4032],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4029,4032],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":150,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":150,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5535,5538],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5535,5538],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":290,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":290,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11526,11529],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11526,11529],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from \"react\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { \r\n  Users, TrendingUp, Package, MapPin, Calendar, \r\n  Loader2, Download, Filter \r\n} from \"lucide-react\";\r\nimport { agentService } from \"@/services/agentService\";\r\nimport type { Agent, AgentStats } from \"@/types/agent\";\r\nimport { api } from \"@/services/api\";\r\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, LineChart, Line } from 'recharts';\r\n\r\nexport default function AgentDashboard() {\r\n  const [agents, setAgents] = useState<Agent[]>([]);\r\n  const [selectedAgentId, setSelectedAgentId] = useState<string>(\"\");\r\n  const [stats, setStats] = useState<AgentStats | null>(null);\r\n  const [operations, setOperations] = useState<any[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [period, setPeriod] = useState<\"mois\" | \"semaine\" | \"jour\">(\"mois\");\r\n\r\n  useEffect(() => {\r\n    loadAgents();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (selectedAgentId) {\r\n      loadAgentData();\r\n    }\r\n  }, [selectedAgentId, period]);\r\n\r\n  const loadAgents = async () => {\r\n    try {\r\n      const data = await agentService.getAgents();\r\n      setAgents(data.filter(a => a.statut === 'actif'));\r\n      if (data.length > 0 && !selectedAgentId) {\r\n        setSelectedAgentId(data[0].id);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Erreur chargement agents:\", error);\r\n    }\r\n  };\r\n\r\n  const loadAgentData = async () => {\r\n    try {\r\n      setIsLoading(true);\r\n      const [statsData, opsData] = await Promise.all([\r\n        agentService.getAgentStats(selectedAgentId),\r\n        api.getOperations()\r\n      ]);\r\n      \r\n      setStats(statsData);\r\n      \r\n      // Filtrer les op√©rations de l'agent\r\n      const agentOps = opsData.filter((op: any) => op.id_agent === selectedAgentId);\r\n      setOperations(agentOps);\r\n    } catch (error) {\r\n      console.error(\"Erreur chargement donn√©es:\", error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const selectedAgent = agents.find(a => a.id === selectedAgentId);\r\n\r\n  // Pr√©parer les donn√©es pour les graphiques\r\n  const prepareChartData = () => {\r\n    if (!operations.length) return [];\r\n\r\n    const now = new Date();\r\n    let groupBy: (op: any) => string;\r\n\r\n    switch (period) {\r\n      case \"jour\":\r\n        groupBy = (op) => new Date(op.createdAt).toLocaleDateString('fr-FR');\r\n        break;\r\n      case \"semaine\":\r\n        groupBy = (op) => {\r\n          const date = new Date(op.createdAt);\r\n          const week = Math.ceil(date.getDate() / 7);\r\n          return `Sem ${week} - ${date.toLocaleDateString('fr-FR', { month: 'short' })}`;\r\n        };\r\n        break;\r\n      default: // mois\r\n        groupBy = (op) => new Date(op.createdAt).toLocaleDateString('fr-FR', { month: 'long', year: 'numeric' });\r\n    }\r\n\r\n    const grouped = operations.reduce((acc: any, op: any) => {\r\n      const key = groupBy(op);\r\n      if (!acc[key]) {\r\n        acc[key] = { period: key, count: 0, poids: 0 };\r\n      }\r\n      acc[key].count += 1;\r\n      acc[key].poids += op.manutention_pesee || 0;\r\n      return acc;\r\n    }, {});\r\n\r\n    return Object.values(grouped).sort((a: any, b: any) => \r\n      new Date(a.period).getTime() - new Date(b.period).getTime()\r\n    );\r\n  };\r\n\r\n  const chartData = prepareChartData();\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-6 max-w-7xl mx-auto\">\r\n      <div className=\"flex justify-between items-start\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold text-foreground\">Dashboard Agents</h1>\r\n          <p className=\"text-muted-foreground mt-1\">Suivi des collectes par agent</p>\r\n        </div>\r\n        <div className=\"flex gap-4\">\r\n          <Select value={period} onValueChange={(v: any) => setPeriod(v)}>\r\n            <SelectTrigger className=\"w-40\">\r\n              <SelectValue />\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n              <SelectItem value=\"jour\">Par Jour</SelectItem>\r\n              <SelectItem value=\"semaine\">Par Semaine</SelectItem>\r\n              <SelectItem value=\"mois\">Par Mois</SelectItem>\r\n            </SelectContent>\r\n          </Select>\r\n        </div>\r\n      </div>\r\n\r\n      {/* S√©lection Agent */}\r\n      <Card>\r\n        <CardContent className=\"p-4\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Label className=\"font-semibold\">Agent :</Label>\r\n            <Select value={selectedAgentId} onValueChange={setSelectedAgentId}>\r\n              <SelectTrigger className=\"w-64\">\r\n                <SelectValue placeholder=\"S√©lectionner un agent\" />\r\n              </SelectTrigger>\r\n              <SelectContent>\r\n                {agents.map((agent) => (\r\n                  <SelectItem key={agent.id} value={agent.id}>\r\n                    {agent.nom} {agent.prenom} ({agent.code})\r\n                  </SelectItem>\r\n                ))}\r\n              </SelectContent>\r\n            </Select>\r\n            {selectedAgent && (\r\n              <div className=\"flex gap-2 ml-auto\">\r\n                {selectedAgent.regions && selectedAgent.regions.length > 0 && (\r\n                  <Badge variant=\"outline\" className=\"gap-1\">\r\n                    <MapPin className=\"h-3 w-3\" />\r\n                    {selectedAgent.regions.map((ar: any) => ar.region?.nom).filter(Boolean).join(', ')}\r\n                  </Badge>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {isLoading ? (\r\n        <div className=\"flex justify-center py-12\">\r\n          <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\r\n        </div>\r\n      ) : stats ? (\r\n        <>\r\n          {/* KPIs */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n            <Card className=\"border-l-4 border-l-blue-500\">\r\n              <CardContent className=\"p-6\">\r\n                <div className=\"flex justify-between items-start\">\r\n                  <div>\r\n                    <p className=\"text-sm font-medium text-muted-foreground\">Total Op√©rations</p>\r\n                    <h3 className=\"text-3xl font-bold mt-2\">{stats.nb_operations}</h3>\r\n                    <p className=\"text-xs text-muted-foreground mt-1\">\r\n                      {stats.nb_operations_mois} ce mois\r\n                    </p>\r\n                  </div>\r\n                  <Package className=\"h-8 w-8 text-blue-500\" />\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            <Card className=\"border-l-4 border-l-green-500\">\r\n              <CardContent className=\"p-6\">\r\n                <div className=\"flex justify-between items-start\">\r\n                  <div>\r\n                    <p className=\"text-sm font-medium text-muted-foreground\">Poids Total</p>\r\n                    <h3 className=\"text-3xl font-bold mt-2\">\r\n                      {(stats.poids_total / 1000).toFixed(1)} T\r\n                    </h3>\r\n                    <p className=\"text-xs text-muted-foreground mt-1\">\r\n                      {(stats.poids_mois / 1000).toFixed(1)} T ce mois\r\n                    </p>\r\n                  </div>\r\n                  <TrendingUp className=\"h-8 w-8 text-green-500\" />\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            <Card className=\"border-l-4 border-l-purple-500\">\r\n              <CardContent className=\"p-6\">\r\n                <div className=\"flex justify-between items-start\">\r\n                  <div>\r\n                    <p className=\"text-sm font-medium text-muted-foreground\">R√©gions</p>\r\n                    <h3 className=\"text-3xl font-bold mt-2\">{stats.regions.length}</h3>\r\n                    <p className=\"text-xs text-muted-foreground mt-1 truncate\">\r\n                      {stats.regions.join(', ')}\r\n                    </p>\r\n                  </div>\r\n                  <MapPin className=\"h-8 w-8 text-purple-500\" />\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            <Card className=\"border-l-4 border-l-orange-500\">\r\n              <CardContent className=\"p-6\">\r\n                <div className=\"flex justify-between items-start\">\r\n                  <div>\r\n                    <p className=\"text-sm font-medium text-muted-foreground\">Derni√®re Op√©ration</p>\r\n                    <h3 className=\"text-lg font-bold mt-2\">\r\n                      {stats.dernier_operation\r\n                        ? new Date(stats.dernier_operation).toLocaleDateString('fr-FR')\r\n                        : 'Aucune'}\r\n                    </h3>\r\n                    <p className=\"text-xs text-muted-foreground mt-1\">\r\n                      {stats.dernier_operation\r\n                        ? new Date(stats.dernier_operation).toLocaleTimeString('fr-FR', { hour: '2-digit', minute: '2-digit' })\r\n                        : ''}\r\n                    </p>\r\n                  </div>\r\n                  <Calendar className=\"h-8 w-8 text-orange-500\" />\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n\r\n          {/* Graphiques */}\r\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle>√âvolution du Nombre d'Op√©rations</CardTitle>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <ResponsiveContainer width=\"100%\" height={300}>\r\n                  <BarChart data={chartData}>\r\n                    <CartesianGrid strokeDasharray=\"3 3\" />\r\n                    <XAxis dataKey=\"period\" />\r\n                    <YAxis />\r\n                    <Tooltip />\r\n                    <Legend />\r\n                    <Bar dataKey=\"count\" fill=\"#3b82f6\" name=\"Nombre d'op√©rations\" />\r\n                  </BarChart>\r\n                </ResponsiveContainer>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle>√âvolution du Poids Collect√© (Kg)</CardTitle>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <ResponsiveContainer width=\"100%\" height={300}>\r\n                  <LineChart data={chartData}>\r\n                    <CartesianGrid strokeDasharray=\"3 3\" />\r\n                    <XAxis dataKey=\"period\" />\r\n                    <YAxis />\r\n                    <Tooltip />\r\n                    <Legend />\r\n                    <Line type=\"monotone\" dataKey=\"poids\" stroke=\"#10b981\" strokeWidth={2} name=\"Poids (Kg)\" />\r\n                  </LineChart>\r\n                </ResponsiveContainer>\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n\r\n          {/* Liste des op√©rations r√©centes */}\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>Op√©rations R√©centes</CardTitle>\r\n            </CardHeader>\r\n            <CardContent>\r\n              {operations.length === 0 ? (\r\n                <p className=\"text-center text-muted-foreground py-8\">\r\n                  Aucune op√©ration enregistr√©e pour cet agent\r\n                </p>\r\n              ) : (\r\n                <div className=\"space-y-2\">\r\n                  {operations\r\n                    .sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime())\r\n                    .slice(0, 10)\r\n                    .map((op: any) => (\r\n                      <div\r\n                        key={op.id}\r\n                        className=\"flex items-center justify-between p-3 border rounded-lg hover:bg-muted/50\"\r\n                      >\r\n                        <div>\r\n                          <p className=\"font-medium\">\r\n                            {op.producteur?.nom_complet || 'Producteur inconnu'}\r\n                          </p>\r\n                          <p className=\"text-sm text-muted-foreground\">\r\n                            {new Date(op.createdAt).toLocaleDateString('fr-FR', {\r\n                              day: 'numeric',\r\n                              month: 'long',\r\n                              year: 'numeric',\r\n                              hour: '2-digit',\r\n                              minute: '2-digit'\r\n                            })}\r\n                          </p>\r\n                        </div>\r\n                        <div className=\"text-right\">\r\n                          <p className=\"font-semibold\">\r\n                            {op.manutention_pesee ? `${op.manutention_pesee} Kg` : 'N/A'}\r\n                          </p>\r\n                          <Badge variant={op.statut === 'Pay√©' ? 'default' : 'secondary'}>\r\n                            {op.statut}\r\n                          </Badge>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                </div>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n        </>\r\n      ) : (\r\n        <Card>\r\n          <CardContent className=\"p-12 text-center\">\r\n            <Users className=\"h-12 w-12 mx-auto text-muted-foreground mb-4\" />\r\n            <p className=\"text-muted-foreground\">\r\n              S√©lectionnez un agent pour voir ses statistiques\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\pages\\AgentForm.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'isEdit' and 'loadAgent'. Either include them or remove the dependency array.","line":66,"column":6,"nodeType":"ArrayExpression","endLine":66,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [id, isEdit, loadAgent]","fix":{"range":[2405,2409],"text":"[id, isEdit, loadAgent]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":87,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":87,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3069,3072],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3069,3072],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":96,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":96,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3573,3576],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3573,3576],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":119,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":119,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4238,4241],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4238,4241],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":175,"column":71,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":175,"endColumn":74,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6254,6257],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6254,6257],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { z } from \"zod\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Checkbox } from \"@/components/ui/checkbox\";\r\nimport { toast } from \"sonner\";\r\nimport { ArrowLeft, Save, Loader2, Search, X } from \"lucide-react\";\r\nimport PhotoCapture from \"@/components/forms/PhotoCapture\";\r\nimport DateInput from \"@/components/forms/DateInput\";\r\nimport { agentService } from \"@/services/agentService\";\r\nimport type { Region } from \"@/types/agent\";\r\n\r\nconst agentSchema = z.object({\r\n  code: z.string().min(1, \"Code requis\"),\r\n  nom: z.string().min(1, \"Nom requis\"),\r\n  prenom: z.string().min(1, \"Pr√©nom requis\"),\r\n  email: z.string().email(\"Email invalide\").optional().or(z.literal(\"\")),\r\n  telephone: z.string().min(1, \"T√©l√©phone requis\"),\r\n  statut: z.enum([\"actif\", \"inactif\", \"suspendu\"]),\r\n  date_naissance: z.string().optional(),\r\n  lieu_naissance: z.string().optional(),\r\n  nationalite: z.string().optional(),\r\n  type_piece: z.string().optional(),\r\n  numero_piece: z.string().optional(),\r\n  photo: z.string().optional(),\r\n  regions: z.array(z.string()).min(1, \"Au moins une r√©gion requise\"),\r\n});\r\n\r\ntype AgentFormData = z.infer<typeof agentSchema>;\r\n\r\nexport default function AgentForm() {\r\n  const navigate = useNavigate();\r\n  const { id } = useParams();\r\n  const isEdit = !!id;\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [regions, setRegions] = useState<Region[]>([]);\r\n  const [selectedRegions, setSelectedRegions] = useState<string[]>([]);\r\n  const [searchRegion, setSearchRegion] = useState(\"\");\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    formState: { errors },\r\n    setValue,\r\n    watch,\r\n  } = useForm<AgentFormData>({\r\n    resolver: zodResolver(agentSchema),\r\n    defaultValues: {\r\n      statut: \"actif\",\r\n      nationalite: \"Ivoirienne\",\r\n      regions: [],\r\n    },\r\n  });\r\n\r\n  useEffect(() => {\r\n    loadRegions();\r\n    if (isEdit) {\r\n      loadAgent();\r\n    }\r\n  }, [id]);\r\n\r\n  const loadRegions = async () => {\r\n    try {\r\n      const data = await agentService.getRegions();\r\n      setRegions(data);\r\n    } catch (error) {\r\n      console.error(\"Erreur chargement r√©gions:\", error);\r\n      toast.error(\"Impossible de charger les r√©gions\");\r\n    }\r\n  };\r\n\r\n  const loadAgent = async () => {\r\n    try {\r\n      setIsLoading(true);\r\n      const agent = await agentService.getAgent(id!);\r\n      setValue(\"code\", agent.code);\r\n      setValue(\"nom\", agent.nom);\r\n      setValue(\"prenom\", agent.prenom);\r\n      setValue(\"email\", agent.email || \"\");\r\n      setValue(\"telephone\", agent.telephone);\r\n      setValue(\"statut\", agent.statut as any);\r\n      setValue(\"date_naissance\", agent.date_naissance ? new Date(agent.date_naissance).toISOString().split('T')[0] : \"\");\r\n      setValue(\"lieu_naissance\", agent.lieu_naissance || \"\");\r\n      setValue(\"nationalite\", agent.nationalite || \"Ivoirienne\");\r\n      setValue(\"type_piece\", agent.type_piece || \"\");\r\n      setValue(\"numero_piece\", agent.numero_piece || \"\");\r\n      setValue(\"photo\", agent.photo || \"\");\r\n      \r\n      if (agent.regions) {\r\n        const regionIds = agent.regions.map((ar: any) => ar.id_region);\r\n        setValue(\"regions\", regionIds);\r\n        setSelectedRegions(regionIds);\r\n      }\r\n    } catch (error) {\r\n      toast.error(\"Impossible de charger l'agent\");\r\n      navigate(\"/agents\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const onSubmit = async (data: AgentFormData) => {\r\n    try {\r\n      setIsLoading(true);\r\n      if (isEdit) {\r\n        await agentService.updateAgent(id!, data);\r\n        toast.success(\"Agent modifi√© avec succ√®s\");\r\n      } else {\r\n        await agentService.createAgent(data);\r\n        toast.success(\"Agent cr√©√© avec succ√®s\");\r\n      }\r\n      navigate(\"/agents\");\r\n    } catch (error: any) {\r\n      toast.error(error.message || \"Erreur lors de l'enregistrement\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const toggleRegion = (regionId: string) => {\r\n    const newRegions = selectedRegions.includes(regionId)\r\n      ? selectedRegions.filter(id => id !== regionId)\r\n      : [...selectedRegions, regionId];\r\n    setSelectedRegions(newRegions);\r\n    setValue(\"regions\", newRegions);\r\n  };\r\n\r\n  // Filtrer les r√©gions selon la recherche\r\n  const filteredRegions = regions.filter(region =>\r\n    region.nom.toLowerCase().includes(searchRegion.toLowerCase()) ||\r\n    region.code.toLowerCase().includes(searchRegion.toLowerCase())\r\n  );\r\n\r\n  if (isLoading && isEdit) {\r\n    return (\r\n      <div className=\"flex justify-center items-center h-screen\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"container mx-auto p-6 max-w-4xl\">\r\n      <Button variant=\"ghost\" onClick={() => navigate(\"/agents\")} className=\"mb-4\">\r\n        <ArrowLeft className=\"mr-2 h-4 w-4\" />\r\n        Retour\r\n      </Button>\r\n\r\n      <h1 className=\"text-3xl font-bold text-foreground mb-6\">\r\n        {isEdit ? \"Modifier l'Agent\" : \"Nouvel Agent\"}\r\n      </h1>\r\n\r\n      <form onSubmit={handleSubmit(onSubmit)}>\r\n        <div className=\"space-y-6\">\r\n          {/* Informations de base */}\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>Informations de Base</CardTitle>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-4\">\r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                <div>\r\n                  <Label>Code Agent *</Label>\r\n                  <Input {...register(\"code\")} placeholder=\"AGT-001\" />\r\n                  {errors.code && <p className=\"text-sm text-destructive mt-1\">{errors.code.message}</p>}\r\n                </div>\r\n                <div>\r\n                  <Label>Statut *</Label>\r\n                  <Select onValueChange={v => setValue(\"statut\", v as any)} value={watch(\"statut\")}>\r\n                    <SelectTrigger>\r\n                      <SelectValue />\r\n                    </SelectTrigger>\r\n                    <SelectContent>\r\n                      <SelectItem value=\"actif\">Actif</SelectItem>\r\n                      <SelectItem value=\"inactif\">Inactif</SelectItem>\r\n                      <SelectItem value=\"suspendu\">Suspendu</SelectItem>\r\n                    </SelectContent>\r\n                  </Select>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                <div>\r\n                  <Label>Nom *</Label>\r\n                  <Input {...register(\"nom\")} />\r\n                  {errors.nom && <p className=\"text-sm text-destructive mt-1\">{errors.nom.message}</p>}\r\n                </div>\r\n                <div>\r\n                  <Label>Pr√©nom *</Label>\r\n                  <Input {...register(\"prenom\")} />\r\n                  {errors.prenom && <p className=\"text-sm text-destructive mt-1\">{errors.prenom.message}</p>}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                <div>\r\n                  <Label>T√©l√©phone *</Label>\r\n                  <Input {...register(\"telephone\")} placeholder=\"0707070707\" />\r\n                  {errors.telephone && <p className=\"text-sm text-destructive mt-1\">{errors.telephone.message}</p>}\r\n                </div>\r\n                <div>\r\n                  <Label>Email</Label>\r\n                  <Input type=\"email\" {...register(\"email\")} placeholder=\"agent@example.com\" />\r\n                  {errors.email && <p className=\"text-sm text-destructive mt-1\">{errors.email.message}</p>}\r\n                </div>\r\n              </div>\r\n\r\n              <PhotoCapture\r\n                label=\"Photo\"\r\n                value={watch(\"photo\")}\r\n                onChange={v => setValue(\"photo\", v)}\r\n              />\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* Identit√© */}\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>Identit√©</CardTitle>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-4\">\r\n              <DateInput\r\n                label=\"Date de Naissance\"\r\n                value={watch(\"date_naissance\")}\r\n                onChange={v => setValue(\"date_naissance\", v)}\r\n              />\r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                <div>\r\n                  <Label>Lieu de Naissance</Label>\r\n                  <Input {...register(\"lieu_naissance\")} />\r\n                </div>\r\n                <div>\r\n                  <Label>Nationalit√©</Label>\r\n                  <Input {...register(\"nationalite\")} defaultValue=\"Ivoirienne\" />\r\n                </div>\r\n              </div>\r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                <div>\r\n                  <Label>Type de Pi√®ce</Label>\r\n                  <Select onValueChange={v => setValue(\"type_piece\", v)} value={watch(\"type_piece\")}>\r\n                    <SelectTrigger>\r\n                      <SelectValue placeholder=\"Choisir...\" />\r\n                    </SelectTrigger>\r\n                    <SelectContent>\r\n                      <SelectItem value=\"CNI\">CNI</SelectItem>\r\n                      <SelectItem value=\"Passeport\">Passeport</SelectItem>\r\n                    </SelectContent>\r\n                  </Select>\r\n                </div>\r\n                <div>\r\n                  <Label>Num√©ro de Pi√®ce</Label>\r\n                  <Input {...register(\"numero_piece\")} />\r\n                </div>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* Affectation aux R√©gions */}\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>Affectation aux R√©gions *</CardTitle>\r\n              <p className=\"text-sm text-muted-foreground mt-1\">\r\n                S√©lectionnez les r√©gions o√π cet agent interviendra ({selectedRegions.length} s√©lectionn√©e{selectedRegions.length > 1 ? 's' : ''})\r\n              </p>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-4\">\r\n              {/* Champ de recherche */}\r\n              <div className=\"relative\">\r\n                <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n                <Input\r\n                  placeholder=\"Rechercher une r√©gion...\"\r\n                  value={searchRegion}\r\n                  onChange={(e) => setSearchRegion(e.target.value)}\r\n                  className=\"pl-10 pr-10\"\r\n                />\r\n                {searchRegion && (\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => setSearchRegion(\"\")}\r\n                    className=\"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground\"\r\n                  >\r\n                    <X className=\"h-4 w-4\" />\r\n                  </button>\r\n                )}\r\n              </div>\r\n\r\n              {/* Liste des r√©gions */}\r\n              <div className=\"max-h-96 overflow-y-auto border rounded-lg p-4\">\r\n                {filteredRegions.length === 0 ? (\r\n                  <p className=\"text-center text-muted-foreground py-8\">\r\n                    Aucune r√©gion trouv√©e pour \"{searchRegion}\"\r\n                  </p>\r\n                ) : (\r\n                  <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3\">\r\n                    {filteredRegions.map((region) => (\r\n                    <div \r\n                      key={region.id} \r\n                      className=\"flex items-center gap-2 hover:bg-muted/50 p-2 rounded transition-colors\"\r\n                    >\r\n                      <Checkbox\r\n                        id={`region-${region.id}`}\r\n                        checked={selectedRegions.includes(region.id)}\r\n                        onCheckedChange={() => toggleRegion(region.id)}\r\n                      />\r\n                      <Label \r\n                        htmlFor={`region-${region.id}`} \r\n                        className=\"cursor-pointer text-sm flex-1\"\r\n                      >\r\n                        {region.nom}\r\n                      </Label>\r\n                    </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {errors.regions && (\r\n                <p className=\"text-sm text-destructive mt-2\">{errors.regions.message}</p>\r\n              )}\r\n              {regions.length === 0 && (\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                  Aucune r√©gion disponible. Cr√©ez d'abord des r√©gions.\r\n                </p>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n\r\n          <div className=\"flex justify-end gap-4\">\r\n            <Button type=\"button\" variant=\"outline\" onClick={() => navigate(\"/agents\")}>\r\n              Annuler\r\n            </Button>\r\n            <Button type=\"submit\" disabled={isLoading}>\r\n              {isLoading ? (\r\n                <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n              ) : (\r\n                <Save className=\"mr-2 h-4 w-4\" />\r\n              )}\r\n              {isEdit ? \"Modifier\" : \"Cr√©er\"}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\pages\\Agents.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":66,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":66,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2264,2267],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2264,2267],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":148,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":148,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5817,5820],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5817,5820],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from \"react\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Search, Plus, User, MapPin, Loader2, Edit, Trash2 } from \"lucide-react\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { agentService } from \"@/services/agentService\";\r\nimport type { Agent } from \"@/types/agent\";\r\nimport { toast } from \"sonner\";\r\n\r\nexport default function Agents() {\r\n  const navigate = useNavigate();\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [agents, setAgents] = useState<Agent[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    loadAgents();\r\n  }, []);\r\n\r\n  const loadAgents = async () => {\r\n    try {\r\n      setIsLoading(true);\r\n      const data = await agentService.getAgents();\r\n      setAgents(data);\r\n    } catch (error) {\r\n      console.error(\"Erreur chargement agents:\", error);\r\n      toast.error(\"Impossible de charger les agents\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const getStatusColor = (statut: string) => {\r\n    switch (statut) {\r\n      case \"actif\":\r\n        return \"bg-green-100 text-green-800 border-green-200\";\r\n      case \"inactif\":\r\n        return \"bg-gray-100 text-gray-800 border-gray-200\";\r\n      case \"suspendu\":\r\n        return \"bg-red-100 text-red-800 border-red-200\";\r\n      default:\r\n        return \"bg-gray-100 text-gray-800 border-gray-200\";\r\n    }\r\n  };\r\n\r\n  const filteredAgents = agents.filter(agent => {\r\n    if (!searchQuery) return true;\r\n    const query = searchQuery.toLowerCase();\r\n    return (\r\n      `${agent.nom} ${agent.prenom}`.toLowerCase().includes(query) ||\r\n      agent.code.toLowerCase().includes(query) ||\r\n      agent.telephone?.toLowerCase().includes(query) ||\r\n      agent.email?.toLowerCase().includes(query)\r\n    );\r\n  });\r\n\r\n  const handleDelete = async (id: string, nom: string) => {\r\n    if (!confirm(`√ätes-vous s√ªr de vouloir supprimer l'agent ${nom} ?`)) return;\r\n    \r\n    try {\r\n      await agentService.deleteAgent(id);\r\n      toast.success(\"Agent supprim√© avec succ√®s\");\r\n      loadAgents();\r\n    } catch (error: any) {\r\n      toast.error(error.message || \"Erreur lors de la suppression\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-6\">\r\n      <div className=\"flex justify-between items-start\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold text-foreground\">Agents de Collecte</h1>\r\n          <p className=\"text-muted-foreground mt-1\">\r\n            Gestion des agents et affectations aux r√©gions ({agents.length})\r\n          </p>\r\n        </div>\r\n        <Link to=\"/agents/nouveau\">\r\n          <Button className=\"gap-2\">\r\n            <Plus className=\"h-4 w-4\" />\r\n            Nouvel Agent\r\n          </Button>\r\n        </Link>\r\n      </div>\r\n\r\n      <div className=\"flex gap-4\">\r\n        <div className=\"relative flex-1\">\r\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n          <Input\r\n            placeholder=\"Rechercher par nom, code, t√©l√©phone...\"\r\n            value={searchQuery}\r\n            onChange={(e) => setSearchQuery(e.target.value)}\r\n            className=\"pl-10\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {isLoading ? (\r\n        <div className=\"flex justify-center py-12\">\r\n          <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\r\n        </div>\r\n      ) : filteredAgents.length === 0 ? (\r\n        <div className=\"text-center py-12\">\r\n          <User className=\"h-12 w-12 mx-auto text-muted-foreground mb-4\" />\r\n          <p className=\"text-muted-foreground\">\r\n            {searchQuery ? \"Aucun agent trouv√©\" : \"Aucun agent enregistr√©\"}\r\n          </p>\r\n          {!searchQuery && (\r\n            <Link to=\"/agents/nouveau\">\r\n              <Button className=\"mt-4 gap-2\">\r\n                <Plus className=\"h-4 w-4\" />\r\n                Cr√©er le premier agent\r\n              </Button>\r\n            </Link>\r\n          )}\r\n        </div>\r\n      ) : (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n          {filteredAgents.map((agent) => (\r\n            <Card key={agent.id} className=\"shadow-card hover:shadow-elevated transition-all\">\r\n              <CardContent className=\"p-4\">\r\n                <div className=\"flex items-start gap-4\">\r\n                  <div className=\"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center shrink-0\">\r\n                    <User className=\"h-6 w-6 text-primary\" />\r\n                  </div>\r\n                  <div className=\"flex-1 min-w-0\">\r\n                    <div className=\"flex items-start justify-between gap-2 mb-2\">\r\n                      <div className=\"min-w-0\">\r\n                        <h3 className=\"font-semibold text-foreground truncate\">\r\n                          {agent.nom} {agent.prenom}\r\n                        </h3>\r\n                        <p className=\"text-xs text-muted-foreground font-mono\">{agent.code}</p>\r\n                      </div>\r\n                      <Badge className={getStatusColor(agent.statut)}>\r\n                        {agent.statut}\r\n                      </Badge>\r\n                    </div>\r\n\r\n                    <div className=\"space-y-1 text-xs text-muted-foreground mb-3\">\r\n                      {agent.telephone && <p>üìû {agent.telephone}</p>}\r\n                      {agent.email && <p>‚úâÔ∏è {agent.email}</p>}\r\n                      {agent.regions && agent.regions.length > 0 && (\r\n                        <div className=\"flex items-center gap-1 flex-wrap\">\r\n                          <MapPin className=\"h-3 w-3\" />\r\n                          <span>\r\n                            {agent.regions.map((ar: any) => ar.region?.nom || '').filter(Boolean).join(', ')}\r\n                          </span>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n\r\n                    <div className=\"flex gap-2 pt-3 border-t\">\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                        className=\"flex-1 gap-2\"\r\n                        onClick={() => navigate(`/agents/${agent.id}`)}\r\n                      >\r\n                        <Edit className=\"h-4 w-4\" />\r\n                        Modifier\r\n                      </Button>\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                        className=\"text-destructive hover:text-destructive\"\r\n                        onClick={() => handleDelete(agent.id, `${agent.nom} ${agent.prenom}`)}\r\n                      >\r\n                        <Trash2 className=\"h-4 w-4\" />\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\pages\\CarteSuivi.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\pages\\Dashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\pages\\FarmBusinessPlan.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\pages\\Index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\pages\\NotFound.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\pages\\OperationDetails.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":53,"column":82,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":53,"endColumn":85,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2066,2069],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2066,2069],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useParams, useNavigate } from \"react-router-dom\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { ArrowLeft, Truck, Scale, Banknote, Calendar, CheckCircle2, Timer, Leaf, Box, Loader2 } from \"lucide-react\";\r\nimport { api } from \"@/services/api\";\r\nimport { Operation, Producteur, Parcelle } from \"@/types/organisation\";\r\nimport { useState, useEffect } from \"react\";\r\n\r\nexport default function OperationDetails() {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const [operation, setOperation] = useState<Operation | undefined>(undefined);\r\n  const [producteur, setProducteur] = useState<Producteur | undefined>(undefined);\r\n  const [parcelle, setParcelle] = useState<Parcelle | undefined>(undefined);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (id) {\r\n      const loadData = async () => {\r\n        try {\r\n            const data = await api.getOperation(id);\r\n            setOperation(data);\r\n            if (data) {\r\n                if (data.id_producteur) {\r\n                    const prod = await api.getProducteur(data.id_producteur);\r\n                    setProducteur(prod);\r\n                }\r\n                if (data.id_parcelle) {\r\n                    const parc = await api.getParcelle(data.id_parcelle);\r\n                    setParcelle(parc);\r\n                }\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Erreur chargement operation:\", error);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n      };\r\n      loadData();\r\n    }\r\n  }, [id]);\r\n\r\n  if (isLoading) {\r\n    return <div className=\"flex justify-center items-center h-screen\"><Loader2 className=\"h-12 w-12 animate-spin text-primary\" /></div>;\r\n  }\r\n\r\n  if (!operation) {\r\n    return <div className=\"p-8 text-center\">Operation introuvable...</div>;\r\n  }\r\n\r\n\r\n  const StepCard = ({ title, icon: Icon, date, details }: { title: string, icon: any, date: Date | undefined, details: React.ReactNode }) => (\r\n    <Card className={`border-l-4 ${date ? 'border-l-green-500' : 'border-l-gray-200'}`}>\r\n      <CardHeader className=\"pb-2\">\r\n        <div className=\"flex justify-between items-center\">\r\n          <CardTitle className=\"text-base flex items-center gap-2\">\r\n            <Icon className={`h-5 w-5 ${date ? 'text-primary' : 'text-muted-foreground'}`} />\r\n            {title}\r\n          </CardTitle>\r\n          {date && <Badge variant=\"outline\" className=\"text-xs\">{new Date(date).toLocaleDateString()}</Badge>}\r\n        </div>\r\n      </CardHeader>\r\n      <CardContent className=\"text-sm space-y-1\">\r\n        {details}\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n\r\n  return (\r\n    <div className=\"p-6 max-w-5xl mx-auto space-y-8 animate-in fade-in duration-500\">\r\n      \r\n      {/* Header */}\r\n      <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n        <div className=\"flex items-center gap-4\">\r\n          <Button variant=\"outline\" size=\"icon\" onClick={() => navigate(\"/operations\")}>\r\n            <ArrowLeft className=\"h-5 w-5\" />\r\n          </Button>\r\n          <div>\r\n            <h1 className=\"text-3xl font-bold\">Op√©ration #{operation.id.slice(-6)}</h1>\r\n            <div className=\"flex items-center gap-2 text-muted-foreground mt-1\">\r\n              <span className=\"font-medium text-foreground\">{producteur?.nom_complet || operation.id_producteur}</span>\r\n              <span>‚Ä¢</span>\r\n              <span>Plantation {parcelle?.code || operation.id_parcelle}</span>\r\n              <span>‚Ä¢</span>\r\n              <Badge className={operation.statut === 'Pay√©' ? 'bg-green-600 hover:bg-green-700' : ''}>{operation.statut}</Badge>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <Button variant=\"outline\">Imprimer Re√ßu</Button>\r\n      </div>\r\n\r\n      {/* Timeline Grid */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n        \r\n        <StepCard \r\n          title=\"R√©colte\" \r\n          icon={Leaf} \r\n          date={operation.date_recolte_1} \r\n          details={\r\n            <>\r\n              <div>D√©but: {new Date(operation.date_recolte_1).toLocaleDateString()}</div>\r\n            </>\r\n          } \r\n        />\r\n\r\n        <StepCard \r\n          title=\"Ecabossage\" \r\n          icon={Timer} \r\n          date={operation.date_ecabossage} \r\n          details={\r\n            <>\r\n               <div>Dur√©e: {operation.ecabossage_duree}</div>\r\n               <div>Co√ªt: {operation.cout_ecabossage} FCFA</div>\r\n            </>\r\n          } \r\n        />\r\n\r\n        <StepCard \r\n          title=\"Fermentation\" \r\n          icon={Box} \r\n          date={operation.fermentation_debut} \r\n          details={\r\n            <>\r\n               <div>Fin: {new Date(operation.fermentation_fin).toLocaleDateString()}</div>\r\n               <div>Mat√©riel: {operation.materiel_feuilles ? 'Feuilles' : ''} {operation.materiel_caisses ? 'Caisses' : ''}</div>\r\n            </>\r\n          } \r\n        />\r\n\r\n        <StepCard \r\n          title=\"S√©chage\" \r\n          icon={Calendar} \r\n          date={operation.sechage_debut} \r\n          details={\r\n            <>\r\n               <div>Fin: {new Date(operation.sechage_fin).toLocaleDateString()}</div>\r\n               <div>M√©thode: {operation.aire_claie_bambou ? 'Claies Bambou' : 'Autre'}</div>\r\n            </>\r\n          } \r\n        />\r\n\r\n        <StepCard \r\n          title=\"Ensachage & Transport\" \r\n          icon={Truck} \r\n          date={operation.ensachage_debut} \r\n          details={\r\n            <>\r\n               <div>Sacs Brousse: <b>{operation.nb_sacs_brousse}</b></div>\r\n               <div>Poids Estimatif: <b>{operation.poids_estimatif} Kg</b></div>\r\n            </>\r\n          } \r\n        />\r\n\r\n        <StepCard \r\n          title=\"Pes√©e & Validation\" \r\n          icon={Scale} \r\n          date={operation.date_livraison} \r\n          details={\r\n            <>\r\n               <div>Poids Net: <b className=\"text-green-600 text-lg\">{operation.manutention_pesee} Kg</b></div>\r\n               <div>Statut: <Badge variant=\"outline\">{operation.validation_statut}</Badge></div>\r\n            </>\r\n          } \r\n        />\r\n\r\n      </div>\r\n\r\n      {/* Section Paiement */}\r\n      <Card className=\"border-green-200 bg-green-50/30\">\r\n        <CardHeader>\r\n          <CardTitle className=\"flex items-center gap-2 text-green-800\">\r\n            <Banknote className=\"h-6 w-6\" />\r\n            Paiement\r\n          </CardTitle>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n            <div>\r\n               <p className=\"text-sm text-muted-foreground uppercase font-bold\">Montant Total</p>\r\n               <p className=\"text-3xl font-bold text-green-700\">{(operation.montant_cheque || 0) + (operation.montant_especes || 0)} FCFA</p>\r\n            </div>\r\n            <div>\r\n               <p className=\"text-sm text-muted-foreground uppercase font-bold\">Mode de Paiement</p>\r\n               <div className=\"mt-1\">\r\n                 {operation.paiement_cheque && <Badge variant=\"secondary\" className=\"mr-2\">Ch√®que</Badge>}\r\n                 {operation.paiement_especes && <Badge variant=\"secondary\">Esp√®ces</Badge>}\r\n               </div>\r\n               {operation.numero_cheque && <p className=\"text-sm mt-1\">N¬∞ {operation.numero_cheque} ({operation.banque})</p>}\r\n            </div>\r\n            <div>\r\n               <p className=\"text-sm text-muted-foreground uppercase font-bold\">Retenues</p>\r\n               <ul className=\"text-sm mt-1 space-y-1\">\r\n                 {operation.retenue_mec && <li>MEC: -{operation.retenue_mec_taux} FCFA</li>}\r\n                 {operation.retenue_epargne && <li>Epargne: -{operation.retenue_epargne_taux} FCFA</li>}\r\n               </ul>\r\n            </div>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\pages\\OperationForm.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":212,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":212,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8880,8883],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8880,8883],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":389,"column":80,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":389,"endColumn":83,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20365,20368],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20365,20368],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":408,"column":77,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":408,"endColumn":80,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[22025,22028],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[22025,22028],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { z } from \"zod\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Checkbox } from \"@/components/ui/checkbox\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Progress } from \"@/components/ui/progress\";\r\nimport { toast } from \"sonner\";\r\nimport { ArrowLeft, ArrowRight, Check, Leaf, Scissors, Truck, Wind, Sun, Package, Scale, Banknote, User, Info } from \"lucide-react\";\r\nimport PhotoCapture from \"@/components/forms/PhotoCapture\";\r\nimport DateInput from \"@/components/forms/DateInput\";\r\nimport { generateOperationCode } from \"@/utils/codeGenerators\";\r\nimport { api } from \"@/services/api\";\r\nimport { Producteur, Parcelle } from \"@/types/organisation\";\r\nimport { agentService } from \"@/services/agentService\";\r\nimport type { Agent } from \"@/types/agent\";\r\n\r\n// 0. Identification\r\nconst identificationSchema = z.object({\r\n  idProducteur: z.string().min(1, \"Producteur requis\"),\r\n  idPlantation: z.string().min(1, \"Plantation requise\"),\r\n  idAgent: z.string().optional(), // Agent optionnel pour l'instant\r\n});\r\n\r\n// ... (Le reste des sch√©mas reste inchang√©)\r\n// 1. R√©colte\r\nconst recolteSchema = z.object({\r\n  dateRecolte1: z.string().min(1, \"Date 1 requise\"), photoRecolte1: z.string().optional(),\r\n  dateRecolte2: z.string().optional(), photoRecolte2: z.string().optional(),\r\n  dateRecolte3: z.string().optional(), photoRecolte3: z.string().optional(),\r\n});\r\n\r\n// 2. Ecabossage\r\nconst ecabossageSchema = z.object({\r\n  dateEcabossage: z.string().min(1, \"Date requise\"),\r\n  heureDebut: z.string().min(1, \"D√©but requis\"),\r\n  heureFin: z.string().min(1, \"Fin requise\"),\r\n  cout: z.number().min(0),\r\n  outils_machette: z.boolean(),\r\n  outils_gourdin: z.boolean(),\r\n  outils_couteau: z.boolean(),\r\n  outils_autres: z.string().optional(),\r\n});\r\n\r\n// 3. Transport (Champ -> Village/Ferm)\r\nconst transportSchema = z.object({\r\n  dateTransport: z.string().min(1, \"Date requise\"),\r\n});\r\n\r\n// 4. Fermentation\r\nconst fermentationSchema = z.object({\r\n  dateDebut: z.string().min(1, \"D√©but requis\"),\r\n  dateFin: z.string().min(1, \"Fin requise\"),\r\n  materiel_feuilles: z.boolean(),\r\n  materiel_caisses: z.boolean(),\r\n  materiel_autres: z.string().optional(),\r\n});\r\n\r\n// 5. S√©chage\r\nconst sechageSchema = z.object({\r\n  dateDebut: z.string().min(1, \"D√©but requis\"),\r\n  dateFin: z.string().min(1, \"Fin requise\"),\r\n  aire_claie_bambou: z.boolean(),\r\n  aire_plastique_sol: z.boolean(),\r\n  aire_plastique_ciment: z.boolean(),\r\n  aire_cimentee: z.boolean(),\r\n  aire_ensachage: z.boolean(),\r\n});\r\n\r\n// 6. Ensachage\r\nconst ensachageSchema = z.object({\r\n  dateDebut: z.string().min(1, \"D√©but requis\"),\r\n  dateFin: z.string().min(1, \"Fin requise\"),\r\n  nbSacs: z.number().min(1, \"Au moins 1 sac\"),\r\n  poidsEstimatif: z.number().min(0),\r\n  lieuStockage: z.enum([\"Bon\", \"Acceptable\", \"Mauvais\"]),\r\n  dateLivraison: z.string().min(1, \"Date livraison requise\"),\r\n});\r\n\r\n// 7. Manutention (R√©ception)\r\nconst manutentionSchema = z.object({\r\n  dechargement: z.boolean(),\r\n  sonde: z.boolean(),\r\n  pesee: z.number().min(0, \"Poids requis\"),\r\n  analyse: z.boolean(),\r\n  validation: z.enum([\"Accept√©\", \"Refoul√©\", \"A reconditionner\"]),\r\n});\r\n\r\n// 8. Paiement\r\nconst paiementSchema = z.object({\r\n  especes: z.boolean(), montantEspeces: z.number().optional(),\r\n  cheque: z.boolean(), montantCheque: z.number().optional(), numeroCheque: z.string().optional(), banque: z.string().optional(),\r\n  \r\n  retenueMec: z.boolean(), tauxMec: z.number().optional(),\r\n  retenueEpargne: z.boolean(), tauxEpargne: z.number().optional(),\r\n});\r\n\r\nconst steps = [\r\n  { id: 1, name: \"Ident.\", icon: User },\r\n  { id: 2, name: \"R√©colte\", icon: Leaf },\r\n  { id: 3, name: \"√âcabossage\", icon: Scissors },\r\n  { id: 4, name: \"Transport\", icon: Truck },\r\n  { id: 5, name: \"Fermentation\", icon: Wind },\r\n  { id: 6, name: \"S√©chage\", icon: Sun },\r\n  { id: 7, name: \"Ensachage\", icon: Package },\r\n  { id: 8, name: \"Manutention\", icon: Scale },\r\n  { id: 9, name: \"Paiement\", icon: Banknote },\r\n];\r\n\r\nexport default function OperationForm() {\r\n  const navigate = useNavigate();\r\n  const [currentStep, setCurrentStep] = useState(1);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  \r\n  // √âtats pour les donn√©es dynamiques\r\n  const [producteurs, setProducteurs] = useState<Producteur[]>([]);\r\n  const [allParcelles, setAllParcelles] = useState<Parcelle[]>([]);\r\n  const [filteredParcelles, setFilteredParcelles] = useState<Parcelle[]>([]);\r\n  const [agents, setAgents] = useState<Agent[]>([]);\r\n\r\n  const form0 = useForm({ resolver: zodResolver(identificationSchema) });\r\n  const form1 = useForm({ resolver: zodResolver(recolteSchema) });\r\n  const form2 = useForm({ resolver: zodResolver(ecabossageSchema), defaultValues: { outils_machette: false, outils_gourdin: false, outils_couteau: false, cout: 0 } });\r\n  const form3 = useForm({ resolver: zodResolver(transportSchema) });\r\n  const form4 = useForm({ resolver: zodResolver(fermentationSchema), defaultValues: { materiel_feuilles: false, materiel_caisses: false } });\r\n  const form5 = useForm({ resolver: zodResolver(sechageSchema), defaultValues: { aire_claie_bambou: false, aire_plastique_sol: false, aire_plastique_ciment: false, aire_cimentee: false, aire_ensachage: false } });\r\n  const form6 = useForm({ resolver: zodResolver(ensachageSchema), defaultValues: { nbSacs: 0, poidsEstimatif: 0 } });\r\n  const form7 = useForm({ resolver: zodResolver(manutentionSchema), defaultValues: { dechargement: false, sonde: false, analyse: false, pesee: 0, validation: \"Accept√©\" } });\r\n  const form8 = useForm({ resolver: zodResolver(paiementSchema), defaultValues: { especes: false, cheque: false, retenueMec: false, retenueEpargne: false } });\r\n\r\n  // Chargement des donn√©es au montage\r\n  useEffect(() => {\r\n    const loadData = async () => {\r\n      try {\r\n        const [prods, parcs, agts] = await Promise.all([\r\n          api.getProducteurs(),\r\n          api.getParcelles(),\r\n          agentService.getAgents()\r\n        ]);\r\n        setProducteurs(prods);\r\n        setAllParcelles(parcs);\r\n        setAgents(agts.filter(a => a.statut === 'actif'));\r\n      } catch (error) {\r\n        console.error(\"Erreur chargement donn√©es:\", error);\r\n        toast.error(\"Impossible de charger la liste des producteurs\");\r\n      }\r\n    };\r\n    loadData();\r\n  }, []);\r\n\r\n  // Filtrage des parcelles quand un producteur est s√©lectionn√©\r\n  const selectedProducteurId = form0.watch(\"idProducteur\");\r\n  useEffect(() => {\r\n    if (selectedProducteurId) {\r\n      const filtered = allParcelles.filter(p => p.id_producteur === selectedProducteurId);\r\n      setFilteredParcelles(filtered);\r\n      form0.setValue(\"idPlantation\", \"\"); // Reset plantation selection\r\n    } else {\r\n      setFilteredParcelles([]);\r\n    }\r\n  }, [selectedProducteurId, allParcelles, form0]);\r\n\r\n  const handleNext = async () => {\r\n    // ... (reste identique)\r\n    let isValid = false;\r\n    switch (currentStep) {\r\n      case 1: isValid = await form0.trigger(); break;\r\n      case 2: isValid = await form1.trigger(); break;\r\n      case 3: isValid = await form2.trigger(); break;\r\n      case 4: isValid = await form3.trigger(); break;\r\n      case 5: isValid = await form4.trigger(); break;\r\n      case 6: isValid = await form5.trigger(); break;\r\n      case 7: isValid = await form6.trigger(); break;\r\n      case 8: isValid = await form7.trigger(); break;\r\n      case 9: isValid = await form8.trigger(); break;\r\n    }\r\n    if (isValid) {\r\n      if (currentStep < 9) setCurrentStep(c => c + 1);\r\n      else handleSubmit();\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    setIsSubmitting(true);\r\n    try {\r\n        const identificationData = form0.getValues();\r\n        const data = {\r\n          identification: {\r\n            ...identificationData,\r\n            idAgent: identificationData.idAgent || null, // Envoyer null si vide\r\n          },\r\n          recolte: form1.getValues(),\r\n          ecabossage: form2.getValues(),\r\n          transport: form3.getValues(),\r\n          fermentation: form4.getValues(),\r\n          sechage: form5.getValues(),\r\n          ensachage: form6.getValues(),\r\n          manutention: form7.getValues(),\r\n          paiement: form8.getValues(),\r\n        };\r\n        \r\n        console.log('üìã Donn√©es du formulaire:', data);\r\n        await api.createOperation(data);\r\n        toast.success(\"Op√©ration enregistr√©e avec succ√®s\");\r\n        navigate(\"/operations\");\r\n    } catch (error: any) {\r\n        console.error('‚ùå Erreur compl√®te:', error);\r\n        const errorMessage = error?.message || \"Erreur lors de l'enregistrement\";\r\n        toast.error(errorMessage);\r\n    } finally {\r\n        setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const renderStepContent = () => {\r\n    switch (currentStep) {\r\n      case 1: // Identification\r\n        return (\r\n          <div className=\"space-y-6\">\r\n             <div className=\"bg-blue-50 p-4 rounded-lg flex items-start gap-3 text-sm text-blue-800\">\r\n                <Info className=\"h-5 w-5 shrink-0 mt-0.5\" />\r\n                <p>Veuillez identifier le producteur et la parcelle concern√©e par cette op√©ration de collecte.</p>\r\n             </div>\r\n             <div className=\"space-y-2\">\r\n               <Label>Producteur *</Label>\r\n               <Select onValueChange={v => form0.setValue(\"idProducteur\", v)} value={form0.watch(\"idProducteur\")}>\r\n                 <SelectTrigger><SelectValue placeholder=\"Rechercher un producteur...\" /></SelectTrigger>\r\n                 <SelectContent>\r\n                   {producteurs.map((prod) => (\r\n                     <SelectItem key={prod.id} value={prod.id}>\r\n                       {prod.nom_complet} ({prod.code})\r\n                     </SelectItem>\r\n                   ))}\r\n                 </SelectContent>\r\n               </Select>\r\n             </div>\r\n             <div className=\"space-y-2\">\r\n               <Label>Plantation Concern√©e *</Label>\r\n               <Select onValueChange={v => form0.setValue(\"idPlantation\", v)} value={form0.watch(\"idPlantation\")} disabled={!selectedProducteurId}>\r\n                 <SelectTrigger><SelectValue placeholder=\"Choisir une plantation...\" /></SelectTrigger>\r\n                 <SelectContent>\r\n                   {filteredParcelles.length === 0 ? (\r\n                     <SelectItem value=\"none\" disabled>Aucune plantation trouv√©e pour ce producteur</SelectItem>\r\n                   ) : (\r\n                     filteredParcelles.map((parc) => (\r\n                       <SelectItem key={parc.id} value={parc.id}>\r\n                         {parc.code} ({parc.superficie_declaree} Ha)\r\n                       </SelectItem>\r\n                     ))\r\n                   )}\r\n                 </SelectContent>\r\n               </Select>\r\n             </div>\r\n             <div className=\"space-y-2\">\r\n               <Label>Agent de Collecte</Label>\r\n               <Select onValueChange={v => form0.setValue(\"idAgent\", v)} value={form0.watch(\"idAgent\")}>\r\n                 <SelectTrigger><SelectValue placeholder=\"S√©lectionner un agent (optionnel)...\" /></SelectTrigger>\r\n                 <SelectContent>\r\n                   <SelectItem value=\"\">Aucun agent</SelectItem>\r\n                   {agents.map((agent) => (\r\n                     <SelectItem key={agent.id} value={agent.id}>\r\n                       {agent.nom} {agent.prenom} ({agent.code})\r\n                     </SelectItem>\r\n                   ))}\r\n                 </SelectContent>\r\n               </Select>\r\n               <p className=\"text-xs text-muted-foreground\">L'agent qui a effectu√© cette collecte</p>\r\n             </div>\r\n          </div>\r\n        );\r\n      \r\n      case 2: // R√©colte\r\n        return (\r\n          <div className=\"space-y-6\">\r\n             <div className=\"grid gap-4 border p-4 rounded\">\r\n               <Label className=\"font-bold\">R√©colte 1 (Principale)</Label>\r\n               <p className=\"text-xs text-muted-foreground -mt-2 mb-2\">Date de la premi√®re r√©colte des cabosses.</p>\r\n               <DateInput label=\"Date\" value={form1.watch(\"dateRecolte1\")} onChange={v => form1.setValue(\"dateRecolte1\", v)} />\r\n               <PhotoCapture label=\"Photo\" value={form1.watch(\"photoRecolte1\")} onChange={v => form1.setValue(\"photoRecolte1\", v)} />\r\n             </div>\r\n             <div className=\"grid gap-4 border p-4 rounded\">\r\n               <Label className=\"font-bold\">R√©colte 2 (Compl√©mentaire)</Label>\r\n               <DateInput label=\"Date\" value={form1.watch(\"dateRecolte2\")} onChange={v => form1.setValue(\"dateRecolte2\", v)} />\r\n               <PhotoCapture label=\"Photo\" value={form1.watch(\"photoRecolte2\")} onChange={v => form1.setValue(\"photoRecolte2\", v)} />\r\n             </div>\r\n             <div className=\"grid gap-4 border p-4 rounded\">\r\n               <Label className=\"font-bold\">R√©colte 3</Label>\r\n               <DateInput label=\"Date\" value={form1.watch(\"dateRecolte3\")} onChange={v => form1.setValue(\"dateRecolte3\", v)} />\r\n               <PhotoCapture label=\"Photo\" value={form1.watch(\"photoRecolte3\")} onChange={v => form1.setValue(\"photoRecolte3\", v)} />\r\n             </div>\r\n          </div>\r\n        );\r\n      case 3: // Ecabossage\r\n        return (\r\n          <div className=\"space-y-6\">\r\n             <div className=\"bg-yellow-50 p-4 rounded-lg flex items-start gap-3 text-sm text-yellow-800\">\r\n                <Info className=\"h-5 w-5 shrink-0 mt-0.5\" />\r\n                <p>L'√©cabossage doit id√©alement avoir lieu dans les 5 jours suivant la r√©colte pour garantir la qualit√©.</p>\r\n             </div>\r\n            <DateInput label=\"Date Ecabossage\" value={form2.watch(\"dateEcabossage\")} onChange={v => form2.setValue(\"dateEcabossage\", v)} />\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div><Label>D√©but</Label><Input type=\"time\" {...form2.register(\"heureDebut\")} /></div>\r\n              <div><Label>Fin</Label><Input type=\"time\" {...form2.register(\"heureFin\")} /></div>\r\n            </div>\r\n            <div><Label>Co√ªt (FCFA)</Label><Input type=\"number\" {...form2.register(\"cout\", { valueAsNumber: true })} /></div>\r\n            <div className=\"space-y-2\">\r\n              <Label className=\"font-bold\">Outils utilis√©s</Label>\r\n              <div className=\"flex gap-4 flex-wrap\">\r\n                <div className=\"flex items-center gap-2\"><Checkbox checked={form2.watch(\"outils_machette\")} onCheckedChange={c => form2.setValue(\"outils_machette\", !!c)} /><Label>Machette</Label></div>\r\n                <div className=\"flex items-center gap-2\"><Checkbox checked={form2.watch(\"outils_gourdin\")} onCheckedChange={c => form2.setValue(\"outils_gourdin\", !!c)} /><Label>Gourdin</Label></div>\r\n                <div className=\"flex items-center gap-2\"><Checkbox checked={form2.watch(\"outils_couteau\")} onCheckedChange={c => form2.setValue(\"outils_couteau\", !!c)} /><Label>Couteau</Label></div>\r\n              </div>\r\n              <Input placeholder=\"Autres...\" {...form2.register(\"outils_autres\")} />\r\n            </div>\r\n          </div>\r\n        );\r\n      case 4: // Transport\r\n        return (\r\n          <div className=\"space-y-4\">\r\n             <div className=\"bg-muted p-4 rounded-lg text-sm text-muted-foreground\">\r\n                <p>Transport des f√®ves fra√Æches du champ vers le site de fermentation (village ou centre).</p>\r\n             </div>\r\n             <DateInput label=\"Date Transport\" value={form3.watch(\"dateTransport\")} onChange={v => form3.setValue(\"dateTransport\", v)} />\r\n          </div>\r\n        );\r\n      case 5: // Fermentation\r\n        return (\r\n          <div className=\"space-y-6\">\r\n             <div className=\"bg-green-50 p-4 rounded-lg flex items-start gap-3 text-sm text-green-800\">\r\n                <Info className=\"h-5 w-5 shrink-0 mt-0.5\" />\r\n                <p>La fermentation dure en moyenne 6 jours. Assurez-vous que la date de d√©but suit l'√©cabossage.</p>\r\n             </div>\r\n             <div className=\"grid grid-cols-2 gap-4\">\r\n               <DateInput label=\"Date D√©but\" value={form4.watch(\"dateDebut\")} onChange={v => form4.setValue(\"dateDebut\", v)} />\r\n               <DateInput label=\"Date Fin\" value={form4.watch(\"dateFin\")} onChange={v => form4.setValue(\"dateFin\", v)} />\r\n             </div>\r\n             <div className=\"space-y-2\">\r\n               <Label className=\"font-bold\">Mat√©riel utilis√©</Label>\r\n               <div className=\"flex gap-4 flex-wrap\">\r\n                 <div className=\"flex items-center gap-2\"><Checkbox checked={form4.watch(\"materiel_feuilles\")} onCheckedChange={c => form4.setValue(\"materiel_feuilles\", !!c)} /><Label>Feuilles de bananier</Label></div>\r\n                 <div className=\"flex items-center gap-2\"><Checkbox checked={form4.watch(\"materiel_caisses\")} onCheckedChange={c => form4.setValue(\"materiel_caisses\", !!c)} /><Label>Caisses de fermentation</Label></div>\r\n               </div>\r\n               <Input placeholder=\"Autres...\" {...form4.register(\"materiel_autres\")} />\r\n             </div>\r\n          </div>\r\n        );\r\n      case 6: // S√©chage\r\n        return (\r\n          <div className=\"space-y-6\">\r\n            <div className=\"bg-orange-50 p-4 rounded-lg flex items-start gap-3 text-sm text-orange-800\">\r\n                <Info className=\"h-5 w-5 shrink-0 mt-0.5\" />\r\n                <p>Le s√©chage commence imm√©diatement apr√®s la fin de la fermentation.</p>\r\n             </div>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n               <DateInput label=\"Date D√©but\" value={form5.watch(\"dateDebut\")} onChange={v => form5.setValue(\"dateDebut\", v)} />\r\n               <DateInput label=\"Date Fin (estim√©e)\" value={form5.watch(\"dateFin\")} onChange={v => form5.setValue(\"dateFin\", v)} />\r\n             </div>\r\n             <div className=\"space-y-2\">\r\n               <Label className=\"font-bold\">Aire de s√©chage</Label>\r\n               <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\r\n                 <div className=\"flex items-center gap-2\"><Checkbox checked={form5.watch(\"aire_claie_bambou\")} onCheckedChange={c => form5.setValue(\"aire_claie_bambou\", !!c)} /><Label>Claie en bambou</Label></div>\r\n                 <div className=\"flex items-center gap-2\"><Checkbox checked={form5.watch(\"aire_plastique_sol\")} onCheckedChange={c => form5.setValue(\"aire_plastique_sol\", !!c)} /><Label>Plastique sur sol</Label></div>\r\n                 <div className=\"flex items-center gap-2\"><Checkbox checked={form5.watch(\"aire_plastique_ciment\")} onCheckedChange={c => form5.setValue(\"aire_plastique_ciment\", !!c)} /><Label>Plastique sur aire ciment√©e</Label></div>\r\n                 <div className=\"flex items-center gap-2\"><Checkbox checked={form5.watch(\"aire_cimentee\")} onCheckedChange={c => form5.setValue(\"aire_cimentee\", !!c)} /><Label>Aire ciment√©e</Label></div>\r\n                 <div className=\"flex items-center gap-2\"><Checkbox checked={form5.watch(\"aire_ensachage\")} onCheckedChange={c => form5.setValue(\"aire_ensachage\", !!c)} /><Label>Ensachage direct</Label></div>\r\n               </div>\r\n             </div>\r\n          </div>\r\n        );\r\n      case 7: // Ensachage\r\n        return (\r\n           <div className=\"space-y-6\">\r\n             <div className=\"grid grid-cols-2 gap-4\">\r\n               <DateInput label=\"D√©but Ensachage\" value={form6.watch(\"dateDebut\")} onChange={v => form6.setValue(\"dateDebut\", v)} />\r\n               <DateInput label=\"Fin Ensachage\" value={form6.watch(\"dateFin\")} onChange={v => form6.setValue(\"dateFin\", v)} />\r\n             </div>\r\n             <div className=\"grid grid-cols-2 gap-4\">\r\n               <div><Label>Nombre de sacs brousse</Label><Input type=\"number\" {...form6.register(\"nbSacs\", { valueAsNumber: true })} /></div>\r\n               <div><Label>Poids estimatif (Kg)</Label><Input type=\"number\" {...form6.register(\"poidsEstimatif\", { valueAsNumber: true })} /></div>\r\n             </div>\r\n             <div>\r\n               <Label>Lieu de stockage (√âtat)</Label>\r\n               <Select onValueChange={v => form6.setValue(\"lieuStockage\", v as any)}><SelectTrigger><SelectValue placeholder=\"Choisir...\" /></SelectTrigger><SelectContent><SelectItem value=\"Bon\">Bon</SelectItem><SelectItem value=\"Acceptable\">Acceptable</SelectItem><SelectItem value=\"Mauvais\">Mauvais</SelectItem></SelectContent></Select>\r\n             </div>\r\n             <div className=\"border-t pt-4\">\r\n                <Label className=\"font-bold mb-2 block\">Livraison au Magasin / Acheteur</Label>\r\n                <DateInput label=\"Date Livraison\" value={form6.watch(\"dateLivraison\")} onChange={v => form6.setValue(\"dateLivraison\", v)} />\r\n             </div>\r\n           </div>\r\n        );\r\n      case 8: // Manutention\r\n        return (\r\n          <div className=\"space-y-6\">\r\n            <div className=\"flex flex-col gap-3\">\r\n               <div className=\"flex items-center gap-2\"><Checkbox checked={form7.watch(\"dechargement\")} onCheckedChange={c => form7.setValue(\"dechargement\", !!c)} /><Label>D√©chargement effectu√©</Label></div>\r\n               <div className=\"flex items-center gap-2\"><Checkbox checked={form7.watch(\"sonde\")} onCheckedChange={c => form7.setValue(\"sonde\", !!c)} /><Label>Sonde effectu√©e</Label></div>\r\n               <div className=\"flex items-center gap-2\"><Checkbox checked={form7.watch(\"analyse\")} onCheckedChange={c => form7.setValue(\"analyse\", !!c)} /><Label>Analyse Produit effectu√©e</Label></div>\r\n            </div>\r\n            <div><Label>Pes√©e valid√©e (Kg)</Label><Input type=\"number\" {...form7.register(\"pesee\", { valueAsNumber: true })} /></div>\r\n            <div>\r\n              <Label>Validation du Produit</Label>\r\n              <Select onValueChange={v => form7.setValue(\"validation\", v as any)} defaultValue=\"Accept√©\">\r\n                <SelectTrigger><SelectValue /></SelectTrigger>\r\n                <SelectContent>\r\n                  <SelectItem value=\"Accept√©\" className=\"text-green-600\">Accept√©</SelectItem>\r\n                  <SelectItem value=\"Refoul√©\" className=\"text-red-600\">Refoul√©</SelectItem>\r\n                  <SelectItem value=\"A reconditionner\" className=\"text-orange-600\">A reconditionner</SelectItem>\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n          </div>\r\n        );\r\n      case 9: // Paiement\r\n        return (\r\n          <div className=\"space-y-6\">\r\n            <div className=\"border p-4 rounded space-y-3\">\r\n               <div className=\"flex items-center gap-2\"><Checkbox checked={form8.watch(\"especes\")} onCheckedChange={c => form8.setValue(\"especes\", !!c)} /><Label className=\"font-bold\">Esp√®ces</Label></div>\r\n               {form8.watch(\"especes\") && <Input placeholder=\"Montant FCFA\" type=\"number\" {...form8.register(\"montantEspeces\", { valueAsNumber: true })} />}\r\n            </div>\r\n            <div className=\"border p-4 rounded space-y-3\">\r\n               <div className=\"flex items-center gap-2\"><Checkbox checked={form8.watch(\"cheque\")} onCheckedChange={c => form8.setValue(\"cheque\", !!c)} /><Label className=\"font-bold\">Ch√®que</Label></div>\r\n               {form8.watch(\"cheque\") && (\r\n                 <div className=\"grid grid-cols-1 gap-3\">\r\n                   <Input placeholder=\"Montant FCFA\" type=\"number\" {...form8.register(\"montantCheque\", { valueAsNumber: true })} />\r\n                   <Input placeholder=\"Num√©ro Ch√®que\" {...form8.register(\"numeroCheque\")} />\r\n                   <Input placeholder=\"Banque\" {...form8.register(\"banque\")} />\r\n                 </div>\r\n               )}\r\n            </div>\r\n            <div className=\"border-t pt-4 space-y-3\">\r\n               <Label className=\"font-bold block\">Retenues</Label>\r\n               <div className=\"flex items-center gap-4\">\r\n                 <Checkbox checked={form8.watch(\"retenueMec\")} onCheckedChange={c => form8.setValue(\"retenueMec\", !!c)} />\r\n                 <Label>MEC</Label>\r\n                 {form8.watch(\"retenueMec\") && <Input className=\"w-32\" placeholder=\"Taux/Kg\" type=\"number\" {...form8.register(\"tauxMec\", { valueAsNumber: true })} />}\r\n               </div>\r\n               <div className=\"flex items-center gap-4\">\r\n                 <Checkbox checked={form8.watch(\"retenueEpargne\")} onCheckedChange={c => form8.setValue(\"retenueEpargne\", !!c)} />\r\n                 <Label>Autres (Epargne)</Label>\r\n                 {form8.watch(\"retenueEpargne\") && <Input className=\"w-32\" placeholder=\"Taux/Kg\" type=\"number\" {...form8.register(\"tauxEpargne\", { valueAsNumber: true })} />}\r\n               </div>\r\n            </div>\r\n          </div>\r\n        );\r\n    }\r\n  };\r\n\r\n\r\n  const CurrentStepIcon = steps[currentStep - 1].icon;\r\n  const progress = (currentStep / steps.length) * 100;\r\n\r\n  return (\r\n    <div className=\"container mx-auto p-6 max-w-4xl\">\r\n      <div className=\"mb-6\">\r\n        <Button variant=\"ghost\" onClick={() => navigate(\"/operations\")} className=\"mb-4\">\r\n          <ArrowLeft className=\"mr-2 h-4 w-4\" />\r\n          Retour\r\n        </Button>\r\n        <h1 className=\"text-3xl font-bold text-foreground\">Nouvelle Op√©ration</h1>\r\n        <p className=\"text-muted-foreground mt-2\">Flux complet de la r√©colte au paiement</p>\r\n      </div>\r\n\r\n      <div className=\"mb-8\">\r\n        <div className=\"flex justify-between items-center mb-4 overflow-x-auto pb-2\">\r\n          {steps.map((step) => {\r\n            const isCompleted = step.id < currentStep;\r\n            const isCurrent = step.id === currentStep;\r\n            const StepIcon = step.icon;\r\n            return (\r\n              <div key={step.id} className=\"flex flex-col items-center min-w-[80px]\">\r\n                <div className={`w-10 h-10 rounded-full flex items-center justify-center ${isCompleted ? \"bg-green-500 text-white\" : isCurrent ? \"bg-primary text-white\" : \"bg-muted text-muted-foreground\"}`}>\r\n                  {isCompleted ? <Check className=\"h-5 w-5\" /> : <StepIcon className=\"h-5 w-5\" />}\r\n                </div>\r\n                <span className={`text-xs mt-1 font-medium ${isCurrent ? \"text-primary\" : \"text-muted-foreground\"}`}>{step.name}</span>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n        <Progress value={progress} className=\"h-2\" />\r\n      </div>\r\n\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle className=\"flex items-center gap-2\">\r\n            <CurrentStepIcon className=\"h-6 w-6 text-primary\" />\r\n            {steps[currentStep - 1].name}\r\n          </CardTitle>\r\n        </CardHeader>\r\n        <CardContent>\r\n          {renderStepContent()}\r\n          <div className=\"flex justify-between mt-8 pt-4 border-t\">\r\n            <Button variant=\"outline\" onClick={() => setCurrentStep(c => Math.max(1, c - 1))} disabled={currentStep === 1}>\r\n              Pr√©c√©dent\r\n            </Button>\r\n            <Button onClick={handleNext}>\r\n              {currentStep === steps.length ? \"Terminer\" : \"Suivant\"}\r\n            </Button>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\pages\\Operations.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":49,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":49,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1292,1295],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1292,1295],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":73,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":73,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2311,2314],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2311,2314],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":84,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":84,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2650,2653],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2650,2653],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Progress } from \"@/components/ui/progress\";\r\nimport { \r\n  Plus, User, MapPin, CheckCircle2, Circle, \r\n  Loader2, Search, Filter \r\n} from \"lucide-react\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { api } from \"@/services/api\";\r\nimport { useState, useEffect } from \"react\";\r\n\r\n// Type √©tendu pour inclure les relations\r\ninterface OperationWithRelations {\r\n  id: string;\r\n  statut: string;\r\n  campagne?: string;\r\n  \r\n  // Dates des √©tapes\r\n  date_recolte_1?: string | Date;\r\n  date_ecabossage?: string | Date;\r\n  fermentation_debut?: string | Date;\r\n  fermentation_fin?: string | Date;\r\n  sechage_debut?: string | Date;\r\n  sechage_fin?: string | Date;\r\n  date_transport?: string | Date;\r\n  date_livraison?: string | Date;\r\n  date_paiement?: string | Date;\r\n  \r\n  // Donn√©es\r\n  manutention_pesee?: number;\r\n  montant_du?: number;\r\n  \r\n  // Relations\r\n  producteur?: {\r\n    nom_complet: string;\r\n  };\r\n  village?: {\r\n    nom: string;\r\n  };\r\n  agent?: {\r\n    nom: string;\r\n    prenom: string;\r\n    code: string;\r\n  };\r\n  \r\n  createdAt: string | Date;\r\n  [key: string]: any; // Pour les autres champs\r\n}\r\n\r\n// D√©finition des √©tapes du processus de collecte\r\nconst ETAPES = [\r\n  { id: 1, nom: \"R√©colte\", champs: [\"date_recolte_1\"] },\r\n  { id: 2, nom: \"√âcabossage\", champs: [\"date_ecabossage\"] },\r\n  { id: 3, nom: \"Fermentation\", champs: [\"fermentation_debut\", \"fermentation_fin\"] },\r\n  { id: 4, nom: \"S√©chage\", champs: [\"sechage_debut\", \"sechage_fin\"] },\r\n  { id: 5, nom: \"Transport\", champs: [\"date_transport\"] },\r\n  { id: 6, nom: \"Livraison\", champs: [\"date_livraison\", \"manutention_pesee\"] },\r\n  { id: 7, nom: \"Paiement\", champs: [\"date_paiement\", \"montant_du\"] },\r\n];\r\n\r\nexport default function Operations() {\r\n  const navigate = useNavigate();\r\n  const [operations, setOperations] = useState<OperationWithRelations[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  \r\n  useEffect(() => {\r\n    const loadData = async () => {\r\n      try {\r\n        const data = await api.getOperations();\r\n        setOperations(data as any); // Cast temporaire en attendant la mise √† jour du type API\r\n      } catch (error) {\r\n        console.error(\"Erreur chargement operations:\", error);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n    loadData();\r\n  }, []);\r\n\r\n  // Calculer la progression d'une op√©ration\r\n  const calculerProgression = (operation: any) => {\r\n    let etapesCompletes = 0;\r\n    \r\n    ETAPES.forEach(etape => {\r\n      const estComplete = etape.champs.every(champ => {\r\n        const valeur = operation[champ];\r\n        return valeur !== null && valeur !== undefined && valeur !== \"\";\r\n      });\r\n      if (estComplete) etapesCompletes++;\r\n    });\r\n\r\n    return {\r\n      etapesCompletes,\r\n      totalEtapes: ETAPES.length,\r\n      pourcentage: Math.round((etapesCompletes / ETAPES.length) * 100),\r\n      etapeActuelle: etapesCompletes < ETAPES.length ? ETAPES[etapesCompletes].nom : \"Termin√©\"\r\n    };\r\n  };\r\n\r\n  // Obtenir la couleur du badge selon le statut\r\n  const getStatutColor = (statut: string) => {\r\n    switch (statut) {\r\n      case \"Pay√©\":\r\n        return \"bg-green-600 hover:bg-green-700\";\r\n      case \"Valid√©\":\r\n        return \"bg-blue-600 hover:bg-blue-700\";\r\n      case \"Brouillon\":\r\n        return \"bg-orange-500 hover:bg-orange-600\";\r\n      case \"Annul√©\":\r\n        return \"bg-red-600 hover:bg-red-700\";\r\n      default:\r\n        return \"bg-gray-600 hover:bg-gray-700\";\r\n    }\r\n  };\r\n\r\n  // Filtrer les op√©rations\r\n  const filteredOperations = operations.filter(op => {\r\n    if (!searchQuery) return true;\r\n    const query = searchQuery.toLowerCase();\r\n    return (\r\n      op.id.toLowerCase().includes(query) ||\r\n      op.producteur?.nom_complet?.toLowerCase().includes(query) ||\r\n      op.agent?.nom?.toLowerCase().includes(query) ||\r\n      op.agent?.prenom?.toLowerCase().includes(query)\r\n    );\r\n  });\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-6\">\r\n      {/* En-t√™te */}\r\n      <div className=\"flex justify-between items-start\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold text-foreground\">Op√©rations de Collecte</h1>\r\n          <p className=\"text-muted-foreground mt-1\">\r\n            Suivi des op√©rations terrain ({filteredOperations.length})\r\n          </p>\r\n        </div>\r\n        <Button className=\"gap-2\" onClick={() => navigate(\"/operations/nouveau\")}>\r\n          <Plus className=\"h-4 w-4\" />\r\n          Nouvelle Op√©ration\r\n        </Button>\r\n      </div>\r\n\r\n      {/* Barre de recherche */}\r\n      <div className=\"flex gap-4\">\r\n        <div className=\"relative flex-1\">\r\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n          <Input\r\n            placeholder=\"Rechercher par producteur, agent, num√©ro...\"\r\n            value={searchQuery}\r\n            onChange={(e) => setSearchQuery(e.target.value)}\r\n            className=\"pl-10\"\r\n          />\r\n        </div>\r\n        <Button variant=\"outline\" className=\"gap-2\">\r\n          <Filter className=\"h-4 w-4\" />\r\n          Filtres\r\n        </Button>\r\n      </div>\r\n\r\n      {/* Liste des op√©rations */}\r\n      <div className=\"space-y-4\">\r\n        {isLoading ? (\r\n          <div className=\"flex justify-center py-12\">\r\n            <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\r\n          </div>\r\n        ) : filteredOperations.length === 0 ? (\r\n          <div className=\"text-center p-12 border-2 border-dashed rounded-lg\">\r\n            <p className=\"text-muted-foreground\">\r\n              {searchQuery ? \"Aucune op√©ration trouv√©e\" : \"Aucune op√©ration enregistr√©e\"}\r\n            </p>\r\n          </div>\r\n        ) : (\r\n          filteredOperations.map((operation) => {\r\n            const progression = calculerProgression(operation);\r\n            \r\n            return (\r\n              <Card \r\n                key={operation.id} \r\n                className=\"shadow-card hover:shadow-elevated transition-all cursor-pointer\"\r\n                onClick={() => navigate(`/operations/${operation.id}`)}\r\n              >\r\n                <CardContent className=\"p-6\">\r\n                  <div className=\"space-y-4\">\r\n                    {/* En-t√™te de la card */}\r\n                    <div className=\"flex items-start justify-between\">\r\n                      <div className=\"flex-1\">\r\n                        <div className=\"flex items-center gap-3 mb-2\">\r\n                          <h3 className=\"text-lg font-semibold\">\r\n                            #{operation.id.slice(-8).toUpperCase()}\r\n                          </h3>\r\n                          <Badge className={getStatutColor(operation.statut)}>\r\n                            {operation.statut}\r\n                          </Badge>\r\n                          {operation.campagne && (\r\n                            <Badge variant=\"outline\" className=\"font-mono text-xs\">\r\n                              {operation.campagne}\r\n                            </Badge>\r\n                          )}\r\n                        </div>\r\n                        \r\n                        {/* Producteur */}\r\n                        <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\r\n                          <User className=\"h-4 w-4\" />\r\n                          <span className=\"font-medium\">\r\n                            {operation.producteur?.nom_complet || \"Producteur inconnu\"}\r\n                          </span>\r\n                        </div>\r\n\r\n                        {/* Village */}\r\n                        {operation.village && (\r\n                          <div className=\"flex items-center gap-2 text-sm text-muted-foreground mt-1\">\r\n                            <MapPin className=\"h-4 w-4\" />\r\n                            <span>{operation.village.nom}</span>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n\r\n                      {/* Agent */}\r\n                      <div className=\"text-right\">\r\n                        <p className=\"text-xs text-muted-foreground mb-1\">Agent collecteur</p>\r\n                        {operation.agent ? (\r\n                          <div className=\"flex items-center gap-2 justify-end\">\r\n                            <div className=\"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center\">\r\n                              <User className=\"h-4 w-4 text-primary\" />\r\n                            </div>\r\n                            <div className=\"text-right\">\r\n                              <p className=\"font-medium text-sm\">\r\n                                {operation.agent.nom} {operation.agent.prenom}\r\n                              </p>\r\n                              <p className=\"text-xs text-muted-foreground\">\r\n                                {operation.agent.code}\r\n                              </p>\r\n                            </div>\r\n                          </div>\r\n                        ) : (\r\n                          <p className=\"text-sm text-muted-foreground italic\">Non assign√©</p>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Progression */}\r\n                    <div className=\"space-y-2\">\r\n                      <div className=\"flex items-center justify-between text-sm\">\r\n                        <span className=\"text-muted-foreground\">\r\n                          Progression : {progression.etapesCompletes}/{progression.totalEtapes} √©tapes\r\n                        </span>\r\n                        <span className=\"font-medium text-primary\">\r\n                          {progression.pourcentage}%\r\n                        </span>\r\n                      </div>\r\n                      \r\n                      <Progress value={progression.pourcentage} className=\"h-2\" />\r\n                      \r\n                      {/* √âtapes */}\r\n                      <div className=\"flex items-center justify-between pt-2\">\r\n                        {ETAPES.map((etape, index) => {\r\n                          const estComplete = index < progression.etapesCompletes;\r\n                          const estEnCours = index === progression.etapesCompletes;\r\n                          \r\n                          return (\r\n                            <div key={etape.id} className=\"flex flex-col items-center gap-1\">\r\n                              {estComplete ? (\r\n                                <CheckCircle2 className=\"h-5 w-5 text-green-600\" />\r\n                              ) : estEnCours ? (\r\n                                <Circle className=\"h-5 w-5 text-primary fill-primary/20\" />\r\n                              ) : (\r\n                                <Circle className=\"h-5 w-5 text-muted-foreground/30\" />\r\n                              )}\r\n                              <span \r\n                                className={`text-xs ${\r\n                                  estComplete \r\n                                    ? \"text-green-600 font-medium\" \r\n                                    : estEnCours \r\n                                    ? \"text-primary font-medium\" \r\n                                    : \"text-muted-foreground/50\"\r\n                                }`}\r\n                              >\r\n                                {etape.nom}\r\n                              </span>\r\n                            </div>\r\n                          );\r\n                        })}\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Informations suppl√©mentaires */}\r\n                    <div className=\"flex items-center justify-between pt-3 border-t\">\r\n                      <div className=\"flex items-center gap-4 text-sm text-muted-foreground\">\r\n                        {operation.manutention_pesee && (\r\n                          <div>\r\n                            <span className=\"font-medium text-foreground\">\r\n                              {operation.manutention_pesee} Kg\r\n                            </span>\r\n                          </div>\r\n                        )}\r\n                        {operation.montant_du && (\r\n                          <div>\r\n                            <span className=\"font-medium text-foreground\">\r\n                              {operation.montant_du.toLocaleString()} FCFA\r\n                            </span>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                      \r\n                      <div className=\"text-xs text-muted-foreground\">\r\n                        Cr√©√© le {new Date(operation.createdAt).toLocaleDateString('fr-FR')}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </CardContent>\r\n              </Card>\r\n            );\r\n          })\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\pages\\OrganisationDetails.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\pages\\OrganisationForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\pages\\OrganisationMembres.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadMembres'. Either include it or remove the dependency array.","line":52,"column":6,"nodeType":"ArrayExpression","endLine":52,"endColumn":13,"suggestions":[{"desc":"Update the dependencies array to be: [loadMembres, orgId]","fix":{"range":[1845,1852],"text":"[loadMembres, orgId]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from \"react\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableHeader,\r\n  TableRow,\r\n} from \"@/components/ui/table\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogTrigger,\r\n} from \"@/components/ui/dialog\";\r\nimport { ArrowLeft, Plus, Search, Users, Trash2, Edit } from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\nimport type { MembreOrganisation } from \"@/types/organisation\";\r\nimport { membreOrganisationService, organisationService } from \"@/services/organisationService\";\r\n\r\nexport default function OrganisationMembres() {\r\n  const navigate = useNavigate();\r\n  const { orgId } = useParams<{ orgId: string }>();\r\n  const [membres, setMembres] = useState<MembreOrganisation[]>([]);\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\r\n  const [editingMembre, setEditingMembre] = useState<MembreOrganisation | null>(null);\r\n\r\n  // Formulaire\r\n  const [formData, setFormData] = useState({\r\n    id_membre: \"\",\r\n    role: \"membre\" as MembreOrganisation['role'],\r\n    date_adhesion: new Date().toISOString().split('T')[0],\r\n    statut: \"actif\" as MembreOrganisation['statut'],\r\n    notes: \"\",\r\n  });\r\n\r\n  const organisation = orgId ? organisationService.getById(orgId) : null;\r\n\r\n  useEffect(() => {\r\n    if (orgId) {\r\n      loadMembres();\r\n    }\r\n  }, [orgId]);\r\n\r\n  const loadMembres = () => {\r\n    if (orgId) {\r\n      const data = membreOrganisationService.getByOrganisation(orgId);\r\n      setMembres(data);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (!orgId) return;\r\n\r\n    try {\r\n      if (editingMembre) {\r\n        membreOrganisationService.update(editingMembre.id, {\r\n          ...formData,\r\n          date_adhesion: new Date(formData.date_adhesion),\r\n        });\r\n        toast.success(\"Membre mis √† jour avec succ√®s\");\r\n      } else {\r\n        membreOrganisationService.create({\r\n          ...formData,\r\n          id_organisation: orgId,\r\n          date_adhesion: new Date(formData.date_adhesion),\r\n          statut: formData.statut,\r\n        });\r\n        toast.success(\"Membre ajout√© avec succ√®s\");\r\n      }\r\n      \r\n      loadMembres();\r\n      resetForm();\r\n      setIsDialogOpen(false);\r\n    } catch (error) {\r\n      toast.error(\"Erreur lors de l'enregistrement\");\r\n    }\r\n  };\r\n\r\n  const handleEdit = (membre: MembreOrganisation) => {\r\n    setEditingMembre(membre);\r\n    setFormData({\r\n      id_membre: membre.id_membre,\r\n      role: membre.role,\r\n      date_adhesion: new Date(membre.date_adhesion).toISOString().split('T')[0],\r\n      statut: membre.statut,\r\n      notes: membre.notes || \"\",\r\n    });\r\n    setIsDialogOpen(true);\r\n  };\r\n\r\n  const handleDelete = (id: string) => {\r\n    if (confirm(\"√ätes-vous s√ªr de vouloir supprimer ce membre ?\")) {\r\n      membreOrganisationService.delete(id);\r\n      loadMembres();\r\n      toast.success(\"Membre supprim√©\");\r\n    }\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setFormData({\r\n      id_membre: \"\",\r\n      role: \"membre\",\r\n      date_adhesion: new Date().toISOString().split('T')[0],\r\n      statut: \"actif\",\r\n      notes: \"\",\r\n    });\r\n    setEditingMembre(null);\r\n  };\r\n\r\n  const getStatusBadge = (statut: string) => {\r\n    const colors = {\r\n      actif: \"bg-success text-success-foreground\",\r\n      inactif: \"bg-muted text-muted-foreground\",\r\n      suspendu: \"bg-warning text-warning-foreground\",\r\n    };\r\n    return colors[statut as keyof typeof colors] || colors.actif;\r\n  };\r\n\r\n  const getRoleBadge = (role: string) => {\r\n    const colors = {\r\n      pr√©sident: \"bg-primary text-primary-foreground\",\r\n      secr√©taire: \"bg-blue-500 text-white\",\r\n      tr√©sorier: \"bg-green-500 text-white\",\r\n      membre: \"bg-gray-500 text-white\",\r\n      autre: \"bg-gray-400 text-white\",\r\n    };\r\n    return colors[role as keyof typeof colors] || colors.membre;\r\n  };\r\n\r\n  const filteredMembres = membres.filter(m => {\r\n    const query = searchQuery.toLowerCase();\r\n    return m.id_membre.toLowerCase().includes(query) ||\r\n           m.role.toLowerCase().includes(query);\r\n  });\r\n\r\n  if (!organisation) {\r\n    return (\r\n      <div className=\"p-6\">\r\n        <p className=\"text-destructive\">Organisation non trouv√©e</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-6\">\r\n      <div className=\"flex items-center gap-4\">\r\n        <Button variant=\"ghost\" size=\"icon\" onClick={() => navigate(\"/organisations\")}>\r\n          <ArrowLeft className=\"h-5 w-5\" />\r\n        </Button>\r\n        <div className=\"flex-1\">\r\n          <h1 className=\"text-3xl font-bold text-foreground\">Membres de l'Organisation</h1>\r\n          <p className=\"text-muted-foreground mt-1\">{organisation.nom}</p>\r\n        </div>\r\n      </div>\r\n\r\n      <Card>\r\n        <CardHeader>\r\n          <div className=\"flex justify-between items-center\">\r\n            <CardTitle className=\"flex items-center gap-2\">\r\n              <Users className=\"h-5 w-5\" />\r\n              Liste des Membres\r\n            </CardTitle>\r\n            <Dialog open={isDialogOpen} onOpenChange={(open) => {\r\n              setIsDialogOpen(open);\r\n              if (!open) resetForm();\r\n            }}>\r\n              <DialogTrigger asChild>\r\n                <Button className=\"gap-2\">\r\n                  <Plus className=\"h-4 w-4\" />\r\n                  Ajouter un Membre\r\n                </Button>\r\n              </DialogTrigger>\r\n              <DialogContent className=\"max-w-2xl\">\r\n                <DialogHeader>\r\n                  <DialogTitle>\r\n                    {editingMembre ? \"Modifier le Membre\" : \"Ajouter un Membre\"}\r\n                  </DialogTitle>\r\n                </DialogHeader>\r\n                <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                  <div>\r\n                    <Label htmlFor=\"id_membre\">ID du Membre (Producteur) *</Label>\r\n                    <Input\r\n                      id=\"id_membre\"\r\n                      value={formData.id_membre}\r\n                      onChange={(e) => setFormData({ ...formData, id_membre: e.target.value })}\r\n                      placeholder=\"Ex: PROD-0001\"\r\n                      required\r\n                    />\r\n                  </div>\r\n\r\n                  <div>\r\n                    <Label htmlFor=\"role\">R√¥le *</Label>\r\n                    <Select\r\n                      value={formData.role}\r\n                      onValueChange={(value) => setFormData({ ...formData, role: value as MembreOrganisation['role'] })}\r\n                    >\r\n                      <SelectTrigger>\r\n                        <SelectValue />\r\n                      </SelectTrigger>\r\n                      <SelectContent>\r\n                        <SelectItem value=\"pr√©sident\">Pr√©sident</SelectItem>\r\n                        <SelectItem value=\"secr√©taire\">Secr√©taire</SelectItem>\r\n                        <SelectItem value=\"tr√©sorier\">Tr√©sorier</SelectItem>\r\n                        <SelectItem value=\"membre\">Membre</SelectItem>\r\n                        <SelectItem value=\"autre\">Autre</SelectItem>\r\n                      </SelectContent>\r\n                    </Select>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <Label htmlFor=\"date_adhesion\">Date d'Adh√©sion *</Label>\r\n                    <Input\r\n                      id=\"date_adhesion\"\r\n                      type=\"date\"\r\n                      value={formData.date_adhesion}\r\n                      onChange={(e) => setFormData({ ...formData, date_adhesion: e.target.value })}\r\n                      required\r\n                    />\r\n                  </div>\r\n\r\n                  <div>\r\n                    <Label htmlFor=\"statut\">Statut *</Label>\r\n                    <Select\r\n                      value={formData.statut}\r\n                      onValueChange={(value) => setFormData({ ...formData, statut: value as MembreOrganisation['statut'] })}\r\n                    >\r\n                      <SelectTrigger>\r\n                        <SelectValue />\r\n                      </SelectTrigger>\r\n                      <SelectContent>\r\n                        <SelectItem value=\"actif\">Actif</SelectItem>\r\n                        <SelectItem value=\"inactif\">Inactif</SelectItem>\r\n                        <SelectItem value=\"suspendu\">Suspendu</SelectItem>\r\n                      </SelectContent>\r\n                    </Select>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <Label htmlFor=\"notes\">Notes</Label>\r\n                    <Input\r\n                      id=\"notes\"\r\n                      value={formData.notes}\r\n                      onChange={(e) => setFormData({ ...formData, notes: e.target.value })}\r\n                      placeholder=\"Notes suppl√©mentaires...\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"flex gap-4 justify-end\">\r\n                    <Button\r\n                      type=\"button\"\r\n                      variant=\"outline\"\r\n                      onClick={() => {\r\n                        setIsDialogOpen(false);\r\n                        resetForm();\r\n                      }}\r\n                    >\r\n                      Annuler\r\n                    </Button>\r\n                    <Button type=\"submit\">\r\n                      {editingMembre ? \"Mettre √† jour\" : \"Ajouter\"}\r\n                    </Button>\r\n                  </div>\r\n                </form>\r\n              </DialogContent>\r\n            </Dialog>\r\n          </div>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <div className=\"mb-4\">\r\n            <div className=\"relative\">\r\n              <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n              <Input\r\n                placeholder=\"Rechercher un membre...\"\r\n                value={searchQuery}\r\n                onChange={(e) => setSearchQuery(e.target.value)}\r\n                className=\"pl-10\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"border rounded-lg\">\r\n            <Table>\r\n              <TableHeader>\r\n                <TableRow>\r\n                  <TableHead>ID Membre</TableHead>\r\n                  <TableHead>R√¥le</TableHead>\r\n                  <TableHead>Date d'Adh√©sion</TableHead>\r\n                  <TableHead>Statut</TableHead>\r\n                  <TableHead>Notes</TableHead>\r\n                  <TableHead className=\"text-right\">Actions</TableHead>\r\n                </TableRow>\r\n              </TableHeader>\r\n              <TableBody>\r\n                {filteredMembres.length === 0 ? (\r\n                  <TableRow>\r\n                    <TableCell colSpan={6} className=\"text-center text-muted-foreground py-8\">\r\n                      Aucun membre trouv√©\r\n                    </TableCell>\r\n                  </TableRow>\r\n                ) : (\r\n                  filteredMembres.map((membre) => (\r\n                    <TableRow key={membre.id}>\r\n                      <TableCell className=\"font-mono\">{membre.id_membre}</TableCell>\r\n                      <TableCell>\r\n                        <Badge className={getRoleBadge(membre.role)}>\r\n                          {membre.role}\r\n                        </Badge>\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        {new Date(membre.date_adhesion).toLocaleDateString('fr-FR')}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        <Badge className={getStatusBadge(membre.statut)}>\r\n                          {membre.statut}\r\n                        </Badge>\r\n                      </TableCell>\r\n                      <TableCell className=\"max-w-xs truncate\">\r\n                        {membre.notes || \"-\"}\r\n                      </TableCell>\r\n                      <TableCell className=\"text-right\">\r\n                        <div className=\"flex gap-2 justify-end\">\r\n                          <Button\r\n                            variant=\"ghost\"\r\n                            size=\"icon\"\r\n                            onClick={() => handleEdit(membre)}\r\n                          >\r\n                            <Edit className=\"h-4 w-4\" />\r\n                          </Button>\r\n                          <Button\r\n                            variant=\"ghost\"\r\n                            size=\"icon\"\r\n                            onClick={() => handleDelete(membre.id)}\r\n                          >\r\n                            <Trash2 className=\"h-4 w-4 text-destructive\" />\r\n                          </Button>\r\n                        </div>\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  ))\r\n                )}\r\n              </TableBody>\r\n            </Table>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\pages\\Organisations.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\pages\\PlantationDetails.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\pages\\PlantationForm.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":168,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":168,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6404,6407],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6404,6407],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":168,"column":99,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":168,"endColumn":102,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6443,6446],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6443,6446],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":182,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":182,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7062,7065],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7062,7065],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":182,"column":106,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":182,"endColumn":109,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7118,7121],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7118,7121],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":186,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":186,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7243,7246],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7243,7246],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":191,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":191,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7494,7497],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7494,7497],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":197,"column":70,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":197,"endColumn":73,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7754,7757],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7754,7757],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":201,"column":74,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":201,"endColumn":77,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7954,7957],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7954,7957],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":205,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":205,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8134,8137],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8134,8137],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":209,"column":80,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":209,"endColumn":83,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8319,8322],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8319,8322],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":213,"column":85,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":213,"endColumn":88,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8539,8542],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8539,8542],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":347,"column":85,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":347,"endColumn":88,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15278,15281],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15278,15281],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":393,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":393,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18142,18145],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18142,18145],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":393,"column":98,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":393,"endColumn":101,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18188,18191],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18188,18191],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":14,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { z } from \"zod\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Checkbox } from \"@/components/ui/checkbox\";\r\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\r\nimport PhotoCapture from \"@/components/forms/PhotoCapture\";\r\nimport GPSCapture from \"@/components/forms/GPSCapture\";\r\nimport { ArrowLeft, Save } from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\nimport { generatePlantationCode } from \"@/utils/codeGenerators\";\r\n\r\nconst niveauxMaladie = [\"Inexistant\", \"Tr√®s peu\", \"Peu\", \"Important\"] as const;\r\nconst niveauxIntrant = [\"Peu\", \"Moyen\", \"A dose recommand√©e\", \"Jamais\"] as const;\r\nconst frequencesConseil = [\"Jamais\", \"01 fois par an\", \"01 fois par semestre\", \"01 fois trimestre\", \"01 par mois\"] as const;\r\n\r\nconst parcelleSchema = z.object({\r\n  id_producteur: z.string().min(1, \"Producteur requis\"),\r\n  \r\n  // Infos G√©n√©rales\r\n  age_plantation: z.number().min(0),\r\n  superficie_declaree: z.number().min(0),\r\n  superficie_reelle: z.number().optional(),\r\n  distance_magasin: z.number().optional(),\r\n  latitude: z.number().optional(),\r\n  longitude: z.number().optional(),\r\n  production_declaree: z.number().min(0),\r\n  densite: z.number().optional(),\r\n  nb_arbres_ombrage: z.number().optional(),\r\n  photo: z.string().optional(),\r\n\r\n  // Maladies\r\n  maladie_pourriture_brune: z.enum(niveauxMaladie),\r\n  maladie_swollen_shoot: z.enum(niveauxMaladie),\r\n  maladie_parasites: z.enum(niveauxMaladie),\r\n  maladie_autre: z.enum(niveauxMaladie),\r\n\r\n  // Intrants\r\n  engrais: z.enum(niveauxIntrant),\r\n  pesticides: z.enum(niveauxIntrant),\r\n  insecticides: z.enum(niveauxIntrant),\r\n  fongicides: z.enum(niveauxIntrant),\r\n  herbicides: z.enum(niveauxIntrant),\r\n\r\n  // Conseil\r\n  conseil_anader: z.boolean(),\r\n  conseil_partenaires: z.boolean(),\r\n  conseil_prives: z.boolean(),\r\n  conseil_frequence: z.enum(frequencesConseil),\r\n  conseil_interet: z.boolean(),\r\n\r\n  // S√©chage\r\n  sechage_claie_hauteur: z.boolean(),\r\n  sechage_claie_sol: z.boolean(),\r\n  sechage_plastique_sol: z.boolean(),\r\n  sechage_ciment: z.boolean(),\r\n\r\n  // Equipements\r\n  equipement_machettes: z.boolean(),\r\n  equipement_gourdins: z.boolean(),\r\n  equipement_limes: z.boolean(),\r\n  equipement_houe: z.boolean(),\r\n  equipement_secateur: z.boolean(),\r\n  equipement_combinaison: z.boolean(),\r\n  equipement_gants: z.boolean(),\r\n  equipement_lunettes: z.boolean(),\r\n  equipement_masque: z.boolean(),\r\n  equipement_bottes: z.boolean(),\r\n\r\n  // Commercialisation\r\n  comm_coop: z.boolean(),\r\n  comm_coop_pct: z.number().optional(),\r\n  comm_coop_loyaute: z.number().optional(),\r\n  comm_coop_lieu: z.string().optional(),\r\n  comm_coop_prix_campagne: z.number().optional(),\r\n  comm_coop_prix_intermediaire: z.number().optional(),\r\n\r\n  comm_pisteur: z.boolean(),\r\n  comm_pisteur_noms: z.string().optional(),\r\n  comm_pisteur_pct: z.number().optional(),\r\n  comm_pisteur_loyaute: z.number().optional(),\r\n  comm_pisteur_lieu: z.string().optional(),\r\n  comm_pisteur_prix_campagne: z.number().optional(),\r\n  comm_pisteur_prix_intermediaire: z.number().optional(),\r\n\r\n  comm_autre_coop: z.boolean(),\r\n  comm_autre_coop_noms: z.string().optional(),\r\n  comm_autre_coop_pct: z.number().optional(),\r\n  comm_autre_coop_loyaute: z.number().optional(),\r\n  comm_autre_coop_lieu: z.string().optional(),\r\n  comm_autre_coop_prix_campagne: z.number().optional(),\r\n  comm_autre_coop_prix_intermediaire: z.number().optional(),\r\n\r\n  comm_autre_acheteur: z.boolean(),\r\n  comm_autre_acheteur_noms: z.string().optional(),\r\n  comm_autre_acheteur_pct: z.number().optional(),\r\n  comm_autre_acheteur_loyaute: z.number().optional(),\r\n  comm_autre_acheteur_lieu: z.string().optional(),\r\n  comm_autre_acheteur_prix_campagne: z.number().optional(),\r\n  comm_autre_acheteur_prix_intermediaire: z.number().optional(),\r\n});\r\n\r\ntype ParcelleFormData = z.infer<typeof parcelleSchema>;\r\n\r\nexport default function ParcelleForm() {\r\n  const navigate = useNavigate();\r\n  \r\n  const { register, handleSubmit, formState: { errors }, setValue, watch } = useForm<ParcelleFormData>({\r\n    resolver: zodResolver(parcelleSchema),\r\n    defaultValues: {\r\n      age_plantation: 0,\r\n      superficie_declaree: 0,\r\n      production_declaree: 0,\r\n      maladie_pourriture_brune: \"Inexistant\",\r\n      maladie_swollen_shoot: \"Inexistant\",\r\n      maladie_parasites: \"Inexistant\",\r\n      maladie_autre: \"Inexistant\",\r\n      engrais: \"Jamais\",\r\n      pesticides: \"Jamais\",\r\n      insecticides: \"Jamais\",\r\n      fongicides: \"Jamais\",\r\n      herbicides: \"Jamais\",\r\n      conseil_anader: false,\r\n      conseil_partenaires: false,\r\n      conseil_prives: false,\r\n      conseil_frequence: \"Jamais\",\r\n      conseil_interet: false,\r\n      sechage_claie_hauteur: false,\r\n      sechage_claie_sol: false,\r\n      sechage_plastique_sol: false,\r\n      sechage_ciment: false,\r\n      equipement_machettes: false,\r\n      equipement_gourdins: false,\r\n      equipement_limes: false,\r\n      equipement_houe: false,\r\n      equipement_secateur: false,\r\n      equipement_combinaison: false,\r\n      equipement_gants: false,\r\n      equipement_lunettes: false,\r\n      equipement_masque: false,\r\n      equipement_bottes: false,\r\n      comm_coop: false,\r\n      comm_pisteur: false,\r\n      comm_autre_coop: false,\r\n      comm_autre_acheteur: false,\r\n    }\r\n  });\r\n\r\n  const onSubmit = (data: ParcelleFormData) => {\r\n    try {\r\n      const code = generatePlantationCode(\"PROD-001\", Math.floor(Math.random() * 10));\r\n      console.log(\"Plantation cr√©√©e:\", { code, ...data });\r\n      toast.success(`Plantation ${code} enregistr√©e avec succ√®s`);\r\n      navigate(\"/parcelles\"); // Assumons que cette route existe ou existera\r\n    } catch (error) {\r\n      toast.error(\"Erreur lors de l'enregistrement\");\r\n    }\r\n  };\r\n\r\n  const renderRadioBlock = (name: string, label: string, options: readonly string[]) => (\r\n    <div className=\"space-y-2 border-b pb-2\">\r\n      <Label className=\"font-medium\">{label}</Label>\r\n      <RadioGroup onValueChange={(val) => setValue(name as any, val)} defaultValue={watch(name as any)} className=\"flex flex-wrap gap-4\">\r\n        {options.map((opt) => (\r\n          <div key={opt} className=\"flex items-center space-x-2\">\r\n            <RadioGroupItem value={opt} id={`${name}-${opt}`} />\r\n            <Label htmlFor={`${name}-${opt}`} className=\"text-sm font-normal\">{opt}</Label>\r\n          </div>\r\n        ))}\r\n      </RadioGroup>\r\n    </div>\r\n  );\r\n\r\n  const renderCommFields = (prefix: string, title: string, hasNameField: boolean = false) => (\r\n    <div className=\"border p-4 rounded space-y-3\">\r\n       <div className=\"flex items-center gap-2\">\r\n         <Checkbox checked={watch(`${prefix}` as any)} onCheckedChange={(chk) => setValue(`${prefix}` as any, !!chk)} />\r\n         <Label className=\"font-bold\">{title}</Label>\r\n       </div>\r\n       \r\n       {watch(`${prefix}` as any) && (\r\n         <div className=\"space-y-3 pl-6 border-l-2 border-primary/20\">\r\n            {hasNameField && (\r\n              <div>\r\n                <Label>Noms (s√©par√©s par virgule)</Label>\r\n                <Input {...register(`${prefix}_noms` as any)} />\r\n              </div>\r\n            )}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\r\n              <div>\r\n                <Label>% Quantit√© concern√©e</Label>\r\n                <Input type=\"number\" {...register(`${prefix}_pct` as any, { valueAsNumber: true })} />\r\n              </div>\r\n              <div>\r\n                <Label>Taux Loyaut√© (%)</Label>\r\n                <Input type=\"number\" {...register(`${prefix}_loyaute` as any, { valueAsNumber: true })} />\r\n              </div>\r\n              <div>\r\n                <Label>Lieu de vente</Label>\r\n                <Input {...register(`${prefix}_lieu` as any)} />\r\n              </div>\r\n              <div>\r\n                <Label>Prix Campagne (FCFA)</Label>\r\n                <Input type=\"number\" {...register(`${prefix}_prix_campagne` as any, { valueAsNumber: true })} />\r\n              </div>\r\n              <div>\r\n                <Label>Prix Interm√©diaire (FCFA)</Label>\r\n                <Input type=\"number\" {...register(`${prefix}_prix_intermediaire` as any, { valueAsNumber: true })} />\r\n              </div>\r\n            </div>\r\n         </div>\r\n       )}\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-6 max-w-5xl mx-auto\">\r\n      <div className=\"flex items-center gap-4\">\r\n        <Button variant=\"ghost\" size=\"icon\" onClick={() => navigate(\"/parcelles\")}>\r\n          <ArrowLeft className=\"h-5 w-5\" />\r\n        </Button>\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold text-foreground\">Nouvelle Plantation</h1>\r\n          <p className=\"text-muted-foreground\">Enregistrement d'une parcelle de cacao</p>\r\n        </div>\r\n      </div>\r\n\r\n      <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-8\">\r\n        \r\n        {/* 1. Infos G√©n√©rales */}\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle className=\"bg-primary/10 p-2 rounded text-primary\">Informations G√©n√©rales</CardTitle>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-4\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n               <div>\r\n                 <Label>Producteur Propri√©taire *</Label>\r\n                 <Select onValueChange={(v) => setValue(\"id_producteur\", v)}>\r\n                   <SelectTrigger><SelectValue placeholder=\"S√©lectionner un producteur...\" /></SelectTrigger>\r\n                   <SelectContent>\r\n                     <SelectItem value=\"PROD-001\">Kouassi Jean</SelectItem>\r\n                   </SelectContent>\r\n                 </Select>\r\n                 {errors.id_producteur && <p className=\"text-destructive text-sm\">Requis</p>}\r\n               </div>\r\n               <div>\r\n                 <Label>√Çge de la plantation (ann√©es)</Label>\r\n                 <Input type=\"number\" {...register(\"age_plantation\", { valueAsNumber: true })} />\r\n               </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n               <div>\r\n                 <Label>Superficie D√©clar√©e (Ha)</Label>\r\n                 <Input type=\"number\" step=\"0.01\" {...register(\"superficie_declaree\", { valueAsNumber: true })} />\r\n               </div>\r\n               <div>\r\n                 <Label>Superficie R√©elle GPS (Ha)</Label>\r\n                 <Input type=\"number\" step=\"0.01\" {...register(\"superficie_reelle\", { valueAsNumber: true })} />\r\n               </div>\r\n               <div>\r\n                 <Label>Production D√©clar√©e (T)</Label>\r\n                 <Input type=\"number\" step=\"0.01\" {...register(\"production_declaree\", { valueAsNumber: true })} />\r\n               </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n               <div>\r\n                 <Label>Distance Magasin (Km)</Label>\r\n                 <Input type=\"number\" step=\"0.1\" {...register(\"distance_magasin\", { valueAsNumber: true })} />\r\n               </div>\r\n               <div>\r\n                 <Label>Densit√© (plants/ha)</Label>\r\n                 <Input type=\"number\" {...register(\"densite\", { valueAsNumber: true })} />\r\n               </div>\r\n               <div>\r\n                 <Label>Arbres d'ombrage (Nb)</Label>\r\n                 <Input type=\"number\" {...register(\"nb_arbres_ombrage\", { valueAsNumber: true })} />\r\n               </div>\r\n            </div>\r\n\r\n            <div className=\"border-t pt-4\">\r\n               <Label className=\"mb-2 block font-semibold\">Localisation (Centro√Øde)</Label>\r\n               <GPSCapture \r\n                 onChange={(c) => { setValue(\"latitude\", c.latitude); setValue(\"longitude\", c.longitude); }}\r\n                 latitude={watch(\"latitude\")}\r\n                 longitude={watch(\"longitude\")}\r\n               />\r\n            </div>\r\n\r\n            <PhotoCapture label=\"Photo Plantation\" value={watch(\"photo\")} onChange={(v) => setValue(\"photo\", v)} />\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* 2. Maladies & Intrants */}\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle className=\"bg-primary/10 p-2 rounded text-primary\">Sant√© de la plantation</CardTitle>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-6\">\r\n             <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\r\n               <div>\r\n                 <h3 className=\"font-bold text-lg mb-4 text-destructive/80\">Principales Maladies</h3>\r\n                 <div className=\"space-y-4\">\r\n                   {renderRadioBlock(\"maladie_pourriture_brune\", \"Pourritures brunes\", niveauxMaladie)}\r\n                   {renderRadioBlock(\"maladie_swollen_shoot\", \"Swollen shoot\", niveauxMaladie)}\r\n                   {renderRadioBlock(\"maladie_parasites\", \"Parasites\", niveauxMaladie)}\r\n                   {renderRadioBlock(\"maladie_autre\", \"Autres\", niveauxMaladie)}\r\n                 </div>\r\n               </div>\r\n               <div>\r\n                 <h3 className=\"font-bold text-lg mb-4 text-blue-600\">Utilisation Intrants</h3>\r\n                 <div className=\"space-y-4\">\r\n                   {renderRadioBlock(\"engrais\", \"Engrais\", niveauxIntrant)}\r\n                   {renderRadioBlock(\"pesticides\", \"Pesticides\", niveauxIntrant)}\r\n                   {renderRadioBlock(\"insecticides\", \"Insecticides\", niveauxIntrant)}\r\n                   {renderRadioBlock(\"fongicides\", \"Fongicides\", niveauxIntrant)}\r\n                   {renderRadioBlock(\"herbicides\", \"Herbicides\", niveauxIntrant)}\r\n                 </div>\r\n               </div>\r\n             </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* 3. Conseil & S√©chage */}\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle className=\"bg-primary/10 p-2 rounded text-primary\">Pratiques Agricoles</CardTitle>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-6\">\r\n             <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n               <div className=\"space-y-4\">\r\n                 <h3 className=\"font-semibold\">Conseil Agricole</h3>\r\n                 <div className=\"flex flex-col gap-2\">\r\n                   <div className=\"flex items-center gap-2\"><Checkbox checked={watch(\"conseil_anader\")} onCheckedChange={(c) => setValue(\"conseil_anader\", !!c)} /><Label>Anader</Label></div>\r\n                   <div className=\"flex items-center gap-2\"><Checkbox checked={watch(\"conseil_partenaires\")} onCheckedChange={(c) => setValue(\"conseil_partenaires\", !!c)} /><Label>Partenaires Commerciaux</Label></div>\r\n                   <div className=\"flex items-center gap-2\"><Checkbox checked={watch(\"conseil_prives\")} onCheckedChange={(c) => setValue(\"conseil_prives\", !!c)} /><Label>Cabinets priv√©s</Label></div>\r\n                 </div>\r\n                 <div>\r\n                   <Label>Fr√©quence</Label>\r\n                   <Select onValueChange={(v) => setValue(\"conseil_frequence\", v as any)} defaultValue=\"Jamais\">\r\n                     <SelectTrigger><SelectValue /></SelectTrigger>\r\n                     <SelectContent>\r\n                       {frequencesConseil.map(f => <SelectItem key={f} value={f}>{f}</SelectItem>)}\r\n                     </SelectContent>\r\n                   </Select>\r\n                 </div>\r\n                 <div className=\"flex items-center gap-2 pt-2\">\r\n                   <Checkbox checked={watch(\"conseil_interet\")} onCheckedChange={(c) => setValue(\"conseil_interet\", !!c)} />\r\n                   <Label className=\"font-medium\">Int√©r√™t pour le conseil agricole</Label>\r\n                 </div>\r\n               </div>\r\n\r\n               <div className=\"space-y-4\">\r\n                 <h3 className=\"font-semibold\">S√©chage</h3>\r\n                 <div className=\"flex flex-col gap-2\">\r\n                   <div className=\"flex items-center gap-2\"><Checkbox checked={watch(\"sechage_claie_hauteur\")} onCheckedChange={(c) => setValue(\"sechage_claie_hauteur\", !!c)} /><Label>Claie en hauteur</Label></div>\r\n                   <div className=\"flex items-center gap-2\"><Checkbox checked={watch(\"sechage_claie_sol\")} onCheckedChange={(c) => setValue(\"sechage_claie_sol\", !!c)} /><Label>Claie au sol</Label></div>\r\n                   <div className=\"flex items-center gap-2\"><Checkbox checked={watch(\"sechage_plastique_sol\")} onCheckedChange={(c) => setValue(\"sechage_plastique_sol\", !!c)} /><Label>Plastique au sol</Label></div>\r\n                   <div className=\"flex items-center gap-2\"><Checkbox checked={watch(\"sechage_ciment\")} onCheckedChange={(c) => setValue(\"sechage_ciment\", !!c)} /><Label>Ciment (terrasse)</Label></div>\r\n                 </div>\r\n               </div>\r\n             </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* 4. Equipements */}\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle className=\"bg-primary/10 p-2 rounded text-primary\">Equipements Planteur</CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n             <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n               {[\r\n                 [\"equipement_machettes\", \"Machettes\"],\r\n                 [\"equipement_gourdins\", \"Gourdins\"],\r\n                 [\"equipement_limes\", \"Limes\"],\r\n                 [\"equipement_houe\", \"Houe\"],\r\n                 [\"equipement_secateur\", \"S√©cateur\"],\r\n                 [\"equipement_combinaison\", \"Combinaison (Phyto)\"],\r\n                 [\"equipement_gants\", \"Gants Nitrile\"],\r\n                 [\"equipement_lunettes\", \"Lunettes protection\"],\r\n                 [\"equipement_masque\", \"Masque protection\"],\r\n                 [\"equipement_bottes\", \"Bottes\"],\r\n               ].map(([key, label]) => (\r\n                 <div key={key} className=\"flex items-center gap-2 p-2 border rounded hover:bg-accent\">\r\n                   <Checkbox checked={watch(key as any)} onCheckedChange={(c) => setValue(key as any, !!c)} />\r\n                   <Label>{label}</Label>\r\n                 </div>\r\n               ))}\r\n             </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* 5. Commercialisation */}\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle className=\"bg-primary/10 p-2 rounded text-primary\">Commercialisation</CardTitle>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-4\">\r\n            {renderCommFields(\"comm_coop\", \"Produits livr√©s √† la Coop√©rative\")}\r\n            {renderCommFields(\"comm_pisteur\", \"Produits livr√©s aux Pisteurs\", true)}\r\n            {renderCommFields(\"comm_autre_coop\", \"Produits livr√©s aux autres Coop√©ratives\", true)}\r\n            {renderCommFields(\"comm_autre_acheteur\", \"Produits livr√©s aux autres acheteurs\", true)}\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <div className=\"flex gap-4 justify-end pt-4\">\r\n          <Button type=\"button\" variant=\"outline\" size=\"lg\" onClick={() => navigate(\"/parcelles\")}>\r\n            Annuler\r\n          </Button>\r\n          <Button type=\"submit\" size=\"lg\" className=\"gap-2 bg-primary hover:bg-primary/90\">\r\n            <Save className=\"h-5 w-5\" />\r\n            Enregistrer la Plantation\r\n          </Button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\pages\\PlantationMap.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\pages\\Plantations.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\pages\\ProducteurDetails.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":44,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":44,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1599,1602],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1599,1602],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":57,"column":71,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":57,"endColumn":74,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2264,2267],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2264,2267],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useParams, useNavigate } from \"react-router-dom\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { ArrowLeft, User, Phone, MapPin, Building, Calendar, Briefcase, HeartPulse, Home, Zap, Droplets, Loader2 } from \"lucide-react\";\r\nimport { api } from \"@/services/api\";\r\nimport { Producteur } from \"@/types/organisation\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { calculateAge } from \"@/utils/codification\";\r\n\r\nexport default function ProducteurDetails() {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const [producteur, setProducteur] = useState<Producteur | undefined>(undefined);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (id) {\r\n      const loadData = async () => {\r\n        try {\r\n          const data = await api.getProducteur(id);\r\n          setProducteur(data);\r\n        } catch (error) {\r\n          console.error(\"Erreur chargement producteur:\", error);\r\n        } finally {\r\n          setIsLoading(false);\r\n        }\r\n      };\r\n      loadData();\r\n    }\r\n  }, [id]);\r\n\r\n  if (isLoading) {\r\n    return <div className=\"flex justify-center items-center h-screen\"><Loader2 className=\"h-12 w-12 animate-spin text-primary\" /></div>;\r\n  }\r\n\r\n  if (!producteur) {\r\n    return <div className=\"p-8 text-center\">Producteur introuvable...</div>;\r\n  }\r\n\r\n\r\n  const age = calculateAge(producteur.date_naissance);\r\n\r\n  const InfoItem = ({ icon: Icon, label, value, sub }: { icon: any, label: string, value: string | number | undefined | null, sub?: string }) => (\r\n    <div className=\"flex items-start gap-3 p-3 rounded-lg bg-muted/20 hover:bg-muted/40 transition-colors\">\r\n      <div className=\"p-2 bg-primary/10 rounded-full text-primary\">\r\n        <Icon className=\"h-5 w-5\" />\r\n      </div>\r\n      <div>\r\n        <p className=\"text-sm text-muted-foreground font-medium\">{label}</p>\r\n        <p className=\"font-semibold text-foreground\">{value || 'N/A'}</p>\r\n        {sub && <p className=\"text-xs text-muted-foreground mt-0.5\">{sub}</p>}\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  const SectionTitle = ({ title, icon: Icon }: { title: string, icon: any }) => (\r\n    <h3 className=\"text-lg font-bold flex items-center gap-2 mb-4 text-primary border-b pb-2\">\r\n      <Icon className=\"h-5 w-5\" />\r\n      {title}\r\n    </h3>\r\n  );\r\n\r\n  return (\r\n    <div className=\"p-6 max-w-6xl mx-auto space-y-8 animate-in fade-in duration-500\">\r\n      {/* Header */}\r\n      <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n        <div className=\"flex items-center gap-4\">\r\n          <Button variant=\"outline\" size=\"icon\" onClick={() => navigate(\"/producteurs\")}>\r\n            <ArrowLeft className=\"h-5 w-5\" />\r\n          </Button>\r\n          <div className=\"relative\">\r\n            <img \r\n              src={producteur.photo_planteur || `https://api.dicebear.com/7.x/avataaars/svg?seed=${producteur.nom_complet}`} \r\n              alt={producteur.nom_complet}\r\n              className=\"w-20 h-20 rounded-full border-4 border-background shadow-lg bg-white\"\r\n            />\r\n            <div className={`absolute bottom-0 right-0 w-5 h-5 rounded-full border-2 border-white ${producteur.statut === 'actif' ? 'bg-green-500' : 'bg-gray-400'}`} />\r\n          </div>\r\n          <div>\r\n            <h1 className=\"text-3xl font-bold\">{producteur.nom_complet}</h1>\r\n            <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n              <Badge variant=\"outline\" className=\"font-mono bg-muted\">{producteur.code}</Badge>\r\n              <span>‚Ä¢</span>\r\n              <span className=\"flex items-center gap-1\"><MapPin className=\"h-3 w-3\" /> {producteur.lieu_naissance}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"flex gap-2\">\r\n          <Button variant=\"outline\">Modifier</Button>\r\n          <Button variant=\"destructive\">Archiver</Button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n        \r\n        {/* Colonne Gauche: Identit√© & Localisation */}\r\n        <div className=\"space-y-6\">\r\n          <Card>\r\n            <CardHeader><CardTitle>Identit√©</CardTitle></CardHeader>\r\n            <CardContent className=\"space-y-2\">\r\n              <InfoItem icon={User} label=\"√Çge\" value={`${age} ans`} sub={`N√© le ${new Date(producteur.date_naissance).toLocaleDateString()}`} />\r\n              <InfoItem icon={MapPin} label=\"Lieu de Naissance\" value={producteur.lieu_naissance} />\r\n              {/* Note: telephones n'est pas dans l'interface seed actuelle, √† ajouter si besoin */}\r\n            </CardContent>\r\n          </Card>\r\n\r\n          <Card>\r\n            <CardHeader><CardTitle>Localisation</CardTitle></CardHeader>\r\n            <CardContent className=\"space-y-2\">\r\n              <InfoItem icon={Building} label=\"Organisation\" value={producteur.id_organisation} sub=\"Code ORG\" />\r\n              <InfoItem icon={MapPin} label=\"Section\" value={producteur.id_section} sub=\"Code SEC\" />\r\n              <InfoItem icon={Home} label=\"Village\" value={producteur.id_village} sub=\"Code VIL\" />\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n\r\n        {/* Colonne Centrale: M√©nage & Social */}\r\n        <div className=\"space-y-6\">\r\n           <Card>\r\n             <CardHeader><CardTitle>M√©nage & Famille</CardTitle></CardHeader>\r\n             <CardContent className=\"grid grid-cols-2 gap-4\">\r\n               <div className=\"text-center p-4 bg-blue-50 rounded-lg\">\r\n                 <span className=\"block text-3xl font-bold text-blue-600\">{producteur.nb_enfants}</span>\r\n                 <span className=\"text-xs text-blue-800 font-semibold uppercase\">Enfants</span>\r\n               </div>\r\n               <div className=\"text-center p-4 bg-green-50 rounded-lg\">\r\n                 <span className=\"block text-3xl font-bold text-green-600\">{producteur.nb_enfants_scolarises}</span>\r\n                 <span className=\"text-xs text-green-800 font-semibold uppercase\">Scolaris√©s</span>\r\n               </div>\r\n               <div className=\"col-span-2 space-y-2 mt-2\">\r\n                  <div className=\"flex justify-between text-sm border-b pb-1\"><span>Filles</span> <span className=\"font-bold\">{producteur.nb_filles}</span></div>\r\n                  <div className=\"flex justify-between text-sm border-b pb-1\"><span>Gar√ßons</span> <span className=\"font-bold\">{producteur.nb_garcons}</span></div>\r\n                  <div className=\"flex justify-between text-sm border-b pb-1\"><span>Moins de 5 ans</span> <span className=\"font-bold\">{producteur.nb_moins_5_ans}</span></div>\r\n               </div>\r\n             </CardContent>\r\n           </Card>\r\n\r\n           <Card>\r\n             <CardHeader><CardTitle>Conditions de Vie</CardTitle></CardHeader>\r\n             <CardContent className=\"space-y-4\">\r\n               <div>\r\n                 <h4 className=\"font-semibold text-sm mb-2 flex items-center gap-2\"><Droplets className=\"h-4 w-4 text-cyan-500\"/> Acc√®s √† l'Eau</h4>\r\n                 <div className=\"flex flex-wrap gap-2\">\r\n                   {producteur.eau_courante && <Badge variant=\"secondary\">Eau Courante</Badge>}\r\n                   {producteur.pompe_hydraulique && <Badge variant=\"secondary\">Pompe Hydraulique</Badge>}\r\n                   {producteur.puits && <Badge variant=\"secondary\">Puits</Badge>}\r\n                   {producteur.riviere_marigot && <Badge variant=\"destructive\">Rivi√®re / Marigot</Badge>}\r\n                 </div>\r\n               </div>\r\n               <div>\r\n                 <h4 className=\"font-semibold text-sm mb-2 flex items-center gap-2\"><Zap className=\"h-4 w-4 text-yellow-500\"/> √âlectricit√©</h4>\r\n                 <div className=\"flex flex-wrap gap-2\">\r\n                   {producteur.electricite_reseau && <Badge variant=\"secondary\">R√©seau</Badge>}\r\n                   {producteur.electricite_solaire && <Badge variant=\"secondary\">Solaire</Badge>}\r\n                   {producteur.electricite_lampe && <Badge variant=\"outline\">Lampe</Badge>}\r\n                   {producteur.electricite_aucun && <Badge variant=\"destructive\">Aucun</Badge>}\r\n                 </div>\r\n               </div>\r\n               <div>\r\n                 <h4 className=\"font-semibold text-sm mb-2 flex items-center gap-2\"><Home className=\"h-4 w-4 text-orange-500\"/> Habitat</h4>\r\n                 <div className=\"text-sm grid grid-cols-2 gap-2\">\r\n                    <div className=\"bg-muted p-2 rounded\">Mur: <b>{producteur.materiaux_mur}</b></div>\r\n                    <div className=\"bg-muted p-2 rounded\">Toit: <b>{producteur.toiture}</b></div>\r\n                 </div>\r\n               </div>\r\n             </CardContent>\r\n           </Card>\r\n        </div>\r\n\r\n        {/* Colonne Droite: Production & Finances */}\r\n        <div className=\"space-y-6\">\r\n          <Card className=\"bg-primary/5 border-primary/20\">\r\n            <CardHeader><CardTitle className=\"text-primary\">Production Cacao</CardTitle></CardHeader>\r\n            <CardContent className=\"space-y-4\">\r\n               <div className=\"flex justify-between items-center p-3 bg-white rounded shadow-sm\">\r\n                 <span className=\"text-muted-foreground\">Plantations</span>\r\n                 <span className=\"text-xl font-bold\">{producteur.cacao_nb_plantations}</span>\r\n               </div>\r\n               <div className=\"flex justify-between items-center p-3 bg-white rounded shadow-sm\">\r\n                 <span className=\"text-muted-foreground\">Superficie Totale</span>\r\n                 <span className=\"text-xl font-bold\">{producteur.cacao_superficie} Ha</span>\r\n               </div>\r\n               <div className=\"flex justify-between items-center p-3 bg-white rounded shadow-sm\">\r\n                 <span className=\"text-muted-foreground\">Derni√®re R√©colte</span>\r\n                 <span className=\"text-xl font-bold text-green-600\">{producteur.cacao_production} T</span>\r\n               </div>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          <Card>\r\n            <CardHeader><CardTitle>Inclusion Financi√®re</CardTitle></CardHeader>\r\n            <CardContent className=\"space-y-4\">\r\n               <div className=\"space-y-2\">\r\n                 <div className=\"flex justify-between text-sm\"><span>Compte Bancaire</span> {producteur.interet_compte_bancaire ? <Badge className=\"bg-green-500\">Oui</Badge> : <Badge variant=\"outline\">Non</Badge>}</div>\r\n                 <div className=\"flex justify-between text-sm\"><span>√âpargne</span> {producteur.interet_epargne ? <Badge className=\"bg-green-500\">Oui</Badge> : <Badge variant=\"outline\">Non</Badge>}</div>\r\n               </div>\r\n               <div className=\"pt-2 border-t\">\r\n                 <p className=\"text-xs font-semibold mb-2 uppercase text-muted-foreground\">Moyens de Paiement</p>\r\n                 <div className=\"grid grid-cols-2 gap-2 text-xs\">\r\n                   <div className=\"flex justify-between\"><span>Mobile Money</span> <b>{producteur.usage_mobile_money}</b></div>\r\n                   <div className=\"flex justify-between\"><span>Esp√®ces</span> <b>{producteur.usage_especes}</b></div>\r\n                 </div>\r\n               </div>\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\pages\\ProducteurForm.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":201,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":201,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8781,8784],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8781,8784],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":215,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":215,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9418,9421],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9418,9421],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":215,"column":91,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":215,"endColumn":94,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9467,9470],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9467,9470],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":216,"column":75,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":216,"endColumn":78,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9558,9561],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9558,9561],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":216,"column":95,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":216,"endColumn":98,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9578,9581],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9578,9581],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":218,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":218,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9637,9640],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9637,9640],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":224,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":224,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9908,9911],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9908,9911],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":235,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":235,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10245,10248],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10245,10248],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":235,"column":92,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":235,"endColumn":95,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10294,10297],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10294,10297],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":238,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":238,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10411,10414],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10411,10414],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":242,"column":76,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":242,"endColumn":79,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10644,10647],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10644,10647],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":246,"column":84,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":246,"endColumn":87,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10844,10847],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10844,10847],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":250,"column":84,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":250,"endColumn":87,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11043,11046],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11043,11046],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":433,"column":79,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":433,"endColumn":82,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[21774,21777],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[21774,21777],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":446,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":446,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[22550,22553],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[22550,22553],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":15,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { z } from \"zod\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Checkbox } from \"@/components/ui/checkbox\";\r\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\r\nimport { Alert, AlertDescription, AlertTitle } from \"@/components/ui/alert\";\r\nimport PhotoCapture from \"@/components/forms/PhotoCapture\";\r\nimport MultiPhone from \"@/components/forms/MultiPhone\";\r\nimport { ArrowLeft, Save, Info } from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\nimport { generateProducteurCode, calculateAge } from \"@/utils/codification\";\r\nimport { useState, useEffect } from \"react\";\r\n\r\nconst producteurSchema = z.object({\r\n  // Rattachement\r\n  organisationId: z.string().min(1, \"Organisation requise\"),\r\n  sectionId: z.string().min(1, \"Section requise\"),\r\n  villageId: z.string().min(1, \"Village requis\"),\r\n\r\n  // Infos g√©n√©rales\r\n  nom_complet: z.string().min(2, \"Nom complet requis\"),\r\n  date_naissance: z.string().min(1, \"Date de naissance requise\"),\r\n  lieu_naissance: z.string().optional(),\r\n  telephones: z.array(z.string()).optional(),\r\n  photo_cni: z.string().optional(),\r\n  photo_planteur: z.string().optional(),\r\n  \r\n  nb_femmes: z.number().min(0),\r\n  nb_enfants: z.number().min(0),\r\n  nb_filles: z.number().min(0),\r\n  nb_garcons: z.number().min(0),\r\n  nb_moins_5_ans: z.number().min(0),\r\n  nb_enfants_scolarises: z.number().min(0),\r\n  \r\n  // Scolarisation\r\n  scolarises_primaire_filles: z.number().min(0),\r\n  scolarises_primaire_garcons: z.number().min(0),\r\n  scolarises_secondaire_filles: z.number().min(0),\r\n  scolarises_secondaire_garcons: z.number().min(0),\r\n  scolarises_superieur_filles: z.number().min(0),\r\n  scolarises_superieur_garcons: z.number().min(0),\r\n\r\n  // Conditions de vie - Eau\r\n  eau_courante: z.boolean(),\r\n  pompe_hydraulique: z.boolean(),\r\n  puits: z.boolean(),\r\n  riviere_marigot: z.boolean(),\r\n\r\n  // Conditions de vie - Electricit√©\r\n  electricite_reseau: z.boolean(),\r\n  electricite_solaire: z.boolean(),\r\n  electricite_lampe: z.boolean(),\r\n  electricite_aucun: z.boolean(),\r\n\r\n  // Logement\r\n  materiaux_mur: z.enum([\"Terre battue s√©ch√©e\", \"Briques/Ciment\", \"Bois\", \"Paille/pis√©\", \"Mat√©riaux modernes\"]).optional(),\r\n  toiture: z.enum([\"T√¥le\", \"Bambou-Plastique\", \"Paille-Plastique\", \"Bambou-Paille\"]).optional(),\r\n\r\n  // Soins\r\n  soins_plantes_tradi: z.enum([\"Toujours\", \"Souvent\", \"Jamais\"]).optional(),\r\n  soins_dispensaire: z.enum([\"Toujours\", \"Souvent\", \"Jamais\"]).optional(),\r\n\r\n  // Cr√©dit / Epargne\r\n  interet_compte_bancaire: z.boolean(),\r\n  montant_compte_bancaire: z.number().optional(),\r\n  interet_epargne: z.boolean(),\r\n  montant_epargne: z.number().optional(),\r\n\r\n  // Moyens paiement\r\n  usage_mobile_money: z.enum([\"Peu\", \"Souvent\", \"Toujours\", \"Jamais\"]).optional(),\r\n  usage_virement: z.enum([\"Peu\", \"Souvent\", \"Toujours\", \"Jamais\"]).optional(),\r\n  usage_especes: z.enum([\"Peu\", \"Souvent\", \"Toujours\", \"Jamais\"]).optional(),\r\n  usage_tontine: z.enum([\"Peu\", \"Souvent\", \"Toujours\", \"Jamais\"]).optional(),\r\n\r\n  // Cr√©dit Agricole\r\n  credit_intrants: z.boolean(), montant_credit_intrants: z.number().optional(),\r\n  credit_soudure: z.boolean(), montant_credit_soudure: z.number().optional(),\r\n  pret_scolaire: z.boolean(), montant_pret_scolaire: z.number().optional(),\r\n  credit_acces_intrants: z.boolean(), montant_credit_acces_intrants: z.number().optional(),\r\n  credit_biens_conso: z.boolean(), montant_credit_biens_conso: z.number().optional(),\r\n  credit_assurance_maladie: z.boolean(), montant_credit_assurance_maladie: z.number().optional(),\r\n  credit_assurance_agricole: z.boolean(), montant_credit_assurance_agricole: z.number().optional(),\r\n  credit_assurance_retraite: z.boolean(), montant_credit_assurance_retraite: z.number().optional(),\r\n  credit_conseil_agricole: z.boolean(), montant_credit_conseil_agricole: z.number().optional(),\r\n  credit_rehabilitation: z.boolean(), montant_credit_rehabilitation: z.number().optional(),\r\n\r\n  // Production Agricole\r\n  cacao_nb_plantations: z.number().min(0),\r\n  cacao_superficie: z.number().min(0),\r\n  cacao_production: z.number().min(0),\r\n\r\n  hevea: z.boolean(), hevea_nb_plantations: z.number().optional(), hevea_superficie: z.number().optional(), hevea_production: z.number().optional(),\r\n  palmier: z.boolean(), palmier_nb_plantations: z.number().optional(), palmier_superficie: z.number().optional(), palmier_production: z.number().optional(),\r\n  cafe: z.boolean(), cafe_nb_plantations: z.number().optional(), cafe_superficie: z.number().optional(), cafe_production: z.number().optional(),\r\n  mais: z.boolean(), mais_nb_plantations: z.number().optional(), mais_superficie: z.number().optional(), mais_production: z.number().optional(),\r\n  riz: z.boolean(), riz_nb_plantations: z.number().optional(), riz_superficie: z.number().optional(), riz_production: z.number().optional(),\r\n  maraichere: z.boolean(), maraichere_nb_plantations: z.number().optional(), maraichere_superficie: z.number().optional(), maraichere_production: z.number().optional(),\r\n});\r\n\r\ntype ProducteurFormData = z.infer<typeof producteurSchema>;\r\n\r\nexport default function ProducteurForm() {\r\n  const navigate = useNavigate();\r\n  const [age, setAge] = useState<number | null>(null);\r\n  const [generatedCode, setGeneratedCode] = useState<string>(\"---\");\r\n  \r\n  const { register, handleSubmit, formState: { errors }, setValue, watch } = useForm<ProducteurFormData>({\r\n    resolver: zodResolver(producteurSchema),\r\n    defaultValues: {\r\n      nb_femmes: 0,\r\n      nb_enfants: 0,\r\n      nb_filles: 0,\r\n      nb_garcons: 0,\r\n      nb_moins_5_ans: 0,\r\n      nb_enfants_scolarises: 0,\r\n      scolarises_primaire_filles: 0,\r\n      scolarises_primaire_garcons: 0,\r\n      scolarises_secondaire_filles: 0,\r\n      scolarises_secondaire_garcons: 0,\r\n      scolarises_superieur_filles: 0,\r\n      scolarises_superieur_garcons: 0,\r\n      eau_courante: false,\r\n      pompe_hydraulique: false,\r\n      puits: false,\r\n      riviere_marigot: false,\r\n      electricite_reseau: false,\r\n      electricite_solaire: false,\r\n      electricite_lampe: false,\r\n      electricite_aucun: false,\r\n      interet_compte_bancaire: false,\r\n      interet_epargne: false,\r\n      credit_intrants: false,\r\n      credit_soudure: false,\r\n      pret_scolaire: false,\r\n      credit_acces_intrants: false,\r\n      credit_biens_conso: false,\r\n      credit_assurance_maladie: false,\r\n      credit_assurance_agricole: false,\r\n      credit_assurance_retraite: false,\r\n      credit_conseil_agricole: false,\r\n      credit_rehabilitation: false,\r\n      cacao_nb_plantations: 0,\r\n      cacao_superficie: 0,\r\n      cacao_production: 0,\r\n      hevea: false,\r\n      palmier: false,\r\n      cafe: false,\r\n      mais: false,\r\n      riz: false,\r\n      maraichere: false,\r\n      telephones: [\"\"],\r\n    }\r\n  });\r\n\r\n  // Mise √† jour du code g√©n√©r√© en temps r√©el\r\n  const watchedOrg = watch(\"organisationId\");\r\n  const watchedSec = watch(\"sectionId\");\r\n  const watchedVil = watch(\"villageId\");\r\n\r\n  useEffect(() => {\r\n    if (watchedOrg && watchedSec && watchedVil) {\r\n      // Extraction des codes (Mock√©: on prend les 3 premi√®res lettres ou la partie apr√®s le tiret)\r\n      const org = watchedOrg.split(\"-\")[1] || \"ORG\"; // Ex: ORG-001 -> 001\r\n      const sec = watchedSec.split(\"-\")[1] || \"SEC\";\r\n      const vil = watchedVil.split(\"-\")[1] || \"VIL\";\r\n      // Le num√©ro d'ordre serait d√©termin√© par le backend, ici on simule '001'\r\n      setGeneratedCode(generateProducteurCode(org, sec, vil, 1));\r\n    }\r\n  }, [watchedOrg, watchedSec, watchedVil]);\r\n\r\n  const handleDateChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const date = e.target.value;\r\n    setValue(\"date_naissance\", date);\r\n    if (date) {\r\n      const calculatedAge = calculateAge(new Date(date));\r\n      setAge(calculatedAge);\r\n    } else {\r\n      setAge(null);\r\n    }\r\n  };\r\n\r\n  const onSubmit = (data: ProducteurFormData) => {\r\n    try {\r\n      console.log(\"Producteur cr√©√©:\", { code: generatedCode, age, ...data });\r\n      toast.success(`Producteur ${generatedCode} enregistr√© avec succ√®s`);\r\n      navigate(\"/producteurs\");\r\n    } catch (error) {\r\n      toast.error(\"Erreur lors de l'enregistrement\");\r\n    }\r\n  };\r\n\r\n  const renderRadioGroup = (name: string, label: string, options: string[]) => (\r\n    <div className=\"space-y-2\">\r\n      <Label>{label}</Label>\r\n      <RadioGroup onValueChange={(val) => setValue(name as any, val)} className=\"flex flex-wrap gap-4\">\r\n        {options.map((opt) => (\r\n          <div key={opt} className=\"flex items-center space-x-2\">\r\n            <RadioGroupItem value={opt} id={`${name}-${opt}`} />\r\n            <Label htmlFor={`${name}-${opt}`}>{opt}</Label>\r\n          </div>\r\n        ))}\r\n      </RadioGroup>\r\n    </div>\r\n  );\r\n\r\n  const renderCreditField = (name: string, label: string, montantName: string) => (\r\n    <div className=\"flex flex-col md:flex-row md:items-center gap-4 p-2 border rounded-md hover:bg-accent/5\">\r\n      <div className=\"flex items-center gap-2 w-1/3\">\r\n        <Checkbox checked={watch(name as any)} onCheckedChange={(chk) => setValue(name as any, !!chk)} />\r\n        <Label className=\"cursor-pointer\" onClick={() => setValue(name as any, !watch(name as any))}>{label}</Label>\r\n      </div>\r\n      {watch(name as any) && (\r\n        <div className=\"flex items-center gap-2 flex-1 animate-in fade-in slide-in-from-left-5\">\r\n          <Label>Montant souhait√©:</Label>\r\n          <Input \r\n            type=\"number\" \r\n            className=\"w-40\" \r\n            {...register(montantName as any, { valueAsNumber: true })} \r\n            placeholder=\"FCFA\"\r\n          />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  const renderCultureField = (name: string, label: string) => (\r\n    <div className=\"border p-4 rounded-lg space-y-4\">\r\n       <div className=\"flex items-center gap-2\">\r\n         <Checkbox checked={watch(name as any)} onCheckedChange={(chk) => setValue(name as any, !!chk)} />\r\n         <Label className=\"font-bold text-lg\">{label}</Label>\r\n       </div>\r\n       {watch(name as any) && (\r\n         <div className=\"grid grid-cols-3 gap-4 pl-6 border-l-2 border-primary/20\">\r\n           <div>\r\n             <Label>Nb Plantations</Label>\r\n             <Input type=\"number\" {...register(`${name}_nb_plantations` as any, { valueAsNumber: true })} />\r\n           </div>\r\n           <div>\r\n             <Label>Superficie (Ha)</Label>\r\n             <Input type=\"number\" step=\"0.01\" {...register(`${name}_superficie` as any, { valueAsNumber: true })} />\r\n           </div>\r\n           <div>\r\n             <Label>Production (T)</Label>\r\n             <Input type=\"number\" step=\"0.01\" {...register(`${name}_production` as any, { valueAsNumber: true })} />\r\n           </div>\r\n         </div>\r\n       )}\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-6 max-w-5xl mx-auto\">\r\n      <div className=\"flex items-center gap-4\">\r\n        <Button variant=\"ghost\" size=\"icon\" onClick={() => navigate(\"/producteurs\")}>\r\n          <ArrowLeft className=\"h-5 w-5\" />\r\n        </Button>\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold text-foreground\">Nouveau Producteur</h1>\r\n          <p className=\"text-muted-foreground\">Saisie d√©taill√©e du profil producteur</p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Instructions (#11) */}\r\n      <Alert className=\"bg-blue-50 border-blue-200 text-blue-800\">\r\n        <Info className=\"h-4 w-4\" />\r\n        <AlertTitle>Instructions aux Enqu√™teurs</AlertTitle>\r\n        <AlertDescription>\r\n          1. V√©rifiez que vous √™tes dans le bon village avant de commencer.<br/>\r\n          2. Demandez la pi√®ce d'identit√© du producteur pour saisir le nom exact.<br/>\r\n          3. Prenez des photos claires et bien cadr√©es.<br/>\r\n          4. Tous les champs marqu√©s d'un ast√©risque (*) sont obligatoires.\r\n        </AlertDescription>\r\n      </Alert>\r\n\r\n      <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-8\">\r\n        \r\n        {/* 1. Rattachement & Infos G√©n√©rales */}\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle className=\"bg-primary/10 p-2 rounded text-primary\">Informations G√©n√©rales</CardTitle>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-6\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n               <div>\r\n                 <Label>Organisation *</Label>\r\n                 <Select onValueChange={(v) => setValue(\"organisationId\", v)}>\r\n                   <SelectTrigger><SelectValue placeholder=\"Choisir...\" /></SelectTrigger>\r\n                   <SelectContent>\r\n                     <SelectItem value=\"ORG-001\">SCOOP-CA Divo</SelectItem>\r\n                     <SelectItem value=\"ORG-002\">CAVALLY COOP</SelectItem>\r\n                   </SelectContent>\r\n                 </Select>\r\n               </div>\r\n               <div>\r\n                 <Label>Section *</Label>\r\n                 <Select onValueChange={(v) => setValue(\"sectionId\", v)}>\r\n                   <SelectTrigger><SelectValue placeholder=\"Choisir...\" /></SelectTrigger>\r\n                   <SelectContent>\r\n                     <SelectItem value=\"SEC-001\">Section Nord</SelectItem>\r\n                     <SelectItem value=\"SEC-002\">Section Sud</SelectItem>\r\n                   </SelectContent>\r\n                 </Select>\r\n               </div>\r\n               <div>\r\n                 <Label>Village *</Label>\r\n                 <Select onValueChange={(v) => setValue(\"villageId\", v)}>\r\n                   <SelectTrigger><SelectValue placeholder=\"Choisir...\" /></SelectTrigger>\r\n                   <SelectContent>\r\n                     <SelectItem value=\"VIL-001\">Village Centre</SelectItem>\r\n                     <SelectItem value=\"VIL-002\">Campement A</SelectItem>\r\n                   </SelectContent>\r\n                 </Select>\r\n               </div>\r\n            </div>\r\n            \r\n            {/* Code G√©n√©r√© (#10) */}\r\n            {watchedOrg && watchedSec && watchedVil && (\r\n              <div className=\"p-3 bg-muted/50 rounded-md border border-dashed border-primary\">\r\n                <span className=\"text-sm text-muted-foreground block mb-1\">Code Producteur G√©n√©r√© :</span>\r\n                <span className=\"text-xl font-mono font-bold text-primary tracking-wider\">{generatedCode}</span>\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              <div>\r\n                <Label>Nom et Pr√©noms *</Label>\r\n                <Input {...register(\"nom_complet\")} className=\"uppercase\" placeholder=\"Ex: KOUASSI JEAN\" />\r\n                {errors.nom_complet && <p className=\"text-destructive text-sm\">{errors.nom_complet.message}</p>}\r\n              </div>\r\n              <div>\r\n                <Label>Lieu de naissance</Label>\r\n                <Input {...register(\"lieu_naissance\")} className=\"uppercase\" />\r\n              </div>\r\n              <div>\r\n                <Label>Date de naissance *</Label>\r\n                <div className=\"flex gap-4 items-center\">\r\n                  <Input type=\"date\" {...register(\"date_naissance\")} onChange={handleDateChange} />\r\n                  {age !== null && (\r\n                    <div className=\"bg-primary/10 text-primary px-3 py-2 rounded font-bold min-w-[100px] text-center\">\r\n                      {age} ans\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <MultiPhone \r\n                  label=\"Num√©ros de t√©l√©phone\" \r\n                  values={watch(\"telephones\") || []} \r\n                  onChange={(vals) => setValue(\"telephones\", vals)} \r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              <PhotoCapture label=\"Photo Pi√®ce d'identit√©\" value={watch(\"photo_cni\")} onChange={(v) => setValue(\"photo_cni\", v)} />\r\n              <PhotoCapture label=\"Photo Planteur\" value={watch(\"photo_planteur\")} onChange={(v) => setValue(\"photo_planteur\", v)} />\r\n            </div>\r\n\r\n            <div className=\"border-t pt-4\">\r\n              <h3 className=\"font-semibold mb-2\">Composition Familiale</h3>\r\n              <div className=\"grid grid-cols-2 md:grid-cols-6 gap-4\">\r\n                 <div><Label>Femmes</Label><Input type=\"number\" {...register(\"nb_femmes\", { valueAsNumber: true })} /></div>\r\n                 <div><Label>Enfants Total</Label><Input type=\"number\" {...register(\"nb_enfants\", { valueAsNumber: true })} /></div>\r\n                 <div><Label>Filles</Label><Input type=\"number\" {...register(\"nb_filles\", { valueAsNumber: true })} /></div>\r\n                 <div><Label>Gar√ßons</Label><Input type=\"number\" {...register(\"nb_garcons\", { valueAsNumber: true })} /></div>\r\n                 <div><Label>Moins de 5 ans</Label><Input type=\"number\" {...register(\"nb_moins_5_ans\", { valueAsNumber: true })} /></div>\r\n                 <div><Label>Scolaris√©s Total</Label><Input type=\"number\" {...register(\"nb_enfants_scolarises\", { valueAsNumber: true })} /></div>\r\n              </div>\r\n              \r\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4 bg-muted/20 p-3 rounded\">\r\n                <div>\r\n                  <Label className=\"font-semibold block mb-2\">Primaire</Label>\r\n                  <div className=\"flex gap-2\">\r\n                    <div><Label className=\"text-xs\">Filles</Label><Input type=\"number\" {...register(\"scolarises_primaire_filles\", { valueAsNumber: true })} /></div>\r\n                    <div><Label className=\"text-xs\">Gar√ßons</Label><Input type=\"number\" {...register(\"scolarises_primaire_garcons\", { valueAsNumber: true })} /></div>\r\n                  </div>\r\n                </div>\r\n                <div>\r\n                  <Label className=\"font-semibold block mb-2\">Secondaire</Label>\r\n                  <div className=\"flex gap-2\">\r\n                    <div><Label className=\"text-xs\">Filles</Label><Input type=\"number\" {...register(\"scolarises_secondaire_filles\", { valueAsNumber: true })} /></div>\r\n                    <div><Label className=\"text-xs\">Gar√ßons</Label><Input type=\"number\" {...register(\"scolarises_secondaire_garcons\", { valueAsNumber: true })} /></div>\r\n                  </div>\r\n                </div>\r\n                <div>\r\n                  <Label className=\"font-semibold block mb-2\">Sup√©rieur</Label>\r\n                  <div className=\"flex gap-2\">\r\n                    <div><Label className=\"text-xs\">Filles</Label><Input type=\"number\" {...register(\"scolarises_superieur_filles\", { valueAsNumber: true })} /></div>\r\n                    <div><Label className=\"text-xs\">Gar√ßons</Label><Input type=\"number\" {...register(\"scolarises_superieur_garcons\", { valueAsNumber: true })} /></div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* 2. Conditions de vie */}\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle className=\"bg-primary/10 p-2 rounded text-primary\">Conditions de Vie</CardTitle>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-6\">\r\n             <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n               <div>\r\n                 <h3 className=\"font-semibold mb-2\">Eau</h3>\r\n                 <div className=\"space-y-2\">\r\n                   <div className=\"flex items-center gap-2\"><Checkbox checked={watch(\"eau_courante\")} onCheckedChange={(c) => setValue(\"eau_courante\", !!c)} /><Label>Eau courante</Label></div>\r\n                   <div className=\"flex items-center gap-2\"><Checkbox checked={watch(\"pompe_hydraulique\")} onCheckedChange={(c) => setValue(\"pompe_hydraulique\", !!c)} /><Label>Pompe hydraulique</Label></div>\r\n                   <div className=\"flex items-center gap-2\"><Checkbox checked={watch(\"puits\")} onCheckedChange={(c) => setValue(\"puits\", !!c)} /><Label>Puits</Label></div>\r\n                   <div className=\"flex items-center gap-2\"><Checkbox checked={watch(\"riviere_marigot\")} onCheckedChange={(c) => setValue(\"riviere_marigot\", !!c)} /><Label>Rivi√®re / Marigot</Label></div>\r\n                 </div>\r\n               </div>\r\n               <div>\r\n                 <h3 className=\"font-semibold mb-2\">Electricit√©</h3>\r\n                 <div className=\"space-y-2\">\r\n                   <div className=\"flex items-center gap-2\"><Checkbox checked={watch(\"electricite_reseau\")} onCheckedChange={(c) => setValue(\"electricite_reseau\", !!c)} /><Label>R√©seau national</Label></div>\r\n                   <div className=\"flex items-center gap-2\"><Checkbox checked={watch(\"electricite_solaire\")} onCheckedChange={(c) => setValue(\"electricite_solaire\", !!c)} /><Label>Solaire</Label></div>\r\n                   <div className=\"flex items-center gap-2\"><Checkbox checked={watch(\"electricite_lampe\")} onCheckedChange={(c) => setValue(\"electricite_lampe\", !!c)} /><Label>Lampe</Label></div>\r\n                   <div className=\"flex items-center gap-2\"><Checkbox checked={watch(\"electricite_aucun\")} onCheckedChange={(c) => setValue(\"electricite_aucun\", !!c)} /><Label>Pas du tout</Label></div>\r\n                 </div>\r\n               </div>\r\n             </div>\r\n\r\n             <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 border-t pt-4\">\r\n               <div>\r\n                 <Label>Mat√©riaux de construction</Label>\r\n                 <Select onValueChange={(v) => setValue(\"materiaux_mur\", v as any)}>\r\n                   <SelectTrigger><SelectValue placeholder=\"Choisir...\" /></SelectTrigger>\r\n                   <SelectContent>\r\n                     <SelectItem value=\"Terre battue s√©ch√©e\">Terre battue s√©ch√©e</SelectItem>\r\n                     <SelectItem value=\"Briques/Ciment\">Briques/Ciment</SelectItem>\r\n                     <SelectItem value=\"Bois\">Bois</SelectItem>\r\n                     <SelectItem value=\"Paille/pis√©\">Paille/pis√©</SelectItem>\r\n                     <SelectItem value=\"Mat√©riaux modernes\">Mat√©riaux modernes</SelectItem>\r\n                   </SelectContent>\r\n                 </Select>\r\n               </div>\r\n               <div>\r\n                 <Label>Toiture</Label>\r\n                 <Select onValueChange={(v) => setValue(\"toiture\", v as any)}>\r\n                   <SelectTrigger><SelectValue placeholder=\"Choisir...\" /></SelectTrigger>\r\n                   <SelectContent>\r\n                     <SelectItem value=\"T√¥le\">T√¥le</SelectItem>\r\n                     <SelectItem value=\"Bambou-Plastique\">Bambou-Plastique</SelectItem>\r\n                     <SelectItem value=\"Paille-Plastique\">Paille-Plastique</SelectItem>\r\n                     <SelectItem value=\"Bambou-Paille\">Bambou-Paille</SelectItem>\r\n                   </SelectContent>\r\n                 </Select>\r\n               </div>\r\n             </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* 3. Acc√®s aux soins & Moyens */}\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle className=\"bg-primary/10 p-2 rounded text-primary\">Sant√© & Finance</CardTitle>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-6\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              {renderRadioGroup(\"soins_plantes_tradi\", \"Plantes traditionnelles\", [\"Toujours\", \"Souvent\", \"Jamais\"])}\r\n              {renderRadioGroup(\"soins_dispensaire\", \"Dispensaire\", [\"Toujours\", \"Souvent\", \"Jamais\"])}\r\n            </div>\r\n\r\n            <div className=\"border-t pt-4\">\r\n               <h3 className=\"font-semibold mb-3\">Moyens utilis√©s</h3>\r\n               <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                 {renderRadioGroup(\"usage_mobile_money\", \"Mobile Money\", [\"Peu\", \"Souvent\", \"Toujours\", \"Jamais\"])}\r\n                 {renderRadioGroup(\"usage_virement\", \"Virement Bancaire\", [\"Peu\", \"Souvent\", \"Toujours\", \"Jamais\"])}\r\n                 {renderRadioGroup(\"usage_especes\", \"Esp√®ces\", [\"Peu\", \"Souvent\", \"Toujours\", \"Jamais\"])}\r\n                 {renderRadioGroup(\"usage_tontine\", \"Tontine commune\", [\"Peu\", \"Souvent\", \"Toujours\", \"Jamais\"])}\r\n               </div>\r\n            </div>\r\n\r\n            <div className=\"border-t pt-4\">\r\n              <h3 className=\"font-semibold mb-3\">Cr√©dit & Epargne</h3>\r\n              <div className=\"space-y-2\">\r\n                 {renderCreditField(\"interet_compte_bancaire\", \"Int√©ress√© par un compte bancaire\", \"montant_compte_bancaire\")}\r\n                 {renderCreditField(\"interet_epargne\", \"Int√©ress√© par une √©pargne\", \"montant_epargne\")}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"border-t pt-4\">\r\n              <h3 className=\"font-semibold mb-3\">Cr√©dit Agricole (Int√©r√™t)</h3>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                 {renderCreditField(\"credit_intrants\", \"Cr√©dit intrants agricoles\", \"montant_credit_intrants\")}\r\n                 {renderCreditField(\"credit_soudure\", \"Cr√©dit de soudure\", \"montant_credit_soudure\")}\r\n                 {renderCreditField(\"pret_scolaire\", \"Pr√™t scolaire\", \"montant_pret_scolaire\")}\r\n                 {renderCreditField(\"credit_acces_intrants\", \"Cr√©dit acc√®s aux intrants\", \"montant_credit_acces_intrants\")}\r\n                 {renderCreditField(\"credit_biens_conso\", \"Cr√©dit biens consommation\", \"montant_credit_biens_conso\")}\r\n                 {renderCreditField(\"credit_assurance_maladie\", \"Assurance maladie\", \"montant_credit_assurance_maladie\")}\r\n                 {renderCreditField(\"credit_assurance_agricole\", \"Assurance agricole\", \"montant_credit_assurance_agricole\")}\r\n                 {renderCreditField(\"credit_assurance_retraite\", \"Assurance retraite\", \"montant_credit_assurance_retraite\")}\r\n                 {renderCreditField(\"credit_conseil_agricole\", \"Conseil agricole\", \"montant_credit_conseil_agricole\")}\r\n                 {renderCreditField(\"credit_rehabilitation\", \"Cr√©dit r√©habilitation\", \"montant_credit_rehabilitation\")}\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* 4. Production Agricole */}\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle className=\"bg-primary/10 p-2 rounded text-primary\">Production Agricole</CardTitle>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-6\">\r\n            \r\n            {/* Cacao (Toujours pr√©sent) */}\r\n            <div className=\"border p-4 rounded-lg space-y-4 bg-muted/10\">\r\n              <h3 className=\"font-bold text-lg\">Cacao</h3>\r\n              <div className=\"grid grid-cols-3 gap-4\">\r\n                 <div>\r\n                   <Label>Nb Plantations</Label>\r\n                   <Input type=\"number\" {...register(\"cacao_nb_plantations\", { valueAsNumber: true })} />\r\n                 </div>\r\n                 <div>\r\n                   <Label>Superficie Totale (Ha)</Label>\r\n                   <Input type=\"number\" step=\"0.01\" {...register(\"cacao_superficie\", { valueAsNumber: true })} />\r\n                 </div>\r\n                 <div>\r\n                   <Label>Production Totale (T)</Label>\r\n                   <Input type=\"number\" step=\"0.01\" {...register(\"cacao_production\", { valueAsNumber: true })} />\r\n                 </div>\r\n              </div>\r\n            </div>\r\n\r\n            {renderCultureField(\"hevea\", \"H√©v√©a\")}\r\n            {renderCultureField(\"palmier\", \"Palmier √† huile\")}\r\n            {renderCultureField(\"cafe\", \"Caf√©\")}\r\n            {renderCultureField(\"mais\", \"Ma√Øs\")}\r\n            {renderCultureField(\"riz\", \"Riz\")}\r\n            {renderCultureField(\"maraichere\", \"Culture Mara√Æch√®re\")}\r\n\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <div className=\"flex gap-4 justify-end pt-4\">\r\n          <Button type=\"button\" variant=\"outline\" size=\"lg\" onClick={() => navigate(\"/producteurs\")}>\r\n            Annuler\r\n          </Button>\r\n          <Button type=\"submit\" size=\"lg\" className=\"gap-2 bg-primary hover:bg-primary/90\">\r\n            <Save className=\"h-5 w-5\" />\r\n            Enregistrer le Producteur\r\n          </Button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\pages\\Producteurs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\pages\\Profile.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\pages\\SectionDetails.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\pages\\SectionForm.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":187,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":187,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7671,7674],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7671,7674],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":192,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":192,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7970,7973],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7970,7973],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":197,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":197,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8153,8156],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8153,8156],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":198,"column":65,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":198,"endColumn":68,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8233,8236],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8233,8236],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":204,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":204,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8429,8432],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8429,8432],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":205,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":205,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8498,8501],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8498,8501],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":218,"column":67,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":218,"endColumn":70,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8908,8911],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8908,8911],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":223,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":223,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9116,9119],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9116,9119],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":224,"column":79,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":224,"endColumn":82,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9202,9205],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9202,9205],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":230,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":230,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9360,9363],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9360,9363],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":234,"column":74,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":234,"endColumn":77,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9548,9551],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9548,9551],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":245,"column":76,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":245,"endColumn":79,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10059,10062],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10059,10062],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":261,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":261,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10690,10693],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10690,10693],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":261,"column":106,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":261,"endColumn":109,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10746,10749],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10746,10749],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":265,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":265,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10871,10874],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10871,10874],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":270,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":270,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11122,11125],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11122,11125],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":276,"column":70,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":276,"endColumn":73,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11367,11370],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11367,11370],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":280,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":280,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11547,11550],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11547,11550],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":284,"column":80,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":284,"endColumn":83,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11732,11735],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11732,11735],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":288,"column":85,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":288,"endColumn":88,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11952,11955],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11952,11955],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":470,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":470,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20256,20259],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20256,20259],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":477,"column":103,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":477,"endColumn":106,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20751,20754],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20751,20754],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":477,"column":157,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":477,"endColumn":160,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20805,20808],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20805,20808],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":23,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { z } from \"zod\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Checkbox } from \"@/components/ui/checkbox\";\r\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\r\nimport PhotoCapture from \"@/components/forms/PhotoCapture\";\r\nimport GPSCapture from \"@/components/forms/GPSCapture\";\r\nimport MultiPhone from \"@/components/forms/MultiPhone\";\r\nimport { ArrowLeft, Save } from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\nimport { generateSectionCode } from \"@/utils/codeGenerators\";\r\n\r\n// Sch√©ma de validation\r\nconst sectionSchema = z.object({\r\n  organisationId: z.string().min(1, \"L'organisation est obligatoire\"),\r\n  \r\n  // Infos G√©n√©rales\r\n  localite: z.string().min(1, \"La localit√© est obligatoire\"),\r\n  latitude: z.number().optional(),\r\n  longitude: z.number().optional(),\r\n  photo_magasin: z.string().optional(),\r\n  surface_magasin: z.number().optional(),\r\n  photo_aire_sechage: z.string().optional(),\r\n  date_creation_section: z.string().optional(), // Date input returns string\r\n  nom: z.string().min(1, \"Le nom est obligatoire\"),\r\n  telephone: z.string().optional(), // Single phone field per image? Image says \"Num√©ro de t√©l√©phone de la section\"\r\n  nb_producteurs: z.number().min(0),\r\n  tonnage_c_precedente: z.number().min(0),\r\n  tonnage_c_cours: z.number().min(0),\r\n  tonnage_potentiel: z.number().min(0),\r\n\r\n  // Dirigeants\r\n  president_nom: z.string().min(1, \"Nom du pr√©sident obligatoire\"),\r\n  president_date_naissance: z.string().optional(),\r\n  president_photo: z.string().optional(),\r\n  president_contact: z.array(z.string()).min(1, \"Contact obligatoire\"),\r\n\r\n  secretaire_nom: z.string().min(1, \"Nom du secr√©taire obligatoire\"),\r\n  secretaire_date_naissance: z.string().optional(),\r\n  secretaire_photo: z.string().optional(),\r\n  secretaire_contact: z.array(z.string()).min(1, \"Contact obligatoire\"),\r\n\r\n  // Personnel\r\n  magasinier_nom: z.string().min(1, \"Nom magasinier obligatoire\"),\r\n  magasinier_date_naissance: z.string().optional(),\r\n  magasinier_photo: z.string().optional(),\r\n  magasinier_contact: z.array(z.string()),\r\n\r\n  peseur_nom: z.string().min(1, \"Nom peseur obligatoire\"),\r\n  peseur_date_naissance: z.string().optional(),\r\n  peseur_photo: z.string().optional(),\r\n  peseur_contact: z.array(z.string()),\r\n\r\n  has_analyseur: z.boolean(),\r\n  analyseur_nom: z.string().optional(),\r\n  analyseur_date_naissance: z.string().optional(),\r\n  analyseur_photo: z.string().optional(),\r\n  analyseur_contact: z.array(z.string()).optional(),\r\n\r\n  // Equipements - V√©hicules\r\n  vehicule_camionnette_nombre: z.number().min(0),\r\n  vehicule_camionnette_etat: z.enum([\"Bon\", \"Moyen\", \"Mauvais\"]).optional(),\r\n  vehicule_camionnette_statut: z.enum([\"En marche\", \"En panne\"]).optional(),\r\n  vehicule_camionnette_proprietaire: z.boolean(),\r\n\r\n  vehicule_liaison_nombre: z.number().min(0),\r\n  vehicule_liaison_etat: z.enum([\"Bon\", \"Moyen\", \"Mauvais\"]).optional(),\r\n  vehicule_liaison_statut: z.enum([\"En marche\", \"En panne\"]).optional(),\r\n  vehicule_liaison_proprietaire: z.boolean(),\r\n\r\n  vehicule_tricycle_nombre: z.number().min(0),\r\n  vehicule_tricycle_etat: z.enum([\"Bon\", \"Moyen\", \"Mauvais\"]).optional(),\r\n  vehicule_tricycle_statut: z.enum([\"En marche\", \"En panne\"]).optional(),\r\n  vehicule_tricycle_proprietaire: z.boolean(),\r\n\r\n  vehicule_moto_nombre: z.number().min(0),\r\n  vehicule_moto_etat: z.enum([\"Bon\", \"Moyen\", \"Mauvais\"]).optional(),\r\n  vehicule_moto_statut: z.enum([\"En marche\", \"En panne\"]).optional(),\r\n  vehicule_moto_proprietaire: z.boolean(),\r\n\r\n  // Mat√©riel\r\n  materiel_dickey_john: z.boolean(),\r\n  materiel_dickey_john_photo: z.string().optional(),\r\n  materiel_kpm: z.boolean(),\r\n  materiel_kpm_photo: z.string().optional(),\r\n  materiel_couteaux: z.boolean(),\r\n  materiel_couteaux_photo: z.string().optional(),\r\n  materiel_tableau: z.boolean(),\r\n  materiel_tableau_photo: z.string().optional(),\r\n  materiel_sondes: z.boolean(),\r\n  materiel_sondes_photo: z.string().optional(),\r\n  materiel_bascule: z.boolean(),\r\n  materiel_bascule_photo: z.string().optional(),\r\n  materiel_bascule_capacite: z.number().optional(),\r\n\r\n  // Commercialisation\r\n  comm_coop: z.boolean(),\r\n  comm_coop_pct: z.number().optional(),\r\n  comm_coop_lieu: z.string().optional(),\r\n  comm_coop_prix_campagne: z.number().optional(),\r\n  comm_coop_prix_intermediaire: z.number().optional(),\r\n\r\n  comm_pisteur: z.boolean(),\r\n  comm_pisteur_noms: z.string().optional(),\r\n  comm_pisteur_pct: z.number().optional(),\r\n  comm_pisteur_lieu: z.string().optional(),\r\n  comm_pisteur_prix_campagne: z.number().optional(),\r\n  comm_pisteur_prix_intermediaire: z.number().optional(),\r\n\r\n  comm_autre_coop: z.boolean(),\r\n  comm_autre_coop_noms: z.string().optional(),\r\n  comm_autre_coop_pct: z.number().optional(),\r\n  comm_autre_coop_lieu: z.string().optional(),\r\n  comm_autre_coop_prix_campagne: z.number().optional(),\r\n  comm_autre_coop_prix_intermediaire: z.number().optional(),\r\n\r\n  comm_autre_acheteur: z.boolean(),\r\n  comm_autre_acheteur_noms: z.string().optional(),\r\n  comm_autre_acheteur_pct: z.number().optional(),\r\n  comm_autre_acheteur_lieu: z.string().optional(),\r\n  comm_autre_acheteur_prix_campagne: z.number().optional(),\r\n  comm_autre_acheteur_prix_intermediaire: z.number().optional(),\r\n});\r\n\r\ntype SectionFormData = z.infer<typeof sectionSchema>;\r\n\r\nexport default function SectionForm() {\r\n  const navigate = useNavigate();\r\n  \r\n  const { register, handleSubmit, formState: { errors }, setValue, watch } = useForm<SectionFormData>({\r\n    resolver: zodResolver(sectionSchema),\r\n    defaultValues: {\r\n      nb_producteurs: 0,\r\n      tonnage_c_precedente: 0,\r\n      tonnage_c_cours: 0,\r\n      tonnage_potentiel: 0,\r\n      president_contact: [\"\"],\r\n      secretaire_contact: [\"\"],\r\n      magasinier_contact: [\"\"],\r\n      peseur_contact: [\"\"],\r\n      analyseur_contact: [\"\"],\r\n      has_analyseur: false,\r\n      vehicule_camionnette_nombre: 0,\r\n      vehicule_camionnette_proprietaire: false,\r\n      vehicule_liaison_nombre: 0,\r\n      vehicule_liaison_proprietaire: false,\r\n      vehicule_tricycle_nombre: 0,\r\n      vehicule_tricycle_proprietaire: false,\r\n      vehicule_moto_nombre: 0,\r\n      vehicule_moto_proprietaire: false,\r\n      materiel_dickey_john: false,\r\n      materiel_kpm: false,\r\n      materiel_couteaux: false,\r\n      materiel_tableau: false,\r\n      materiel_sondes: false,\r\n      materiel_bascule: false,\r\n      comm_coop: false,\r\n      comm_pisteur: false,\r\n      comm_autre_coop: false,\r\n      comm_autre_acheteur: false,\r\n    }\r\n  });\r\n\r\n  const onSubmit = (data: SectionFormData) => {\r\n    try {\r\n      const code = generateSectionCode(Math.floor(Math.random() * 100));\r\n      console.log(\"Section cr√©√©e:\", { code, ...data });\r\n      toast.success(`Section ${code} enregistr√©e avec succ√®s`);\r\n      navigate(\"/sections\");\r\n    } catch (error) {\r\n      toast.error(\"Erreur lors de l'enregistrement\");\r\n    }\r\n  };\r\n\r\n  const renderPersonneFields = (prefix: string, title: string) => (\r\n    <div className=\"border p-4 rounded-lg space-y-4\">\r\n      <h3 className=\"font-semibold text-lg text-primary\">{title}</h3>\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n        <div>\r\n          <Label>Nom et Pr√©nom *</Label>\r\n          <Input {...register(`${prefix}_nom` as any)} placeholder=\"Nom complet\" />\r\n          {errors[prefix + \"_nom\" as keyof SectionFormData] && <p className=\"text-destructive text-sm\">Requis</p>}\r\n        </div>\r\n        <div>\r\n          <Label>Date de naissance</Label>\r\n          <Input type=\"date\" {...register(`${prefix}_date_naissance` as any)} />\r\n        </div>\r\n        <div className=\"md:col-span-2\">\r\n          <MultiPhone \r\n            label=\"Contact t√©l√©phonique\" \r\n            values={watch(`${prefix}_contact` as any) || [\"\"]} \r\n            onChange={(vals) => setValue(`${prefix}_contact` as any, vals)} \r\n          />\r\n        </div>\r\n        <div className=\"md:col-span-2\">\r\n          <PhotoCapture \r\n            label={`Photo ${title}`} \r\n            value={watch(`${prefix}_photo` as any)} \r\n            onChange={(val) => setValue(`${prefix}_photo` as any, val)} \r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  const renderVehiculeFields = (prefix: string, label: string) => (\r\n    <div className=\"border p-3 rounded space-y-2\">\r\n      <h4 className=\"font-semibold\">{label}</h4>\r\n      <div className=\"grid grid-cols-2 gap-2\">\r\n        <div>\r\n          <Label>Nombre</Label>\r\n          <Input type=\"number\" {...register(`${prefix}_nombre` as any, { valueAsNumber: true })} />\r\n        </div>\r\n        <div>\r\n           <div className=\"flex items-center gap-2 mt-8\">\r\n             <Checkbox \r\n               checked={watch(`${prefix}_proprietaire` as any)} \r\n               onCheckedChange={(chk) => setValue(`${prefix}_proprietaire` as any, !!chk)} \r\n             />\r\n             <Label>Propri√©taire</Label>\r\n           </div>\r\n        </div>\r\n      </div>\r\n      {watch(`${prefix}_nombre` as any) > 0 && (\r\n        <div className=\"grid grid-cols-2 gap-2\">\r\n          <div>\r\n            <Label>√âtat</Label>\r\n            <Select onValueChange={(val) => setValue(`${prefix}_etat` as any, val)}>\r\n              <SelectTrigger><SelectValue placeholder=\"√âtat\" /></SelectTrigger>\r\n              <SelectContent>\r\n                <SelectItem value=\"Bon\">Bon</SelectItem>\r\n                <SelectItem value=\"Moyen\">Moyen</SelectItem>\r\n                <SelectItem value=\"Mauvais\">Mauvais</SelectItem>\r\n              </SelectContent>\r\n            </Select>\r\n          </div>\r\n          <div>\r\n            <Label>Statut</Label>\r\n            <Select onValueChange={(val) => setValue(`${prefix}_statut` as any, val)}>\r\n              <SelectTrigger><SelectValue placeholder=\"Statut\" /></SelectTrigger>\r\n              <SelectContent>\r\n                <SelectItem value=\"En marche\">En marche</SelectItem>\r\n                <SelectItem value=\"En panne\">En panne</SelectItem>\r\n              </SelectContent>\r\n            </Select>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  const renderCommFields = (prefix: string, title: string, hasNameField: boolean = false) => (\r\n    <div className=\"border p-4 rounded space-y-3\">\r\n       <div className=\"flex items-center gap-2\">\r\n         <Checkbox checked={watch(`${prefix}` as any)} onCheckedChange={(chk) => setValue(`${prefix}` as any, !!chk)} />\r\n         <Label className=\"font-bold\">{title}</Label>\r\n       </div>\r\n       \r\n       {watch(`${prefix}` as any) && (\r\n         <div className=\"space-y-3 pl-6 border-l-2 border-primary/20\">\r\n            {hasNameField && (\r\n              <div>\r\n                <Label>Noms (s√©par√©s par virgule)</Label>\r\n                <Input {...register(`${prefix}_noms` as any)} />\r\n              </div>\r\n            )}\r\n            <div className=\"grid grid-cols-2 gap-3\">\r\n              <div>\r\n                <Label>% Quantit√© concern√©e</Label>\r\n                <Input type=\"number\" {...register(`${prefix}_pct` as any, { valueAsNumber: true })} />\r\n              </div>\r\n              <div>\r\n                <Label>Lieu de vente</Label>\r\n                <Input {...register(`${prefix}_lieu` as any)} />\r\n              </div>\r\n              <div>\r\n                <Label>Prix Campagne (FCFA)</Label>\r\n                <Input type=\"number\" {...register(`${prefix}_prix_campagne` as any, { valueAsNumber: true })} />\r\n              </div>\r\n              <div>\r\n                <Label>Prix Interm√©diaire (FCFA)</Label>\r\n                <Input type=\"number\" {...register(`${prefix}_prix_intermediaire` as any, { valueAsNumber: true })} />\r\n              </div>\r\n            </div>\r\n         </div>\r\n       )}\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-6 max-w-5xl mx-auto\">\r\n      <div className=\"flex items-center gap-4\">\r\n        <Button variant=\"ghost\" size=\"icon\" onClick={() => navigate(\"/sections\")}>\r\n          <ArrowLeft className=\"h-5 w-5\" />\r\n        </Button>\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold text-foreground\">Nouvelle Section</h1>\r\n          <p className=\"text-muted-foreground\">Saisie d√©taill√©e des informations de la section</p>\r\n        </div>\r\n      </div>\r\n\r\n      <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-8\">\r\n        \r\n        {/* 1. Informations G√©n√©rales */}\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle className=\"bg-primary/10 p-2 rounded text-primary\">Informations G√©n√©rales</CardTitle>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-4\">\r\n             <div>\r\n                <Label>Organisation Parente *</Label>\r\n                <Select onValueChange={(val) => setValue(\"organisationId\", val)}>\r\n                  <SelectTrigger><SelectValue placeholder=\"S√©lectionner...\" /></SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"ORG-001\">SCOOP-CA Divo</SelectItem>\r\n                    <SelectItem value=\"ORG-002\">Union Gagnoa</SelectItem>\r\n                  </SelectContent>\r\n                </Select>\r\n                {errors.organisationId && <p className=\"text-destructive text-sm\">Requis</p>}\r\n             </div>\r\n\r\n             <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n               <div>\r\n                 <Label>Nom de la section *</Label>\r\n                 <Input {...register(\"nom\")} />\r\n                 {errors.nom && <p className=\"text-destructive text-sm\">Requis</p>}\r\n               </div>\r\n               <div>\r\n                 <Label>Localit√© *</Label>\r\n                 <Input {...register(\"localite\")} />\r\n                 {errors.localite && <p className=\"text-destructive text-sm\">Requis</p>}\r\n               </div>\r\n               <div>\r\n                 <Label>Date de cr√©ation</Label>\r\n                 <Input type=\"date\" {...register(\"date_creation_section\")} />\r\n               </div>\r\n               <div>\r\n                 <Label>T√©l√©phone Section</Label>\r\n                 <Input type=\"tel\" {...register(\"telephone\")} />\r\n               </div>\r\n             </div>\r\n\r\n             <div className=\"border-t pt-4\">\r\n               <Label className=\"mb-2 block font-semibold\">Coordonn√©es GPS</Label>\r\n               <GPSCapture \r\n                 onChange={(c) => { setValue(\"latitude\", c.latitude); setValue(\"longitude\", c.longitude); }}\r\n                 latitude={watch(\"latitude\")}\r\n                 longitude={watch(\"longitude\")}\r\n               />\r\n             </div>\r\n\r\n             <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n               <PhotoCapture label=\"Photo Magasin\" value={watch(\"photo_magasin\")} onChange={(v) => setValue(\"photo_magasin\", v)} />\r\n               <div>\r\n                 <Label>Surface Magasin (m¬≤)</Label>\r\n                 <Input type=\"number\" {...register(\"surface_magasin\", { valueAsNumber: true })} />\r\n               </div>\r\n               <PhotoCapture label=\"Photo Aire de s√©chage\" value={watch(\"photo_aire_sechage\")} onChange={(v) => setValue(\"photo_aire_sechage\", v)} />\r\n             </div>\r\n\r\n             <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 bg-muted/30 p-4 rounded\">\r\n                <div>\r\n                  <Label>Producteurs d√©clar√©s</Label>\r\n                  <Input type=\"number\" {...register(\"nb_producteurs\", { valueAsNumber: true })} />\r\n                </div>\r\n                <div>\r\n                  <Label>Tonnage Pr√©c√©dent</Label>\r\n                  <Input type=\"number\" {...register(\"tonnage_c_precedente\", { valueAsNumber: true })} />\r\n                </div>\r\n                <div>\r\n                  <Label>Tonnage En cours</Label>\r\n                  <Input type=\"number\" {...register(\"tonnage_c_cours\", { valueAsNumber: true })} />\r\n                </div>\r\n                <div>\r\n                  <Label>Tonnage Potentiel</Label>\r\n                  <Input type=\"number\" {...register(\"tonnage_potentiel\", { valueAsNumber: true })} />\r\n                </div>\r\n             </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* 2. Dirigeants */}\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle className=\"bg-primary/10 p-2 rounded text-primary\">Dirigeants</CardTitle>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-6\">\r\n            {renderPersonneFields(\"president\", \"Pr√©sident ou D√©l√©gu√©\")}\r\n            {renderPersonneFields(\"secretaire\", \"Secr√©taire\")}\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* 3. Personnel */}\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle className=\"bg-primary/10 p-2 rounded text-primary\">Personnel</CardTitle>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-6\">\r\n            {renderPersonneFields(\"magasinier\", \"Magasinier\")}\r\n            {renderPersonneFields(\"peseur\", \"Peseur\")}\r\n            \r\n            <div className=\"border p-4 rounded-lg space-y-4\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <Checkbox checked={watch(\"has_analyseur\")} onCheckedChange={(chk) => setValue(\"has_analyseur\", !!chk)} />\r\n                <Label className=\"font-semibold text-lg\">Analyseur</Label>\r\n              </div>\r\n              {watch(\"has_analyseur\") && (\r\n                <div className=\"space-y-4 pl-4 border-l-2 border-primary/20\">\r\n                   <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                    <div>\r\n                      <Label>Nom et Pr√©nom</Label>\r\n                      <Input {...register(\"analyseur_nom\")} />\r\n                    </div>\r\n                    <div>\r\n                      <Label>Date de naissance</Label>\r\n                      <Input type=\"date\" {...register(\"analyseur_date_naissance\")} />\r\n                    </div>\r\n                    <div className=\"md:col-span-2\">\r\n                      <MultiPhone \r\n                        label=\"Contact\" \r\n                        values={watch(\"analyseur_contact\") || [\"\"]} \r\n                        onChange={(vals) => setValue(\"analyseur_contact\", vals)} \r\n                      />\r\n                    </div>\r\n                    <div className=\"md:col-span-2\">\r\n                      <PhotoCapture \r\n                        label=\"Photo Analyseur\" \r\n                        value={watch(\"analyseur_photo\")} \r\n                        onChange={(val) => setValue(\"analyseur_photo\", val)} \r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* 4. Equipements */}\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle className=\"bg-primary/10 p-2 rounded text-primary\">Equipements</CardTitle>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-6\">\r\n            <div>\r\n              <h3 className=\"font-semibold mb-4\">V√©hicules</h3>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                {renderVehiculeFields(\"vehicule_camionnette\", \"Camionnettes\")}\r\n                {renderVehiculeFields(\"vehicule_liaison\", \"V√©hicules de liaison\")}\r\n                {renderVehiculeFields(\"vehicule_tricycle\", \"Tricycles\")}\r\n                {renderVehiculeFields(\"vehicule_moto\", \"Motos\")}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"border-t pt-4\">\r\n              <h3 className=\"font-semibold mb-4\">Mat√©riel de pesage et contr√¥le qualit√©</h3>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                {[\r\n                  { id: \"materiel_dickey_john\", label: \"Dickey John\" },\r\n                  { id: \"materiel_kpm\", label: \"KPM\" },\r\n                  { id: \"materiel_couteaux\", label: \"Couteaux de coupe\" },\r\n                  { id: \"materiel_tableau\", label: \"Tableau d'analyse\" },\r\n                  { id: \"materiel_sondes\", label: \"Sondes\" },\r\n                ].map((item: any) => (\r\n                  <div key={item.id} className=\"border p-3 rounded space-y-2\">\r\n                     <div className=\"flex items-center gap-2\">\r\n                       <Checkbox checked={watch(item.id)} onCheckedChange={(chk) => setValue(item.id, !!chk)} />\r\n                       <Label>{item.label}</Label>\r\n                     </div>\r\n                     {watch(item.id) && (\r\n                       <PhotoCapture label={`Photo ${item.label}`} value={watch(`${item.id}_photo` as any)} onChange={(v) => setValue(`${item.id}_photo` as any, v)} />\r\n                     )}\r\n                  </div>\r\n                ))}\r\n                \r\n                {/* Bascule Sp√©cifique */}\r\n                <div className=\"border p-3 rounded space-y-2\">\r\n                   <div className=\"flex items-center gap-2\">\r\n                     <Checkbox checked={watch(\"materiel_bascule\")} onCheckedChange={(chk) => setValue(\"materiel_bascule\", !!chk)} />\r\n                     <Label>Bascule</Label>\r\n                   </div>\r\n                   {watch(\"materiel_bascule\") && (\r\n                     <div className=\"space-y-2\">\r\n                       <Input type=\"number\" placeholder=\"Capacit√© (kg)\" {...register(\"materiel_bascule_capacite\", { valueAsNumber: true })} />\r\n                       <PhotoCapture label=\"Photo Bascule\" value={watch(\"materiel_bascule_photo\")} onChange={(v) => setValue(\"materiel_bascule_photo\", v)} />\r\n                     </div>\r\n                   )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* 5. Commercialisation */}\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle className=\"bg-primary/10 p-2 rounded text-primary\">Commercialisation Production</CardTitle>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-4\">\r\n            {renderCommFields(\"comm_coop\", \"Produits issus de la Coop√©rative\")}\r\n            {renderCommFields(\"comm_pisteur\", \"Produits issus des Pisteurs\", true)}\r\n            {renderCommFields(\"comm_autre_coop\", \"Produits issus des autres Coop√©ratives\", true)}\r\n            {renderCommFields(\"comm_autre_acheteur\", \"Produits issus des autres acheteurs\", true)}\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <div className=\"flex gap-4 justify-end pt-4\">\r\n          <Button type=\"button\" variant=\"outline\" size=\"lg\" onClick={() => navigate(\"/sections\")}>\r\n            Annuler\r\n          </Button>\r\n          <Button type=\"submit\" size=\"lg\" className=\"gap-2 bg-primary hover:bg-primary/90\">\r\n            <Save className=\"h-5 w-5\" />\r\n            Enregistrer la Section\r\n          </Button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\pages\\Sections.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\pages\\Sync.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":74,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":74,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2357,2360],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2357,2360],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { \r\n  RefreshCw, Wifi, WifiOff, Clock, Download, Upload, \r\n  Trash2, CheckCircle, XCircle, AlertCircle \r\n} from \"lucide-react\";\r\nimport { offlineService, type PendingOperation } from \"@/services/offlineService\";\r\nimport { api } from \"@/services/api\";\r\nimport { toast } from \"sonner\";\r\n\r\nexport default function Sync() {\r\n  const [isOnline, setIsOnline] = useState(navigator.onLine);\r\n  const [pendingOps, setPendingOps] = useState<PendingOperation[]>([]);\r\n  const [isSyncing, setIsSyncing] = useState(false);\r\n  const [lastSync, setLastSync] = useState<Date | null>(null);\r\n\r\n  useEffect(() => {\r\n    // √âcouter les changements de connexion\r\n    const handleOnline = () => {\r\n      setIsOnline(true);\r\n      toast.success(\"Connexion r√©tablie !\");\r\n    };\r\n\r\n    const handleOffline = () => {\r\n      setIsOnline(false);\r\n      toast.warning(\"Mode hors ligne activ√©\");\r\n    };\r\n\r\n    window.addEventListener('online', handleOnline);\r\n    window.addEventListener('offline', handleOffline);\r\n\r\n    // Charger les donn√©es\r\n    loadData();\r\n\r\n    // Rafra√Æchir toutes les 5 secondes\r\n    const interval = setInterval(loadData, 5000);\r\n\r\n    return () => {\r\n      window.removeEventListener('online', handleOnline);\r\n      window.removeEventListener('offline', handleOffline);\r\n      clearInterval(interval);\r\n    };\r\n  }, []);\r\n\r\n  const loadData = () => {\r\n    setPendingOps(offlineService.getPendingOperations());\r\n    setLastSync(offlineService.getLastSync());\r\n  };\r\n\r\n  const handleSync = async () => {\r\n    if (!isOnline) {\r\n      toast.error(\"Impossible de synchroniser : pas de connexion internet\");\r\n      return;\r\n    }\r\n\r\n    setIsSyncing(true);\r\n    try {\r\n      const result = await offlineService.syncAll(api);\r\n      \r\n      if (result.success > 0) {\r\n        toast.success(`${result.success} op√©ration(s) synchronis√©e(s) avec succ√®s`);\r\n      }\r\n      \r\n      if (result.failed > 0) {\r\n        toast.error(`${result.failed} op√©ration(s) √©chou√©e(s)`);\r\n        result.errors.forEach(err => {\r\n          console.error(`Erreur ${err.id}:`, err.error);\r\n        });\r\n      }\r\n\r\n      loadData();\r\n    } catch (error: any) {\r\n      toast.error(\"Erreur lors de la synchronisation\");\r\n      console.error(error);\r\n    } finally {\r\n      setIsSyncing(false);\r\n    }\r\n  };\r\n\r\n  const handleCleanSynced = () => {\r\n    offlineService.cleanSyncedOperations();\r\n    loadData();\r\n    toast.success(\"Op√©rations synchronis√©es nettoy√©es\");\r\n  };\r\n\r\n  const handleClearAll = () => {\r\n    if (confirm(\"√ätes-vous s√ªr de vouloir effacer toutes les op√©rations en attente ?\")) {\r\n      offlineService.clearAll();\r\n      loadData();\r\n      toast.success(\"Toutes les op√©rations effac√©es\");\r\n    }\r\n  };\r\n\r\n  const handleDeleteOperation = (id: string) => {\r\n    if (confirm(\"√ätes-vous s√ªr de vouloir supprimer cette op√©ration ?\")) {\r\n      offlineService.deleteOperation(id);\r\n      loadData();\r\n      toast.success(\"Op√©ration supprim√©e\");\r\n    }\r\n  };\r\n\r\n  const handleExport = () => {\r\n    const data = offlineService.exportPendingData();\r\n    const blob = new Blob([data], { type: 'application/json' });\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    a.download = `cacaotrack_backup_${Date.now()}.json`;\r\n    a.click();\r\n    toast.success(\"Donn√©es export√©es\");\r\n  };\r\n\r\n  const getOperationLabel = (op: PendingOperation) => {\r\n    const typeLabels = {\r\n      operation: 'Op√©ration',\r\n      producteur: 'Producteur',\r\n      parcelle: 'Parcelle',\r\n      agent: 'Agent',\r\n    };\r\n\r\n    const actionLabels = {\r\n      create: 'Cr√©ation',\r\n      update: 'Modification',\r\n      delete: 'Suppression',\r\n    };\r\n\r\n    return `${typeLabels[op.type]} - ${actionLabels[op.action]}`;\r\n  };\r\n\r\n  const unsyncedOps = pendingOps.filter(op => !op.synced);\r\n  const syncedOps = pendingOps.filter(op => op.synced);\r\n  const errorOps = pendingOps.filter(op => op.error);\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-6\">\r\n      <div className=\"flex justify-between items-start\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold text-foreground\">Synchronisation</h1>\r\n          <p className=\"text-muted-foreground mt-1\">Gestion des donn√©es hors ligne</p>\r\n        </div>\r\n        <div className=\"flex gap-2\">\r\n          <Button\r\n            variant=\"outline\"\r\n            onClick={handleExport}\r\n            disabled={pendingOps.length === 0}\r\n            className=\"gap-2\"\r\n          >\r\n            <Download className=\"h-4 w-4\" />\r\n            Exporter\r\n          </Button>\r\n          <Button\r\n            variant=\"outline\"\r\n            onClick={handleCleanSynced}\r\n            disabled={syncedOps.length === 0}\r\n            className=\"gap-2\"\r\n          >\r\n            <Trash2 className=\"h-4 w-4\" />\r\n            Nettoyer\r\n          </Button>\r\n          <Button\r\n            variant=\"destructive\"\r\n            onClick={handleClearAll}\r\n            disabled={pendingOps.length === 0}\r\n            className=\"gap-2\"\r\n          >\r\n            <Trash2 className=\"h-4 w-4\" />\r\n            Tout effacer\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* KPIs */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n        <Card className=\"shadow-card\">\r\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\r\n            <CardTitle className=\"text-sm font-medium text-muted-foreground\">\r\n              √âtat Connexion\r\n            </CardTitle>\r\n            {isOnline ? (\r\n              <Wifi className=\"h-5 w-5 text-green-500\" />\r\n            ) : (\r\n              <WifiOff className=\"h-5 w-5 text-destructive\" />\r\n            )}\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold text-foreground\">\r\n              {isOnline ? \"En ligne\" : \"Hors ligne\"}\r\n            </div>\r\n            <Badge className={isOnline ? \"bg-green-500 mt-2\" : \"bg-destructive mt-2\"}>\r\n              {isOnline ? \"Connect√©\" : \"D√©connect√©\"}\r\n            </Badge>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card className=\"shadow-card\">\r\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\r\n            <CardTitle className=\"text-sm font-medium text-muted-foreground\">\r\n              En Attente\r\n            </CardTitle>\r\n            <Clock className=\"h-5 w-5 text-orange-500\" />\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold text-foreground\">{unsyncedOps.length}</div>\r\n            <Badge className=\"bg-orange-500 mt-2\">\r\n              √Ä synchroniser\r\n            </Badge>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card className=\"shadow-card\">\r\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\r\n            <CardTitle className=\"text-sm font-medium text-muted-foreground\">\r\n              Synchronis√©es\r\n            </CardTitle>\r\n            <CheckCircle className=\"h-5 w-5 text-green-500\" />\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold text-foreground\">{syncedOps.length}</div>\r\n            <Badge className=\"bg-green-500 mt-2\">\r\n              R√©ussies\r\n            </Badge>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card className=\"shadow-card\">\r\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\r\n            <CardTitle className=\"text-sm font-medium text-muted-foreground\">\r\n              Erreurs\r\n            </CardTitle>\r\n            <XCircle className=\"h-5 w-5 text-destructive\" />\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold text-foreground\">{errorOps.length}</div>\r\n            <Badge className=\"bg-destructive mt-2\">\r\n              √âchou√©es\r\n            </Badge>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Derni√®re synchronisation */}\r\n      {lastSync && (\r\n        <Card>\r\n          <CardContent className=\"pt-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center gap-3\">\r\n                <RefreshCw className=\"h-5 w-5 text-primary\" />\r\n                <div>\r\n                  <p className=\"font-medium\">Derni√®re synchronisation</p>\r\n                  <p className=\"text-sm text-muted-foreground\">\r\n                    {lastSync.toLocaleString('fr-FR')}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n              <Button\r\n                onClick={handleSync}\r\n                disabled={!isOnline || isSyncing || unsyncedOps.length === 0}\r\n                className=\"gap-2\"\r\n              >\r\n                {isSyncing ? (\r\n                  <RefreshCw className=\"h-4 w-4 animate-spin\" />\r\n                ) : (\r\n                  <Upload className=\"h-4 w-4\" />\r\n                )}\r\n                Synchroniser maintenant\r\n              </Button>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {/* Liste des op√©rations */}\r\n      <Card className=\"shadow-card\">\r\n        <CardHeader>\r\n          <CardTitle>Op√©rations en attente ({pendingOps.length})</CardTitle>\r\n        </CardHeader>\r\n        <CardContent>\r\n          {pendingOps.length === 0 ? (\r\n            <div className=\"text-center py-12\">\r\n              <CheckCircle className=\"h-12 w-12 mx-auto text-green-500 mb-4\" />\r\n              <p className=\"text-muted-foreground\">\r\n                Aucune op√©ration en attente de synchronisation\r\n              </p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"space-y-3\">\r\n              {pendingOps.map((op) => (\r\n                <div\r\n                  key={op.id}\r\n                  className=\"flex items-center justify-between p-4 rounded-lg border\"\r\n                >\r\n                  <div className=\"flex items-center gap-4 flex-1\">\r\n                    {op.synced ? (\r\n                      <CheckCircle className=\"h-5 w-5 text-green-500\" />\r\n                    ) : op.error ? (\r\n                      <XCircle className=\"h-5 w-5 text-destructive\" />\r\n                    ) : (\r\n                      <Clock className=\"h-5 w-5 text-orange-500\" />\r\n                    )}\r\n                    \r\n                    <div className=\"flex-1\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <Badge variant=\"outline\" className=\"font-mono\">\r\n                          {getOperationLabel(op)}\r\n                        </Badge>\r\n                        {op.synced && (\r\n                          <Badge className=\"bg-green-500\">Synchronis√©e</Badge>\r\n                        )}\r\n                        {op.error && (\r\n                          <Badge className=\"bg-destructive\">Erreur</Badge>\r\n                        )}\r\n                      </div>\r\n                      <p className=\"text-sm text-muted-foreground mt-1\">\r\n                        {new Date(op.timestamp).toLocaleString('fr-FR')}\r\n                      </p>\r\n                      {op.error && (\r\n                        <div className=\"flex items-center gap-2 mt-2 text-sm text-destructive\">\r\n                          <AlertCircle className=\"h-4 w-4\" />\r\n                          <span>{op.error}</span>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"sm\"\r\n                    onClick={() => handleDeleteOperation(op.id)}\r\n                  >\r\n                    <Trash2 className=\"h-4 w-4\" />\r\n                  </Button>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\pages\\VillageDetails.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":46,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":46,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1693,1696],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1693,1696],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useParams, useNavigate } from \"react-router-dom\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { ArrowLeft, Home, Users, Droplets, Zap, Stethoscope, GraduationCap, ShoppingBag, Loader2 } from \"lucide-react\";\r\nimport { api } from \"@/services/api\";\r\nimport { Village, Section } from \"@/types/organisation\";\r\nimport { useState, useEffect } from \"react\";\r\n\r\nexport default function VillageDetails() {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const [village, setVillage] = useState<Village | undefined>(undefined);\r\n  const [section, setSection] = useState<Section | undefined>(undefined);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (id) {\r\n      const loadData = async () => {\r\n        try {\r\n            const data = await api.getVillage(id);\r\n            setVillage(data);\r\n            if (data && data.id_section) {\r\n                const sec = await api.getSection(data.id_section);\r\n                setSection(sec);\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Erreur chargement village:\", error);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n      };\r\n      loadData();\r\n    }\r\n  }, [id]);\r\n\r\n  if (isLoading) {\r\n    return <div className=\"flex justify-center items-center h-screen\"><Loader2 className=\"h-12 w-12 animate-spin text-primary\" /></div>;\r\n  }\r\n\r\n  if (!village) {\r\n    return <div className=\"p-8 text-center\">Village introuvable...</div>;\r\n  }\r\n\r\n\r\n  const InfoItem = ({ label, value }: { label: string, value: any }) => (\r\n    <div className=\"flex justify-between items-center border-b pb-1 last:border-0\">\r\n      <span className=\"text-sm text-muted-foreground\">{label}</span>\r\n      <span className=\"font-medium\">{value}</span>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"p-6 max-w-6xl mx-auto space-y-8 animate-in fade-in duration-500\">\r\n      <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n        <div className=\"flex items-center gap-4\">\r\n          <Button variant=\"outline\" size=\"icon\" onClick={() => navigate(\"/villages\")}>\r\n            <ArrowLeft className=\"h-5 w-5\" />\r\n          </Button>\r\n          <div className=\"w-16 h-16 rounded-full bg-amber-100 flex items-center justify-center border-2 border-amber-200 text-amber-700\">\r\n            <Home className=\"h-8 w-8\" />\r\n          </div>\r\n          <div>\r\n            <h1 className=\"text-3xl font-bold\">{village.nom}</h1>\r\n            <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n              <span>{village.type}</span>\r\n              <span>‚Ä¢</span>\r\n              <span>Section: {section?.nom || village.id_section}</span>\r\n              <span>‚Ä¢</span>\r\n              <Badge>{village.statut}</Badge>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <Button variant=\"outline\">Modifier</Button>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n        \r\n        {/* D√©mographie */}\r\n        <Card>\r\n           <CardHeader><CardTitle className=\"flex items-center gap-2\"><Users className=\"h-5 w-5 text-blue-600\"/> D√©mographie</CardTitle></CardHeader>\r\n           <CardContent className=\"space-y-4\">\r\n              <div className=\"text-center p-4 bg-blue-50 rounded\">\r\n                 <p className=\"text-3xl font-bold text-blue-700\">{village.nombre_habitants}</p>\r\n                 <p className=\"text-xs text-blue-600 uppercase font-semibold\">Habitants</p>\r\n              </div>\r\n              <div className=\"space-y-2\">\r\n                 <InfoItem label=\"Hommes\" value={village.nombre_hommes} />\r\n                 <InfoItem label=\"Femmes\" value={village.nombre_femmes} />\r\n                 <InfoItem label=\"Enfants Scolaris√©s\" value={village.nombre_enfants_scolarises} />\r\n              </div>\r\n           </CardContent>\r\n        </Card>\r\n\r\n        {/* Infrastructures de Base */}\r\n        <Card>\r\n           <CardHeader><CardTitle className=\"flex items-center gap-2\"><Zap className=\"h-5 w-5 text-yellow-600\"/> Infrastructures</CardTitle></CardHeader>\r\n           <CardContent className=\"space-y-6\">\r\n              <div>\r\n                 <h4 className=\"text-sm font-semibold flex items-center gap-2 mb-2\"><Droplets className=\"h-4 w-4 text-cyan-600\"/> Eau</h4>\r\n                 <div className=\"flex flex-wrap gap-2\">\r\n                    {village.eau_courante && <Badge variant=\"secondary\">Eau Courante</Badge>}\r\n                    {village.pompe_hydraulique && <Badge variant=\"secondary\">Pompe</Badge>}\r\n                    {village.puits && <Badge variant=\"outline\">Puits</Badge>}\r\n                    {village.riviere_marigot && <Badge variant=\"destructive\">Rivi√®re</Badge>}\r\n                 </div>\r\n              </div>\r\n              <div>\r\n                 <h4 className=\"text-sm font-semibold flex items-center gap-2 mb-2\"><Zap className=\"h-4 w-4 text-yellow-600\"/> √âlectricit√©</h4>\r\n                 <div className=\"flex flex-wrap gap-2\">\r\n                    {village.electricite_reseau && <Badge variant=\"secondary\">R√©seau</Badge>}\r\n                    {village.electricite_solaire && <Badge variant=\"secondary\">Solaire</Badge>}\r\n                 </div>\r\n              </div>\r\n           </CardContent>\r\n        </Card>\r\n\r\n        {/* Services Sociaux */}\r\n        <Card>\r\n           <CardHeader><CardTitle className=\"flex items-center gap-2\"><Stethoscope className=\"h-5 w-5 text-red-600\"/> Services Sociaux</CardTitle></CardHeader>\r\n           <CardContent className=\"space-y-6\">\r\n              <div>\r\n                 <h4 className=\"text-sm font-semibold flex items-center gap-2 mb-2\"><Stethoscope className=\"h-4 w-4 text-red-500\"/> Sant√©</h4>\r\n                 <div className=\"space-y-1\">\r\n                    <InfoItem label=\"Dispensaire\" value={village.dispensaire ? \"Oui\" : \"Non\"} />\r\n                    <InfoItem label=\"Pharmacie\" value={village.pharmacie ? \"Oui\" : \"Non\"} />\r\n                 </div>\r\n              </div>\r\n              <div>\r\n                 <h4 className=\"text-sm font-semibold flex items-center gap-2 mb-2\"><GraduationCap className=\"h-4 w-4 text-indigo-500\"/> √âducation</h4>\r\n                 <div className=\"space-y-1\">\r\n                    <InfoItem label=\"√âcole Primaire\" value={village.ecole_primaire ? \"Oui\" : \"Non\"} />\r\n                    <InfoItem label=\"Coll√®ge / Lyc√©e\" value={village.college_lycee ? \"Oui\" : \"Non\"} />\r\n                 </div>\r\n              </div>\r\n           </CardContent>\r\n        </Card>\r\n\r\n        {/* Activit√©s Economiques */}\r\n        <Card className=\"md:col-span-2\">\r\n           <CardHeader><CardTitle className=\"flex items-center gap-2\"><ShoppingBag className=\"h-5 w-5 text-emerald-600\"/> √âconomie Locale</CardTitle></CardHeader>\r\n           <CardContent>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\r\n                 <div>\r\n                    <h4 className=\"font-semibold mb-2\">Cultures</h4>\r\n                    <div className=\"flex flex-wrap gap-2\">\r\n                       {village.culture_cacao && <Badge className=\"bg-emerald-600\">Cacao</Badge>}\r\n                       {village.culture_cafe && <Badge className=\"bg-emerald-600\">Caf√©</Badge>}\r\n                       {village.culture_hevea && <Badge className=\"bg-emerald-600\">H√©v√©a</Badge>}\r\n                       {village.culture_palmier && <Badge className=\"bg-emerald-600\">Palmier</Badge>}\r\n                       {village.culture_riz && <Badge variant=\"outline\">Riz</Badge>}\r\n                       {village.culture_mais && <Badge variant=\"outline\">Ma√Øs</Badge>}\r\n                    </div>\r\n                 </div>\r\n                 <div>\r\n                    <h4 className=\"font-semibold mb-2\">Services Financiers</h4>\r\n                    <div className=\"flex flex-wrap gap-2\">\r\n                       {village.om_orange && <Badge variant=\"secondary\" className=\"bg-orange-100 text-orange-800\">Orange Money</Badge>}\r\n                       {village.momo_mtn && <Badge variant=\"secondary\" className=\"bg-yellow-100 text-yellow-800\">MTN Momo</Badge>}\r\n                       {village.flooz_moov && <Badge variant=\"secondary\" className=\"bg-blue-100 text-blue-800\">Moov Flooz</Badge>}\r\n                    </div>\r\n                 </div>\r\n              </div>\r\n           </CardContent>\r\n        </Card>\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\pages\\VillageForm.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":210,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":210,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8221,8224],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8221,8224],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":309,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":309,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12798,12801],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12798,12801],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":344,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":344,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14348,14351],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14348,14351],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":390,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":390,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16522,16525],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16522,16525],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":408,"column":99,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":408,"endColumn":102,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17519,17522],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17519,17522],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":445,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":445,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19232,19235],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19232,19235],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":463,"column":99,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":463,"endColumn":102,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20229,20232],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20229,20232],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":504,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":504,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[22164,22167],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[22164,22167],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":518,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":518,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[22816,22819],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[22816,22819],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":567,"column":98,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":567,"endColumn":101,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[25266,25269],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[25266,25269],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { z } from \"zod\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Checkbox } from \"@/components/ui/checkbox\";\r\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\r\nimport PhotoCapture from \"@/components/forms/PhotoCapture\";\r\nimport GPSCapture from \"@/components/forms/GPSCapture\";\r\nimport MultiPhone from \"@/components/forms/MultiPhone\";\r\nimport { ArrowLeft, Save } from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\nimport { generateVillageCode } from \"@/utils/codeGenerators\";\r\n\r\n// Sch√©ma de validation complet bas√© sur l'image fournie\r\nconst villageSchema = z.object({\r\n  // Informations G√©n√©rales\r\n  localite: z.string().min(1, \"La localit√© est obligatoire\"),\r\n  nom: z.string().min(1, \"Le nom du campement est obligatoire\"),\r\n  type: z.enum([\"Village\", \"Campement\"]),\r\n  latitude: z.number().optional(),\r\n  longitude: z.number().optional(),\r\n  photo: z.string().optional(),\r\n  photo_aire_sechage: z.string().optional(),\r\n\r\n  // Chef de campement\r\n  chef_nom: z.string().min(1, \"Le nom du chef est obligatoire\"),\r\n  chef_contact: z.array(z.string()).min(1, \"Au moins un num√©ro est requis\"),\r\n  chef_cni: z.string().optional(),\r\n  chef_photo_cni: z.string().optional(),\r\n  chef_date_naissance: z.string().optional(), // Converti en Date √† l'envoi\r\n  chef_photo_date_naissance: z.string().optional(),\r\n\r\n  // Donn√©es sociologiques\r\n  nombre_habitants: z.number().min(0),\r\n  nombre_hommes: z.number().min(0),\r\n  nombre_femmes: z.number().min(0),\r\n  nombre_enfants_scolarises: z.number().min(0),\r\n\r\n  // Acc√®s √† l'eau\r\n  eau_courante: z.boolean(),\r\n  eau_courante_pct: z.number().min(0).max(100).optional(),\r\n  pompe_hydraulique: z.boolean(),\r\n  pompe_hydraulique_pct: z.number().min(0).max(100).optional(),\r\n  puits: z.boolean(),\r\n  puits_pct: z.number().min(0).max(100).optional(),\r\n  riviere_marigot: z.boolean(),\r\n  riviere_marigot_pct: z.number().min(0).max(100).optional(),\r\n\r\n  // Acc√®s √† l'√©lectricit√©\r\n  electricite_reseau: z.boolean(),\r\n  electricite_reseau_niveau: z.enum([\"Peu\", \"Moyen\", \"Important\"]).optional(),\r\n  electricite_solaire: z.boolean(),\r\n  electricite_solaire_niveau: z.enum([\"Peu\", \"Moyen\", \"Important\"]).optional(),\r\n  electricite_lampes: z.boolean(),\r\n  electricite_lampes_niveau: z.enum([\"Peu\", \"Moyen\", \"Important\"]).optional(),\r\n\r\n  // Acc√®s aux soins\r\n  dispensaire: z.boolean(),\r\n  dispensaire_nombre: z.number().optional(),\r\n  dispensaire_photo: z.string().optional(),\r\n  dispensaire_materiaux: z.enum([\"Ciment\", \"Terre battue s√©ch√©e\", \"Bois/Banco\", \"Autre\"]).optional(),\r\n  dispensaire_distance: z.number().optional(),\r\n\r\n  pharmacie: z.boolean(),\r\n  pharmacie_nombre: z.number().optional(),\r\n  pharmacie_photo: z.string().optional(),\r\n  pharmacie_materiaux: z.enum([\"Ciment\", \"Terre battue s√©ch√©e\", \"Bois/Banco\", \"Autre\"]).optional(),\r\n  pharmacie_distance: z.number().optional(),\r\n\r\n  // Acc√®s √† l'√©ducation\r\n  ecole_primaire: z.boolean(),\r\n  ecole_primaire_nombre: z.number().optional(),\r\n  ecole_primaire_photo: z.string().optional(),\r\n  ecole_primaire_materiaux: z.enum([\"Ciment\", \"Terre battue s√©ch√©e\", \"Bois/Banco\", \"Autre\"]).optional(),\r\n  ecole_primaire_distance: z.number().optional(),\r\n\r\n  college_lycee: z.boolean(),\r\n  college_lycee_nombre: z.number().optional(),\r\n  college_lycee_photo: z.string().optional(),\r\n  college_lycee_materiaux: z.enum([\"Ciment\", \"Terre battue s√©ch√©e\", \"Bois/Banco\", \"Autre\"]).optional(),\r\n  college_lycee_distance: z.number().optional(),\r\n\r\n  // Activit√©s professionnelles - Agricoles\r\n  culture_cacao: z.boolean(),\r\n  culture_cafe: z.boolean(),\r\n  culture_riz: z.boolean(),\r\n  culture_mais: z.boolean(),\r\n  culture_hevea: z.boolean(),\r\n  culture_palmier: z.boolean(),\r\n  culture_maraicheres: z.boolean(),\r\n  elevage_ovin: z.boolean(),\r\n  elevage_bovin: z.boolean(),\r\n  elevage_porcin: z.boolean(),\r\n  elevage_autre: z.boolean(),\r\n  activite_autre: z.string().optional(),\r\n\r\n  // Activit√©s professionnelles - Autres\r\n  commerces: z.boolean(),\r\n  // commerces_produits g√©r√© comme string[] via UI sp√©cifique ou champs multiples\r\n  artisanat: z.boolean(),\r\n  \r\n  // Couverture GSM\r\n  reseau_orange: z.enum([\"Tr√®s bon\", \"Bon\", \"Moyen\", \"Pas du tout\"]).optional(),\r\n  reseau_mtn: z.enum([\"Tr√®s bon\", \"Bon\", \"Moyen\", \"Pas du tout\"]).optional(),\r\n  reseau_moov: z.enum([\"Tr√®s bon\", \"Bon\", \"Moyen\", \"Pas du tout\"]).optional(),\r\n\r\n  // Services de paiement\r\n  om_orange: z.boolean(),\r\n  momo_mtn: z.boolean(),\r\n  flooz_moov: z.boolean(),\r\n  autres_paiement: z.boolean(),\r\n});\r\n\r\ntype VillageFormData = z.infer<typeof villageSchema>;\r\n\r\nexport default function VillageForm() {\r\n  const navigate = useNavigate();\r\n  \r\n  const { register, handleSubmit, formState: { errors }, setValue, watch } = useForm<VillageFormData>({\r\n    resolver: zodResolver(villageSchema),\r\n    defaultValues: {\r\n      type: \"Village\",\r\n      chef_contact: [\"\"],\r\n      nombre_habitants: 0,\r\n      nombre_hommes: 0,\r\n      nombre_femmes: 0,\r\n      nombre_enfants_scolarises: 0,\r\n      // Initialisation des bool√©ens\r\n      eau_courante: false,\r\n      pompe_hydraulique: false,\r\n      puits: false,\r\n      riviere_marigot: false,\r\n      electricite_reseau: false,\r\n      electricite_solaire: false,\r\n      electricite_lampes: false,\r\n      dispensaire: false,\r\n      pharmacie: false,\r\n      ecole_primaire: false,\r\n      college_lycee: false,\r\n      culture_cacao: false,\r\n      culture_cafe: false,\r\n      culture_riz: false,\r\n      culture_mais: false,\r\n      culture_hevea: false,\r\n      culture_palmier: false,\r\n      culture_maraicheres: false,\r\n      elevage_ovin: false,\r\n      elevage_bovin: false,\r\n      elevage_porcin: false,\r\n      elevage_autre: false,\r\n      commerces: false,\r\n      artisanat: false,\r\n      om_orange: false,\r\n      momo_mtn: false,\r\n      flooz_moov: false,\r\n      autres_paiement: false,\r\n    }\r\n  });\r\n\r\n  const onSubmit = (data: VillageFormData) => {\r\n    try {\r\n      const code = generateVillageCode(Math.floor(Math.random() * 1000)); // Simul√©\r\n      console.log(\"Village cr√©√©:\", { code, ...data });\r\n      // Ici appel au service de cr√©ation\r\n      toast.success(`Village ${code} cr√©√© avec succ√®s`);\r\n      navigate(\"/villages\");\r\n    } catch (error) {\r\n      toast.error(\"Erreur lors de la cr√©ation du village\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-6 max-w-5xl mx-auto\">\r\n      <div className=\"flex items-center gap-4\">\r\n        <Button variant=\"ghost\" size=\"icon\" onClick={() => navigate(\"/villages\")}>\r\n          <ArrowLeft className=\"h-5 w-5\" />\r\n        </Button>\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold text-foreground\">Nouveau Village / Campement</h1>\r\n          <p className=\"text-muted-foreground\">Formulaire d√©taill√© de collecte de donn√©es</p>\r\n        </div>\r\n      </div>\r\n\r\n      <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-8\">\r\n        \r\n        {/* 1. Informations G√©n√©rales */}\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle className=\"bg-primary/10 p-2 rounded text-primary\">Informations G√©n√©rales</CardTitle>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-4\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              <div>\r\n                <Label>Localit√© *</Label>\r\n                <Input {...register(\"localite\")} />\r\n                {errors.localite && <p className=\"text-destructive text-sm\">{errors.localite.message}</p>}\r\n              </div>\r\n              <div>\r\n                <Label>Nom du campement *</Label>\r\n                <Input {...register(\"nom\")} />\r\n                {errors.nom && <p className=\"text-destructive text-sm\">{errors.nom.message}</p>}\r\n              </div>\r\n              <div>\r\n                <Label>Type</Label>\r\n                <Select onValueChange={(val) => setValue(\"type\", val as any)} defaultValue=\"Village\">\r\n                  <SelectTrigger><SelectValue /></SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"Village\">Village</SelectItem>\r\n                    <SelectItem value=\"Campement\">Campement</SelectItem>\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"border-t pt-4 mt-4\">\r\n              <Label className=\"mb-2 block font-semibold\">Coordonn√©es GPS</Label>\r\n              <GPSCapture \r\n                onChange={(coords) => {\r\n                  setValue(\"latitude\", coords.latitude);\r\n                  setValue(\"longitude\", coords.longitude);\r\n                }}\r\n                latitude={watch(\"latitude\")}\r\n                longitude={watch(\"longitude\")}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4\">\r\n              <PhotoCapture label=\"Photo Campement\" onChange={(val) => setValue(\"photo\", val)} value={watch(\"photo\")} />\r\n              <PhotoCapture label=\"Photo Aire de s√©chage\" onChange={(val) => setValue(\"photo_aire_sechage\", val)} value={watch(\"photo_aire_sechage\")} />\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* 2. Chef de campement */}\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle className=\"bg-primary/10 p-2 rounded text-primary\">Chef de campement</CardTitle>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-4\">\r\n            <div>\r\n              <Label>Nom et pr√©nom *</Label>\r\n              <Input {...register(\"chef_nom\")} />\r\n              {errors.chef_nom && <p className=\"text-destructive text-sm\">{errors.chef_nom.message}</p>}\r\n            </div>\r\n            \r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              <div>\r\n                <Label>CNI (Nom et Pr√©nom ou Num√©ro)</Label>\r\n                <Input {...register(\"chef_cni\")} placeholder=\"Info CNI\" />\r\n              </div>\r\n              <div>\r\n                <Label>Date de naissance</Label>\r\n                <Input type=\"date\" {...register(\"chef_date_naissance\")} />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              <PhotoCapture label=\"Photo CNI\" onChange={(val) => setValue(\"chef_photo_cni\", val)} value={watch(\"chef_photo_cni\")} />\r\n              <PhotoCapture label=\"Photo Acte/Date Naissance\" onChange={(val) => setValue(\"chef_photo_date_naissance\", val)} value={watch(\"chef_photo_date_naissance\")} />\r\n            </div>\r\n\r\n            <MultiPhone label=\"Contact t√©l√©phonique *\" values={watch(\"chef_contact\")} onChange={(vals) => setValue(\"chef_contact\", vals)} />\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* 3. Donn√©es sociologiques */}\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle className=\"bg-primary/10 p-2 rounded text-primary\">Donn√©es sociologiques</CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n              <div>\r\n                <Label>Habitants d√©clar√©s</Label>\r\n                <Input type=\"number\" {...register(\"nombre_habitants\", { valueAsNumber: true })} />\r\n              </div>\r\n              <div>\r\n                <Label>Hommes</Label>\r\n                <Input type=\"number\" {...register(\"nombre_hommes\", { valueAsNumber: true })} />\r\n              </div>\r\n              <div>\r\n                <Label>Femmes</Label>\r\n                <Input type=\"number\" {...register(\"nombre_femmes\", { valueAsNumber: true })} />\r\n              </div>\r\n              <div>\r\n                <Label>Enfants scolaris√©s</Label>\r\n                <Input type=\"number\" {...register(\"nombre_enfants_scolarises\", { valueAsNumber: true })} />\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* 4. Acc√®s √† l'eau */}\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle className=\"bg-primary/10 p-2 rounded text-primary\">Acc√®s √† l'eau</CardTitle>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-4\">\r\n            {[\r\n              { id: \"eau_courante\", label: \"Eau courante\", pct: \"eau_courante_pct\" },\r\n              { id: \"pompe_hydraulique\", label: \"Pompe hydraulique\", pct: \"pompe_hydraulique_pct\" },\r\n              { id: \"puits\", label: \"Puits\", pct: \"puits_pct\" },\r\n              { id: \"riviere_marigot\", label: \"Rivi√®re/Marigot\", pct: \"riviere_marigot_pct\" },\r\n            ].map((item: any) => (\r\n              <div key={item.id} className=\"flex items-center gap-4 p-2 border rounded\">\r\n                <div className=\"flex items-center gap-2 w-1/3\">\r\n                  <Checkbox \r\n                    checked={watch(item.id)} \r\n                    onCheckedChange={(chk) => setValue(item.id, !!chk)} \r\n                  />\r\n                  <Label>{item.label}</Label>\r\n                </div>\r\n                {watch(item.id) && (\r\n                  <div className=\"flex items-center gap-2 flex-1\">\r\n                    <Label>% Utilisation</Label>\r\n                    <Input \r\n                      type=\"number\" \r\n                      className=\"w-24\" \r\n                      {...register(item.pct, { valueAsNumber: true })} \r\n                      placeholder=\"%\"\r\n                    />\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* 5. Acc√®s √† l'√©lectricit√© */}\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle className=\"bg-primary/10 p-2 rounded text-primary\">Acc√®s √† l'√©lectricit√©</CardTitle>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-4\">\r\n            {[\r\n              { id: \"electricite_reseau\", label: \"R√©seau national\", level: \"electricite_reseau_niveau\" },\r\n              { id: \"electricite_solaire\", label: \"Solaire\", level: \"electricite_solaire_niveau\" },\r\n              { id: \"electricite_lampes\", label: \"Lampes\", level: \"electricite_lampes_niveau\" },\r\n            ].map((item: any) => (\r\n              <div key={item.id} className=\"flex flex-col md:flex-row md:items-center gap-4 p-2 border rounded\">\r\n                <div className=\"flex items-center gap-2 w-1/3\">\r\n                  <Checkbox \r\n                    checked={watch(item.id)} \r\n                    onCheckedChange={(chk) => setValue(item.id, !!chk)} \r\n                  />\r\n                  <Label>{item.label}</Label>\r\n                </div>\r\n                {watch(item.id) && (\r\n                  <div className=\"flex items-center gap-4 flex-1\">\r\n                    <Label>Niveau:</Label>\r\n                    <RadioGroup \r\n                      onValueChange={(val) => setValue(item.level, val)} \r\n                      defaultValue={watch(item.level)}\r\n                      className=\"flex gap-4\"\r\n                    >\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        <RadioGroupItem value=\"Peu\" id={`${item.id}-peu`} />\r\n                        <Label htmlFor={`${item.id}-peu`}>Peu</Label>\r\n                      </div>\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        <RadioGroupItem value=\"Moyen\" id={`${item.id}-moyen`} />\r\n                        <Label htmlFor={`${item.id}-moyen`}>Moyen</Label>\r\n                      </div>\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        <RadioGroupItem value=\"Important\" id={`${item.id}-important`} />\r\n                        <Label htmlFor={`${item.id}-important`}>Important</Label>\r\n                      </div>\r\n                    </RadioGroup>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* 6. Acc√®s aux soins */}\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle className=\"bg-primary/10 p-2 rounded text-primary\">Acc√®s aux soins</CardTitle>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-6\">\r\n            {[\r\n              { prefix: \"dispensaire\", label: \"Dispensaire\" },\r\n              { prefix: \"pharmacie\", label: \"Pharmacie\" }\r\n            ].map((item: any) => (\r\n              <div key={item.prefix} className=\"border p-4 rounded-lg space-y-4\">\r\n                <div className=\"flex items-center gap-2 mb-4\">\r\n                  <Checkbox \r\n                    checked={watch(item.prefix)} \r\n                    onCheckedChange={(chk) => setValue(item.prefix, !!chk)} \r\n                  />\r\n                  <Label className=\"text-lg font-semibold\">{item.label}</Label>\r\n                </div>\r\n\r\n                {watch(item.prefix) && (\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 pl-6 border-l-2 border-primary/20\">\r\n                    <div>\r\n                      <Label>Nombre</Label>\r\n                      <Input type=\"number\" {...register(`${item.prefix}_nombre`, { valueAsNumber: true })} />\r\n                    </div>\r\n                    <div>\r\n                      <Label>Mat√©riaux de construction</Label>\r\n                      <Select onValueChange={(val) => setValue(`${item.prefix}_materiaux`, val as any)}>\r\n                        <SelectTrigger><SelectValue placeholder=\"Choisir...\" /></SelectTrigger>\r\n                        <SelectContent>\r\n                          <SelectItem value=\"Ciment\">Ciment</SelectItem>\r\n                          <SelectItem value=\"Terre battue s√©ch√©e\">Terre battue s√©ch√©e</SelectItem>\r\n                          <SelectItem value=\"Bois/Banco\">Bois/Banco</SelectItem>\r\n                          <SelectItem value=\"Autre\">Autre</SelectItem>\r\n                        </SelectContent>\r\n                      </Select>\r\n                    </div>\r\n                    <div>\r\n                      <Label>Distance du campement (km)</Label>\r\n                      <Input type=\"number\" step=\"0.1\" {...register(`${item.prefix}_distance`, { valueAsNumber: true })} />\r\n                    </div>\r\n                    <div>\r\n                      <PhotoCapture \r\n                        label={`Photo ${item.label}`} \r\n                        onChange={(val) => setValue(`${item.prefix}_photo`, val)} \r\n                        value={watch(`${item.prefix}_photo`)} \r\n                      />\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* 7. Acc√®s √† l'√©ducation */}\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle className=\"bg-primary/10 p-2 rounded text-primary\">Acc√®s √† l'√©ducation</CardTitle>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-6\">\r\n            {[\r\n              { prefix: \"ecole_primaire\", label: \"√âcole primaire\" },\r\n              { prefix: \"college_lycee\", label: \"Lyc√©es/Coll√®ges\" }\r\n            ].map((item: any) => (\r\n              <div key={item.prefix} className=\"border p-4 rounded-lg space-y-4\">\r\n                <div className=\"flex items-center gap-2 mb-4\">\r\n                  <Checkbox \r\n                    checked={watch(item.prefix)} \r\n                    onCheckedChange={(chk) => setValue(item.prefix, !!chk)} \r\n                  />\r\n                  <Label className=\"text-lg font-semibold\">{item.label}</Label>\r\n                </div>\r\n\r\n                {watch(item.prefix) && (\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 pl-6 border-l-2 border-primary/20\">\r\n                    <div>\r\n                      <Label>Nombre</Label>\r\n                      <Input type=\"number\" {...register(`${item.prefix}_nombre`, { valueAsNumber: true })} />\r\n                    </div>\r\n                    <div>\r\n                      <Label>Mat√©riaux de construction</Label>\r\n                      <Select onValueChange={(val) => setValue(`${item.prefix}_materiaux`, val as any)}>\r\n                        <SelectTrigger><SelectValue placeholder=\"Choisir...\" /></SelectTrigger>\r\n                        <SelectContent>\r\n                          <SelectItem value=\"Ciment\">Ciment</SelectItem>\r\n                          <SelectItem value=\"Terre battue s√©ch√©e\">Terre battue s√©ch√©e</SelectItem>\r\n                          <SelectItem value=\"Bois/Banco\">Bois/Banco</SelectItem>\r\n                          <SelectItem value=\"Autre\">Autre</SelectItem>\r\n                        </SelectContent>\r\n                      </Select>\r\n                    </div>\r\n                    <div>\r\n                      <Label>Distance du campement (km)</Label>\r\n                      <Input type=\"number\" step=\"0.1\" {...register(`${item.prefix}_distance`, { valueAsNumber: true })} />\r\n                    </div>\r\n                    <div>\r\n                      <PhotoCapture \r\n                        label={`Photo ${item.label}`} \r\n                        onChange={(val) => setValue(`${item.prefix}_photo`, val)} \r\n                        value={watch(`${item.prefix}_photo`)} \r\n                      />\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* 8. Activit√©s professionnelles */}\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle className=\"bg-primary/10 p-2 rounded text-primary\">Activit√©s professionnelles</CardTitle>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-6\">\r\n            \r\n            <div>\r\n              <h3 className=\"font-semibold mb-3\">Activit√©s agricoles</h3>\r\n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n                {[\r\n                  \"culture_cacao\", \"culture_cafe\", \"culture_riz\", \"culture_mais\", \r\n                  \"culture_hevea\", \"culture_palmier\", \"culture_maraicheres\"\r\n                ].map((key: any) => (\r\n                  <div key={key} className=\"flex items-center gap-2\">\r\n                    <Checkbox checked={watch(key)} onCheckedChange={(chk) => setValue(key, !!chk)} />\r\n                    <Label className=\"capitalize\">{key.replace('culture_', '')}</Label>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <h3 className=\"font-semibold mb-3\">√âlevage</h3>\r\n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n                {[\r\n                  \"elevage_ovin\", \"elevage_bovin\", \"elevage_porcin\", \"elevage_autre\"\r\n                ].map((key: any) => (\r\n                  <div key={key} className=\"flex items-center gap-2\">\r\n                    <Checkbox checked={watch(key)} onCheckedChange={(chk) => setValue(key, !!chk)} />\r\n                    <Label className=\"capitalize\">{key.replace('elevage_', '')}</Label>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n               <div className=\"border p-3 rounded\">\r\n                 <div className=\"flex items-center gap-2 mb-2\">\r\n                   <Checkbox checked={watch(\"commerces\")} onCheckedChange={(chk) => setValue(\"commerces\", !!chk)} />\r\n                   <Label className=\"font-bold\">Commerces</Label>\r\n                 </div>\r\n                 {watch(\"commerces\") && (\r\n                   <div className=\"ml-6 mt-2\">\r\n                     <Label className=\"text-xs\">Produits (s√©par√©s par virgule)</Label>\r\n                     <Input placeholder=\"Ex: Alimentation, Boutique...\" />\r\n                   </div>\r\n                 )}\r\n               </div>\r\n               <div className=\"border p-3 rounded\">\r\n                 <div className=\"flex items-center gap-2 mb-2\">\r\n                   <Checkbox checked={watch(\"artisanat\")} onCheckedChange={(chk) => setValue(\"artisanat\", !!chk)} />\r\n                   <Label className=\"font-bold\">Artisanat</Label>\r\n                 </div>\r\n                 {watch(\"artisanat\") && (\r\n                   <div className=\"ml-6 mt-2\">\r\n                     <Label className=\"text-xs\">Produits (s√©par√©s par virgule)</Label>\r\n                     <Input placeholder=\"Ex: Couture, Coiffure...\" />\r\n                   </div>\r\n                 )}\r\n               </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* 9. Couverture GSM & Paiement */}\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle className=\"bg-primary/10 p-2 rounded text-primary\">Couverture GSM & Paiement</CardTitle>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-6\">\r\n            \r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n              {[\"Orange\", \"MTN\", \"MOOV\"].map((operator) => (\r\n                <div key={operator} className=\"space-y-2\">\r\n                  <Label className=\"font-bold text-lg\">{operator}</Label>\r\n                  <Select onValueChange={(val) => setValue(`reseau_${operator.toLowerCase()}` as any, val)}>\r\n                    <SelectTrigger><SelectValue placeholder=\"Qualit√© r√©seau\" /></SelectTrigger>\r\n                    <SelectContent>\r\n                      <SelectItem value=\"Tr√®s bon\">Tr√®s bon</SelectItem>\r\n                      <SelectItem value=\"Bon\">Bon</SelectItem>\r\n                      <SelectItem value=\"Moyen\">Moyen</SelectItem>\r\n                      <SelectItem value=\"Pas du tout\">Pas du tout</SelectItem>\r\n                    </SelectContent>\r\n                  </Select>\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n            <div className=\"border-t pt-4\">\r\n              <h3 className=\"font-semibold mb-3\">Services de paiement √©lectronique</h3>\r\n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <Checkbox checked={watch(\"om_orange\")} onCheckedChange={(chk) => setValue(\"om_orange\", !!chk)} />\r\n                  <Label>Orange Money</Label>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <Checkbox checked={watch(\"momo_mtn\")} onCheckedChange={(chk) => setValue(\"momo_mtn\", !!chk)} />\r\n                  <Label>MTN Mobile Money</Label>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <Checkbox checked={watch(\"flooz_moov\")} onCheckedChange={(chk) => setValue(\"flooz_moov\", !!chk)} />\r\n                  <Label>MOOV FLOOZ</Label>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <Checkbox checked={watch(\"autres_paiement\")} onCheckedChange={(chk) => setValue(\"autres_paiement\", !!chk)} />\r\n                  <Label>Autres</Label>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <div className=\"flex gap-4 justify-end pt-4\">\r\n          <Button type=\"button\" variant=\"outline\" size=\"lg\" onClick={() => navigate(\"/villages\")}>\r\n            Annuler\r\n          </Button>\r\n          <Button type=\"submit\" size=\"lg\" className=\"gap-2 bg-primary hover:bg-primary/90\">\r\n            <Save className=\"h-5 w-5\" />\r\n            Enregistrer le Village\r\n          </Button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\pages\\Villages.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\services\\agentService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":20,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[637,640],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[637,640],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":33,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1040,1043],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1040,1043],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":70,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":70,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2278,2281],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2278,2281],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Agent, Region, AgentRegion, AgentStats } from \"@/types/agent\";\r\n\r\nconst API_URL = \"http://localhost:3000/api\";\r\n\r\nexport const agentService = {\r\n  // ==================== AGENTS ====================\r\n  \r\n  getAgents: async (): Promise<Agent[]> => {\r\n    const res = await fetch(`${API_URL}/agents`);\r\n    if (!res.ok) throw new Error(\"Erreur chargement agents\");\r\n    return res.json();\r\n  },\r\n\r\n  getAgent: async (id: string): Promise<Agent> => {\r\n    const res = await fetch(`${API_URL}/agents/${id}`);\r\n    if (!res.ok) throw new Error(\"Erreur chargement agent\");\r\n    return res.json();\r\n  },\r\n\r\n  createAgent: async (data: any): Promise<Agent> => {\r\n    const res = await fetch(`${API_URL}/agents`, {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify(data)\r\n    });\r\n    if (!res.ok) {\r\n      const error = await res.json();\r\n      throw new Error(error.error || \"Erreur cr√©ation agent\");\r\n    }\r\n    return res.json();\r\n  },\r\n\r\n  updateAgent: async (id: string, data: any): Promise<Agent> => {\r\n    const res = await fetch(`${API_URL}/agents/${id}`, {\r\n      method: \"PUT\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify(data)\r\n    });\r\n    if (!res.ok) throw new Error(\"Erreur mise √† jour agent\");\r\n    return res.json();\r\n  },\r\n\r\n  deleteAgent: async (id: string): Promise<void> => {\r\n    const res = await fetch(`${API_URL}/agents/${id}`, {\r\n      method: \"DELETE\"\r\n    });\r\n    if (!res.ok) throw new Error(\"Erreur suppression agent\");\r\n  },\r\n\r\n  getAgentStats: async (id: string): Promise<AgentStats> => {\r\n    const res = await fetch(`${API_URL}/agents/${id}/stats`);\r\n    if (!res.ok) throw new Error(\"Erreur chargement statistiques\");\r\n    return res.json();\r\n  },\r\n\r\n  // ==================== R√âGIONS ====================\r\n  \r\n  getRegions: async (): Promise<Region[]> => {\r\n    const res = await fetch(`${API_URL}/regions`);\r\n    if (!res.ok) throw new Error(\"Erreur chargement r√©gions\");\r\n    return res.json();\r\n  },\r\n\r\n  getRegion: async (id: string): Promise<Region> => {\r\n    const res = await fetch(`${API_URL}/regions/${id}`);\r\n    if (!res.ok) throw new Error(\"Erreur chargement r√©gion\");\r\n    return res.json();\r\n  },\r\n\r\n  createRegion: async (data: any): Promise<Region> => {\r\n    const res = await fetch(`${API_URL}/regions`, {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify(data)\r\n    });\r\n    if (!res.ok) throw new Error(\"Erreur cr√©ation r√©gion\");\r\n    return res.json();\r\n  },\r\n\r\n  // ==================== AFFECTATIONS ====================\r\n  \r\n  affecterAgentRegion: async (idAgent: string, idRegion: string): Promise<AgentRegion> => {\r\n    const res = await fetch(`${API_URL}/agents/${idAgent}/regions`, {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({ id_region: idRegion })\r\n    });\r\n    if (!res.ok) throw new Error(\"Erreur affectation\");\r\n    return res.json();\r\n  },\r\n\r\n  retirerAgentRegion: async (idAgent: string, idRegion: string): Promise<void> => {\r\n    const res = await fetch(`${API_URL}/agents/${idAgent}/regions/${idRegion}`, {\r\n      method: \"DELETE\"\r\n    });\r\n    if (!res.ok) throw new Error(\"Erreur retrait affectation\");\r\n  },\r\n\r\n  getAgentsByRegion: async (idRegion: string): Promise<Agent[]> => {\r\n    const res = await fetch(`${API_URL}/regions/${idRegion}/agents`);\r\n    if (!res.ok) throw new Error(\"Erreur chargement agents r√©gion\");\r\n    return res.json();\r\n  },\r\n};\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\services\\api.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":77,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":77,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2856,2859],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2856,2859],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":95,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":95,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3558,3561],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3558,3561],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Organisation, Section, Village, Producteur, Parcelle, Operation } from \"@/types/organisation\";\r\n\r\nconst API_URL = \"http://localhost:3000/api\";\r\n\r\nexport const api = {\r\n  // Organisations\r\n  getOrganisations: async (): Promise<Organisation[]> => {\r\n    const res = await fetch(`${API_URL}/organisations`);\r\n    if (!res.ok) throw new Error(\"Erreur chargement organisations\");\r\n    return res.json();\r\n  },\r\n  getOrganisation: async (id: string): Promise<Organisation> => {\r\n    const res = await fetch(`${API_URL}/organisations/${id}`);\r\n    if (!res.ok) throw new Error(\"Erreur chargement organisation\");\r\n    return res.json();\r\n  },\r\n\r\n  // Sections\r\n  getSections: async (): Promise<Section[]> => {\r\n    const res = await fetch(`${API_URL}/sections`);\r\n    if (!res.ok) throw new Error(\"Erreur chargement sections\");\r\n    return res.json();\r\n  },\r\n  getSection: async (id: string): Promise<Section> => {\r\n    const res = await fetch(`${API_URL}/sections/${id}`);\r\n    if (!res.ok) throw new Error(\"Erreur chargement section\");\r\n    return res.json();\r\n  },\r\n\r\n  // Villages\r\n  getVillages: async (): Promise<Village[]> => {\r\n    const res = await fetch(`${API_URL}/villages`);\r\n    if (!res.ok) throw new Error(\"Erreur chargement villages\");\r\n    return res.json();\r\n  },\r\n  getVillage: async (id: string): Promise<Village> => {\r\n    const res = await fetch(`${API_URL}/villages/${id}`);\r\n    if (!res.ok) throw new Error(\"Erreur chargement village\");\r\n    return res.json();\r\n  },\r\n\r\n  // Producteurs\r\n  getProducteurs: async (): Promise<Producteur[]> => {\r\n    const res = await fetch(`${API_URL}/producteurs`);\r\n    if (!res.ok) throw new Error(\"Erreur chargement producteurs\");\r\n    return res.json();\r\n  },\r\n  getProducteur: async (id: string): Promise<Producteur> => {\r\n    const res = await fetch(`${API_URL}/producteurs/${id}`);\r\n    if (!res.ok) throw new Error(\"Erreur chargement producteur\");\r\n    return res.json();\r\n  },\r\n\r\n  // Parcelles\r\n  getParcelles: async (): Promise<Parcelle[]> => {\r\n    const res = await fetch(`${API_URL}/parcelles`);\r\n    if (!res.ok) throw new Error(\"Erreur chargement parcelles\");\r\n    return res.json();\r\n  },\r\n  getParcelle: async (id: string): Promise<Parcelle> => {\r\n    const res = await fetch(`${API_URL}/parcelles/${id}`);\r\n    if (!res.ok) throw new Error(\"Erreur chargement parcelle\");\r\n    return res.json();\r\n  },\r\n\r\n  // Operations\r\n  getOperations: async (): Promise<Operation[]> => {\r\n    const res = await fetch(`${API_URL}/operations`);\r\n    if (!res.ok) throw new Error(\"Erreur chargement operations\");\r\n    return res.json();\r\n  },\r\n  getOperation: async (id: string): Promise<Operation> => {\r\n    const res = await fetch(`${API_URL}/operations/${id}`);\r\n    if (!res.ok) throw new Error(\"Erreur chargement operation\");\r\n    return res.json();\r\n  },\r\n  createOperation: async (data: any): Promise<Operation> => {\r\n    try {\r\n      console.log('üì§ Envoi des donn√©es:', data);\r\n      const res = await fetch(`${API_URL}/operations`, {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify(data)\r\n      });\r\n      \r\n      if (!res.ok) {\r\n        const errorData = await res.json().catch(() => ({ error: \"Erreur inconnue\" }));\r\n        console.error('‚ùå Erreur API:', errorData);\r\n        throw new Error(errorData.error || errorData.message || \"Erreur cr√©ation operation\");\r\n      }\r\n      \r\n      const result = await res.json();\r\n      console.log('‚úÖ Op√©ration cr√©√©e:', result);\r\n      return result;\r\n    } catch (error: any) {\r\n      console.error('‚ùå Erreur dans createOperation:', error);\r\n      throw error;\r\n    }\r\n  }\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\services\\offlineService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":10,"column":9,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":12,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[304,307],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[304,307],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":33,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[828,831],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[828,831],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":156,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":156,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4364,4367],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4364,4367],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":174,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":174,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5013,5016],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5013,5016],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":194,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":194,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5574,5577],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5574,5577],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Service de gestion hors ligne pour la collecte en zone rurale\r\n * Permet de sauvegarder localement et synchroniser plus tard\r\n */\r\n\r\nexport interface PendingOperation {\r\n  id: string;\r\n  type: 'operation' | 'producteur' | 'parcelle' | 'agent';\r\n  action: 'create' | 'update' | 'delete';\r\n  data: any;\r\n  timestamp: number;\r\n  synced: boolean;\r\n  error?: string;\r\n}\r\n\r\nconst STORAGE_KEY = 'cacaotrack_pending_operations';\r\nconst LAST_SYNC_KEY = 'cacaotrack_last_sync';\r\n\r\nexport const offlineService = {\r\n  /**\r\n   * V√©rifie si l'utilisateur est en ligne\r\n   */\r\n  isOnline: (): boolean => {\r\n    return navigator.onLine;\r\n  },\r\n\r\n  /**\r\n   * Sauvegarde une op√©ration en attente de synchronisation\r\n   */\r\n  savePendingOperation: (\r\n    type: PendingOperation['type'],\r\n    action: PendingOperation['action'],\r\n    data: any\r\n  ): string => {\r\n    const operations = offlineService.getPendingOperations();\r\n    const id = `${type}_${action}_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\r\n    \r\n    const newOperation: PendingOperation = {\r\n      id,\r\n      type,\r\n      action,\r\n      data,\r\n      timestamp: Date.now(),\r\n      synced: false,\r\n    };\r\n\r\n    operations.push(newOperation);\r\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(operations));\r\n    \r\n    console.log('‚úÖ Op√©ration sauvegard√©e localement:', id);\r\n    return id;\r\n  },\r\n\r\n  /**\r\n   * R√©cup√®re toutes les op√©rations en attente\r\n   */\r\n  getPendingOperations: (): PendingOperation[] => {\r\n    try {\r\n      const stored = localStorage.getItem(STORAGE_KEY);\r\n      return stored ? JSON.parse(stored) : [];\r\n    } catch (error) {\r\n      console.error('Erreur lecture op√©rations en attente:', error);\r\n      return [];\r\n    }\r\n  },\r\n\r\n  /**\r\n   * R√©cup√®re les op√©rations non synchronis√©es\r\n   */\r\n  getUnsyncedOperations: (): PendingOperation[] => {\r\n    return offlineService.getPendingOperations().filter(op => !op.synced);\r\n  },\r\n\r\n  /**\r\n   * Compte le nombre d'op√©rations en attente\r\n   */\r\n  getPendingCount: (): number => {\r\n    return offlineService.getUnsyncedOperations().length;\r\n  },\r\n\r\n  /**\r\n   * Marque une op√©ration comme synchronis√©e\r\n   */\r\n  markAsSynced: (id: string): void => {\r\n    const operations = offlineService.getPendingOperations();\r\n    const operation = operations.find(op => op.id === id);\r\n    \r\n    if (operation) {\r\n      operation.synced = true;\r\n      localStorage.setItem(STORAGE_KEY, JSON.stringify(operations));\r\n      console.log('‚úÖ Op√©ration synchronis√©e:', id);\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Marque une op√©ration comme √©chou√©e\r\n   */\r\n  markAsError: (id: string, error: string): void => {\r\n    const operations = offlineService.getPendingOperations();\r\n    const operation = operations.find(op => op.id === id);\r\n    \r\n    if (operation) {\r\n      operation.error = error;\r\n      localStorage.setItem(STORAGE_KEY, JSON.stringify(operations));\r\n      console.error('‚ùå Erreur synchronisation:', id, error);\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Supprime une op√©ration\r\n   */\r\n  deleteOperation: (id: string): void => {\r\n    const operations = offlineService.getPendingOperations();\r\n    const filtered = operations.filter(op => op.id !== id);\r\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(filtered));\r\n    console.log('üóëÔ∏è Op√©ration supprim√©e:', id);\r\n  },\r\n\r\n  /**\r\n   * Nettoie les op√©rations synchronis√©es\r\n   */\r\n  cleanSyncedOperations: (): void => {\r\n    const operations = offlineService.getPendingOperations();\r\n    const unsynced = operations.filter(op => !op.synced);\r\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(unsynced));\r\n    console.log('üßπ Op√©rations synchronis√©es nettoy√©es');\r\n  },\r\n\r\n  /**\r\n   * Efface toutes les op√©rations\r\n   */\r\n  clearAll: (): void => {\r\n    localStorage.removeItem(STORAGE_KEY);\r\n    localStorage.removeItem(LAST_SYNC_KEY);\r\n    console.log('üóëÔ∏è Toutes les op√©rations effac√©es');\r\n  },\r\n\r\n  /**\r\n   * Enregistre la date de derni√®re synchronisation\r\n   */\r\n  setLastSync: (): void => {\r\n    localStorage.setItem(LAST_SYNC_KEY, Date.now().toString());\r\n  },\r\n\r\n  /**\r\n   * R√©cup√®re la date de derni√®re synchronisation\r\n   */\r\n  getLastSync: (): Date | null => {\r\n    const timestamp = localStorage.getItem(LAST_SYNC_KEY);\r\n    return timestamp ? new Date(parseInt(timestamp)) : null;\r\n  },\r\n\r\n  /**\r\n   * Synchronise toutes les op√©rations en attente\r\n   */\r\n  syncAll: async (apiService: any): Promise<{\r\n    success: number;\r\n    failed: number;\r\n    errors: Array<{ id: string; error: string }>;\r\n  }> => {\r\n    const operations = offlineService.getUnsyncedOperations();\r\n    let success = 0;\r\n    let failed = 0;\r\n    const errors: Array<{ id: string; error: string }> = [];\r\n\r\n    console.log(`üîÑ D√©but synchronisation de ${operations.length} op√©rations...`);\r\n\r\n    for (const operation of operations) {\r\n      try {\r\n        // Appeler l'API selon le type et l'action\r\n        await offlineService.syncOperation(operation, apiService);\r\n        offlineService.markAsSynced(operation.id);\r\n        success++;\r\n      } catch (error: any) {\r\n        const errorMsg = error.message || 'Erreur inconnue';\r\n        offlineService.markAsError(operation.id, errorMsg);\r\n        errors.push({ id: operation.id, error: errorMsg });\r\n        failed++;\r\n      }\r\n    }\r\n\r\n    if (success > 0) {\r\n      offlineService.setLastSync();\r\n    }\r\n\r\n    console.log(`‚úÖ Synchronisation termin√©e: ${success} r√©ussies, ${failed} √©chou√©es`);\r\n\r\n    return { success, failed, errors };\r\n  },\r\n\r\n  /**\r\n   * Synchronise une op√©ration sp√©cifique\r\n   */\r\n  syncOperation: async (operation: PendingOperation, apiService: any): Promise<void> => {\r\n    const { type, action, data } = operation;\r\n\r\n    switch (type) {\r\n      case 'operation':\r\n        if (action === 'create') {\r\n          await apiService.createOperation(data);\r\n        } else if (action === 'update') {\r\n          await apiService.updateOperation(data.id, data);\r\n        } else if (action === 'delete') {\r\n          await apiService.deleteOperation(data.id);\r\n        }\r\n        break;\r\n\r\n      case 'producteur':\r\n        if (action === 'create') {\r\n          await apiService.createProducteur(data);\r\n        } else if (action === 'update') {\r\n          await apiService.updateProducteur(data.id, data);\r\n        } else if (action === 'delete') {\r\n          await apiService.deleteProducteur(data.id);\r\n        }\r\n        break;\r\n\r\n      case 'parcelle':\r\n        if (action === 'create') {\r\n          await apiService.createParcelle(data);\r\n        } else if (action === 'update') {\r\n          await apiService.updateParcelle(data.id, data);\r\n        } else if (action === 'delete') {\r\n          await apiService.deleteParcelle(data.id);\r\n        }\r\n        break;\r\n\r\n      case 'agent':\r\n        if (action === 'create') {\r\n          await apiService.createAgent(data);\r\n        } else if (action === 'update') {\r\n          await apiService.updateAgent(data.id, data);\r\n        } else if (action === 'delete') {\r\n          await apiService.deleteAgent(data.id);\r\n        }\r\n        break;\r\n\r\n      default:\r\n        throw new Error(`Type d'op√©ration non support√©: ${type}`);\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Exporte les donn√©es en attente (pour backup)\r\n   */\r\n  exportPendingData: (): string => {\r\n    const operations = offlineService.getPendingOperations();\r\n    return JSON.stringify(operations, null, 2);\r\n  },\r\n\r\n  /**\r\n   * Importe des donn√©es en attente (depuis backup)\r\n   */\r\n  importPendingData: (jsonData: string): void => {\r\n    try {\r\n      const operations = JSON.parse(jsonData);\r\n      localStorage.setItem(STORAGE_KEY, JSON.stringify(operations));\r\n      console.log('‚úÖ Donn√©es import√©es avec succ√®s');\r\n    } catch (error) {\r\n      console.error('‚ùå Erreur import donn√©es:', error);\r\n      throw new Error('Format de donn√©es invalide');\r\n    }\r\n  },\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\services\\organisationService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\types\\agent.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":37,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":37,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[662,665],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[662,665],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Types pour le module Agent/User\r\n\r\n/**\r\n * R√©gion de C√¥te d'Ivoire\r\n */\r\nexport interface Region {\r\n  id: string;\r\n  code: string;\r\n  nom: string;\r\n  description?: string;\r\n  createdAt: Date;\r\n  updatedAt: Date;\r\n}\r\n\r\n/**\r\n * Agent de collecte\r\n */\r\nexport interface Agent {\r\n  id: string;\r\n  code: string;\r\n  nom: string;\r\n  prenom: string;\r\n  email?: string;\r\n  telephone: string;\r\n  statut: 'actif' | 'inactif' | 'suspendu';\r\n  \r\n  // Identit√©\r\n  date_naissance?: Date;\r\n  lieu_naissance?: string;\r\n  nationalite?: string;\r\n  type_piece?: string;\r\n  numero_piece?: string;\r\n  photo?: string;\r\n  \r\n  // Relations\r\n  regions?: AgentRegion[];\r\n  operations?: any[];\r\n  \r\n  createdAt: Date;\r\n  updatedAt: Date;\r\n}\r\n\r\n/**\r\n * Affectation Agent-R√©gion\r\n */\r\nexport interface AgentRegion {\r\n  id: string;\r\n  id_agent: string;\r\n  id_region: string;\r\n  agent?: Agent;\r\n  region?: Region;\r\n  date_affectation: Date;\r\n  date_fin?: Date;\r\n  statut: 'actif' | 'inactif';\r\n  createdAt: Date;\r\n  updatedAt: Date;\r\n}\r\n\r\n/**\r\n * Statistiques d'un agent\r\n */\r\nexport interface AgentStats {\r\n  id_agent: string;\r\n  nom_complet: string;\r\n  nb_operations: number;\r\n  nb_operations_mois: number;\r\n  poids_total: number;\r\n  poids_mois: number;\r\n  regions: string[];\r\n  dernier_operation?: Date;\r\n}\r\n\r\n/**\r\n * Donn√©es de formulaire\r\n */\r\nexport type AgentFormData = Omit<Agent, 'id' | 'createdAt' | 'updatedAt' | 'regions' | 'operations'> & {\r\n  regions: string[]; // IDs des r√©gions\r\n};\r\n\r\nexport type RegionFormData = Omit<Region, 'id' | 'createdAt' | 'updatedAt'>;\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\types\\organisation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\utils\\codeGenerators.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\utils\\codification.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\utils\\seeds.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\utils\\storage.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":15,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[621,624],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[621,624],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Organisation, Section, Village, Producteur, Parcelle, Operation } from \"@/types/organisation\";\r\nimport { SEED_ORGANISATIONS, SEED_SECTIONS, SEED_VILLAGES, SEED_PRODUCTEURS, SEED_PARCELLES, SEED_OPERATIONS } from \"./seeds\";\r\n\r\nconst STORAGE_KEYS = {\r\n  ORGANISATIONS: 'cacaotrack_organisations',\r\n  SECTIONS: 'cacaotrack_sections',\r\n  VILLAGES: 'cacaotrack_villages',\r\n  PRODUCTEURS: 'cacaotrack_producteurs',\r\n  PARCELLES: 'cacaotrack_parcelles',\r\n  OPERATIONS: 'cacaotrack_operations',\r\n  INITIALIZED: 'cacaotrack_initialized'\r\n};\r\n\r\n// Helper to parse dates from JSON\r\nconst dateReviver = (key: string, value: any) => {\r\n  if (typeof value === 'string' && /^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}/.test(value)) {\r\n    return new Date(value);\r\n  }\r\n  return value;\r\n};\r\n\r\nexport const Storage = {\r\n  initialize: () => {\r\n    const isInitialized = localStorage.getItem(STORAGE_KEYS.INITIALIZED);\r\n    if (!isInitialized) {\r\n      console.log('Initializing storage with seed data...');\r\n      localStorage.setItem(STORAGE_KEYS.ORGANISATIONS, JSON.stringify(SEED_ORGANISATIONS));\r\n      localStorage.setItem(STORAGE_KEYS.SECTIONS, JSON.stringify(SEED_SECTIONS));\r\n      localStorage.setItem(STORAGE_KEYS.VILLAGES, JSON.stringify(SEED_VILLAGES));\r\n      localStorage.setItem(STORAGE_KEYS.PRODUCTEURS, JSON.stringify(SEED_PRODUCTEURS));\r\n      localStorage.setItem(STORAGE_KEYS.PARCELLES, JSON.stringify(SEED_PARCELLES));\r\n      localStorage.setItem(STORAGE_KEYS.OPERATIONS, JSON.stringify(SEED_OPERATIONS));\r\n      localStorage.setItem(STORAGE_KEYS.INITIALIZED, 'true');\r\n      return true;\r\n    }\r\n    return false;\r\n  },\r\n\r\n  reset: () => {\r\n    localStorage.clear();\r\n    Storage.initialize();\r\n    window.location.reload();\r\n  },\r\n\r\n  // Generic Getters\r\n  getAll: <T>(key: string): T[] => {\r\n    const data = localStorage.getItem(key);\r\n    if (!data) return [];\r\n    return JSON.parse(data, dateReviver);\r\n  },\r\n\r\n  getById: <T extends { id: string }>(key: string, id: string): T | undefined => {\r\n    const items = Storage.getAll<T>(key);\r\n    return items.find(item => item.id === id);\r\n  },\r\n\r\n  // Generic Setters\r\n  save: <T extends { id: string }>(key: string, item: T) => {\r\n    const items = Storage.getAll<T>(key);\r\n    const index = items.findIndex(i => i.id === item.id);\r\n    \r\n    if (index >= 0) {\r\n      items[index] = item;\r\n    } else {\r\n      items.push(item);\r\n    }\r\n    \r\n    localStorage.setItem(key, JSON.stringify(items));\r\n  },\r\n\r\n  delete: <T extends { id: string }>(key: string, id: string) => {\r\n    const items = Storage.getAll<T>(key);\r\n    const filtered = items.filter(i => i.id !== id);\r\n    localStorage.setItem(key, JSON.stringify(filtered));\r\n  },\r\n\r\n  // Specific Accessors\r\n  getOrganisations: () => Storage.getAll<Organisation>(STORAGE_KEYS.ORGANISATIONS),\r\n  getSections: () => Storage.getAll<Section>(STORAGE_KEYS.SECTIONS),\r\n  getVillages: () => Storage.getAll<Village>(STORAGE_KEYS.VILLAGES),\r\n  getProducteurs: () => Storage.getAll<Producteur>(STORAGE_KEYS.PRODUCTEURS),\r\n  getParcelles: () => Storage.getAll<Parcelle>(STORAGE_KEYS.PARCELLES),\r\n  getOperations: () => Storage.getAll<Operation>(STORAGE_KEYS.OPERATIONS),\r\n\r\n  // Add Helpers\r\n  addProducteur: (prod: Producteur) => Storage.save(STORAGE_KEYS.PRODUCTEURS, prod),\r\n  addParcelle: (parc: Parcelle) => Storage.save(STORAGE_KEYS.PARCELLES, parc),\r\n  addOperation: (op: Operation) => Storage.save(STORAGE_KEYS.OPERATIONS, op),\r\n};\r\n\r\nexport default Storage;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\src\\vite-env.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\tailwind.config.ts","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":106,"column":13,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":106,"endColumn":43}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { Config } from \"tailwindcss\";\r\n\r\nexport default {\r\n  darkMode: [\"class\"],\r\n  content: [\"./pages/**/*.{ts,tsx}\", \"./components/**/*.{ts,tsx}\", \"./app/**/*.{ts,tsx}\", \"./src/**/*.{ts,tsx}\"],\r\n  prefix: \"\",\r\n  theme: {\r\n    container: {\r\n      center: true,\r\n      padding: \"2rem\",\r\n      screens: {\r\n        \"2xl\": \"1400px\",\r\n      },\r\n    },\r\n    extend: {\r\n      colors: {\r\n        border: \"hsl(var(--border))\",\r\n        input: \"hsl(var(--input))\",\r\n        ring: \"hsl(var(--ring))\",\r\n        background: \"hsl(var(--background))\",\r\n        foreground: \"hsl(var(--foreground))\",\r\n        primary: {\r\n          DEFAULT: \"hsl(var(--primary))\",\r\n          foreground: \"hsl(var(--primary-foreground))\",\r\n        },\r\n        secondary: {\r\n          DEFAULT: \"hsl(var(--secondary))\",\r\n          foreground: \"hsl(var(--secondary-foreground))\",\r\n        },\r\n        destructive: {\r\n          DEFAULT: \"hsl(var(--destructive))\",\r\n          foreground: \"hsl(var(--destructive-foreground))\",\r\n        },\r\n        success: {\r\n          DEFAULT: \"hsl(var(--success))\",\r\n          foreground: \"hsl(var(--success-foreground))\",\r\n        },\r\n        warning: {\r\n          DEFAULT: \"hsl(var(--warning))\",\r\n          foreground: \"hsl(var(--warning-foreground))\",\r\n        },\r\n        muted: {\r\n          DEFAULT: \"hsl(var(--muted))\",\r\n          foreground: \"hsl(var(--muted-foreground))\",\r\n        },\r\n        accent: {\r\n          DEFAULT: \"hsl(var(--accent))\",\r\n          foreground: \"hsl(var(--accent-foreground))\",\r\n        },\r\n        popover: {\r\n          DEFAULT: \"hsl(var(--popover))\",\r\n          foreground: \"hsl(var(--popover-foreground))\",\r\n        },\r\n        card: {\r\n          DEFAULT: \"hsl(var(--card))\",\r\n          foreground: \"hsl(var(--card-foreground))\",\r\n        },\r\n        sidebar: {\r\n          DEFAULT: \"hsl(var(--sidebar-background))\",\r\n          foreground: \"hsl(var(--sidebar-foreground))\",\r\n          primary: \"hsl(var(--sidebar-primary))\",\r\n          \"primary-foreground\": \"hsl(var(--sidebar-primary-foreground))\",\r\n          accent: \"hsl(var(--sidebar-accent))\",\r\n          \"accent-foreground\": \"hsl(var(--sidebar-accent-foreground))\",\r\n          border: \"hsl(var(--sidebar-border))\",\r\n          ring: \"hsl(var(--sidebar-ring))\",\r\n        },\r\n      },\r\n      backgroundImage: {\r\n        'gradient-primary': 'var(--gradient-primary)',\r\n        'gradient-success': 'var(--gradient-success)',\r\n      },\r\n      boxShadow: {\r\n        'card': 'var(--shadow-card)',\r\n        'elevated': 'var(--shadow-elevated)',\r\n      },\r\n      borderRadius: {\r\n        lg: \"var(--radius)\",\r\n        md: \"calc(var(--radius) - 2px)\",\r\n        sm: \"calc(var(--radius) - 4px)\",\r\n      },\r\n      keyframes: {\r\n        \"accordion-down\": {\r\n          from: {\r\n            height: \"0\",\r\n          },\r\n          to: {\r\n            height: \"var(--radix-accordion-content-height)\",\r\n          },\r\n        },\r\n        \"accordion-up\": {\r\n          from: {\r\n            height: \"var(--radix-accordion-content-height)\",\r\n          },\r\n          to: {\r\n            height: \"0\",\r\n          },\r\n        },\r\n      },\r\n      animation: {\r\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\r\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\r\n      },\r\n    },\r\n  },\r\n  plugins: [require(\"tailwindcss-animate\")],\r\n} satisfies Config;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Dell\\Documents\\GitHub\\cacaotrack-agent\\vite.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]